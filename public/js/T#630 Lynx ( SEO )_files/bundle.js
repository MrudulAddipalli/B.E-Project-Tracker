__taujsonp__scripts__3_12_10_39928([14],{0:function(e,t,n){"use strict";n.e(11,function(){window.require=n(867),window.define=n(1464)}),n(425).load({globals:!0,localization:!0}).then(function(){n(2755)})},78:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(784),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c={debug:function(){},info:function(){},warn:function(){},error:function(){}},d=0,f=1,h=2,g=3,p=4,m=void 0,y=void 0,v=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,null,[{key:"reset",value:function(){y=g,m=c}},{key:"debug",value:function(){if(y>=p){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];m.debug.apply(m,(0,a.default)(t))}}},{key:"info",value:function(){if(y>=g){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];m.info.apply(m,(0,a.default)(t))}}},{key:"warn",value:function(){if(y>=h){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];m.warn.apply(m,(0,a.default)(t))}}},{key:"error",value:function(){if(y>=f){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];m.error.apply(m,(0,a.default)(t))}}},{key:"NONE",get:function(){return d}},{key:"ERROR",get:function(){return f}},{key:"WARN",get:function(){return h}},{key:"INFO",get:function(){return g}},{key:"DEBUG",get:function(){return p}},{key:"level",get:function(){return y},set:function(e){if(!(d<=e&&e<=p))throw new Error("Invalid log level");y=e}},{key:"logger",get:function(){return m},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");m=e}}]),e}();t.default=v,v.reset()},208:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.formatUser=function(e){var t=e.firstName,n=void 0===t?"":t,r=e.lastName,i=void 0===r?"":r,a=e.email;return i||n?i?n?n+" "+i:i:n:a}},253:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveIndicator=void 0;var i=n(5),a=r(i),s=n(33),o=n(20),u=r(o),l=n(3),c=r(l);t.SaveIndicator=function(e){var t=e.isActive;return a.default.createElement("div",{className:(0,u.default)("save-indicator tau-text-success",{"tau-active":t})},a.default.createElement(s.GeneralIcon,{name:"action-completed"}),a.default.createElement("span",{className:"save-indicator__text"},c.default.formatMessage("Saved")))}},317:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,[{key:"get",value:function(){return this._configurator}},{key:"set",value:function(e){if(e&&this._configurator)throw new Error("Board configurator already set.");this._configurator=e}}]),e}();t.default=new u},341:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var i=n(5),a=r(i);t.Loader=function(){return a.default.createElement("div",{className:"tau-loader-logo"})}},355:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){for(var r=function(r){var i=g.default.some(e,function(e){return e.name===n&&e.process.id.toString()===t[r].toString()});if(!i)return{v:!1}},i=0;i<t.length;i++){var a=r(i);if("object"===("undefined"==typeof a?"undefined":(0,f.default)(a)))return a.v}return!0}function a(e,t,n){for(var r=function(r){var i=g.default.some(e,function(e){return e.name===n&&e.entityType.name===t[r]});if(!i)return{v:!1}},i=0;i<t.length;i++){var a=r(i);if("object"===("undefined"==typeof a?"undefined":(0,f.default)(a)))return a.v}return!0}function s(e,t,n,r){var s=g.default.chain(e).filter(function(e){return e.process.id.toString()===n[0].toString()}).map(function(e){return e.name}).unique().value();return s.reduce(function(s,o){return i(e,n,o)&&a(e,r,o)&&s.push({name:o,types:g.default.keys(t[o])}),s},[])}Object.defineProperty(t,"__esModule",{value:!0}),t.MetricSetupCustomFieldsService=void 0;var o=n(6),u=r(o),l=n(7),c=r(l),d=n(70),f=r(d),h=n(1),g=r(h);t.MetricSetupCustomFieldsService=function(){function e(t){(0,u.default)(this,e),this._store2=t.getStore2()}return(0,c.default)(e,[{key:"getCustomFieldNamesForFormula",value:function(e,t){return this._getCustomFields(e).then(function(n){var r=g.default.unique(n.map(function(e){return e.process.id}));if(r.length<e.length)return[];var i={},a=g.default.unique(n.map(function(e){return i[e.name]||(i[e.name]={}),i[e.name][e.fieldType]=1,e.entityType.name}));return a.length<t.length?[]:s(n,i,e,t)})}},{key:"_getCustomFields",value:function(e){var t="customFields?select={id,name,fieldType,isSystem,process:{process.id},entityType:{entityType.id,name:entityType.name.toLower()}}",n="&where=process.id in ["+e.join()+"]";return this._store2.findAll(t+n)}}]),e}()},424:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u={setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return setInterval(e,t)}),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return clearInterval(e)})},l=!1,c=null,d=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"_testing",value:function(){l=!0}},{key:"setXMLHttpRequest",value:function(e){c=e}},{key:"location",get:function(){if(!l)return location}},{key:"localStorage",get:function(){if(!l)return localStorage}},{key:"sessionStorage",get:function(){if(!l)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!l)return c||XMLHttpRequest}},{key:"timer",get:function(){if(!l)return u}}]),e}();t.default=d},445:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedItemsNotificationService=void 0;var i=n(6),a=r(i),s=n(7),o=r(s),u=n(57),l=n(66),c=r(l),d=n(211),f=r(d),h=n(697),g=n(233),p=r(g);t.DeletedItemsNotificationService=function(){function e(t){var n=t.configurator,r=void 0===n?(0,u.throwArgNotProvided)("configurator"):n,i=t.getRestoreMessage,s=void 0===i?(0,u.throwArgNotProvided)("getRestoreMessage"):i;(0,a.default)(this,e),this._errorBar=r.service("errorBar"),this._navigator=new p.default(r,{parameterName:"boardPopup"}),this._urlBuilder=r.getUrlBuilder(),this._routing=r.getRouting(),this._getRestoreMessage=s}return(0,o.default)(e,[{key:"showError",value:function(e){this._errorBar.fire(f.default.ERROR,c.default.translateStoreError({data:e}))}},{key:"showRestoreSuccess",value:function(e){var t=this;this._errorBar.fire(f.default.SUCCESS,this._getRestoreMessage({entity:e,url:this._urlBuilder.getShortViewUrl(e),onUrlClick:function(n){n.preventDefault(),(0,h.redirectToLastPage)({routing:t._routing,urlBuilder:t._urlBuilder}),t._navigator.to(e.resourceType+"/"+e.id)}}))}}]),e}()},446:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.tagManagementCommands=t.createTagManagementReducer=t.TAGS_PER_PAGE=t.MAX_TAG_LENGTH=t.TagManagementEvents=void 0;var i=n(38),a=r(i),s=n(70),o=r(s),u=n(28),l=r(u),c=n(1),d=r(c),f=n(36),h=t.TagManagementEvents={LOADING_STARTED:"TagManagement/LoadingStarted",TAGS_LOADED:"TagManagement/TagsLoaded",SELECTION_CHANGED:"TagManagement/SelectionChanged",SEARCH_TEXT_CHANGED:"TagManagement/SearchTextChanged",RENAME_CHANGED:"TagManagement/RenameChanged",RENAME_TEXT_CHANGED:"TagManagement/RenameTextChanged",FILTER_APPLIED:"TagManagement/FilterApplied",EMOJI_PICKER_VISIBILITY_CHANGED:"TagManagement/EmojiPickerVisibilityChanged",ADD_TAG_CHANGED:"TagManagement/AddTagChanged",PAGE_CHANGED:"TagManagement/PageChanged",SELECTION_CLEARED:"TagManagement/SelectionCleared"},g=t.MAX_TAG_LENGTH=50,p=t.TAGS_PER_PAGE=300,m={isLoading:!0,allTags:{},sortedTagNames:[],currentlyVisibleTagNames:[],searchFieldText:"",currentTagFilter:"",currentRenameText:"",isRenameTextValid:!0,emojiPickerShown:!1,addingTag:!1,currentPage:0},y=function(e){var t=e?e.replace(/^\s+|\s+$/g,""):"";return t.length>g?t.substring(0,50):t},v=function(e){var t=e.allTags;return d.default.keys(t).filter(function(e){return t[e].isSelected})};t.createTagManagementReducer=function(){var e;return(0,f.createSimpleReducer)(m,(e={},(0,l.default)(e,h.LOADING_STARTED,{isLoading:!0}),(0,l.default)(e,h.TAGS_LOADED,function(e,t){var n=e.tags,r=e.sortedTagNames,i=e.currentPage,a=void 0===i?0:i,s=t.searchFieldText,o=s.toLowerCase();return{allTags:n,sortedTagNames:r,currentlyVisibleTagNames:0===s.length?r:r.filter(function(e){return e.toLowerCase().indexOf(o)>=0}),isLoading:!1,currentPage:a}}),(0,l.default)(e,h.SELECTION_CHANGED,function(e,t){var n=e.tagName,r=e.isSelected,i=t.allTags;if(n){var a=function(){var e=n.toLowerCase(),t=d.default.findKey(i,function(t,n){return n.toLowerCase()===e});return{v:{allTags:t?d.default.defaults((0,l.default)({},t,d.default.defaults({isSelected:r},i[t])),i):i}}}();if("object"===("undefined"==typeof a?"undefined":(0,o.default)(a)))return a.v}return{allTags:i}}),(0,l.default)(e,h.RENAME_CHANGED,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tagName,n=(e.isRenaming,arguments[1]),r=n.allTags;return{allTags:d.default.mapObject(r,function(e,n){return d.default.defaults({isRenaming:n===t},e)}),currentRenameText:t,isRenameTextValid:!1,emojiPickerShown:!1}}),(0,l.default)(e,h.RENAME_TEXT_CHANGED,function(e,t){var n=e.text,r=t.allTags,i=y(n).toLowerCase(),a=n.toLowerCase(),s=d.default.findKey(r,function(e,t){return t.toLowerCase()===i})||d.default.findKey(r,function(e,t){return t.toLowerCase()===a}),o=d.default.findKey(r,function(e){return e.isSelected===!0});return{currentRenameText:n,isRenameTextValid:0!==i.length&&(!s||s===o),emojiPickerShown:!1}}),(0,l.default)(e,h.SEARCH_TEXT_CHANGED,function(e){var t=e.text;return{searchFieldText:t}}),(0,l.default)(e,h.FILTER_APPLIED,function(e,t){var n=t.searchFieldText,r=t.sortedTagNames,i=n.toLowerCase();return{currentTagFilter:n,currentlyVisibleTagNames:0===n.length?r:r.filter(function(e){return e.toLowerCase().indexOf(i)>=0}),currentPage:0}}),(0,l.default)(e,h.EMOJI_PICKER_VISIBILITY_CHANGED,function(e){var t=e.emojiPickerShown;return{emojiPickerShown:t}}),(0,l.default)(e,h.ADD_TAG_CHANGED,function(e,t){var n=e.addingTag,r=t.allTags,i=t.sortedTagNames;return{allTags:n?d.default.mapObject(r,function(e){return d.default.defaults({isRenaming:!1,isSelected:!1},e)}):r,currentRenameText:"",isRenameTextValid:!1,emojiPickerShown:!1,currentTagFilter:"",searchFieldText:"",currentlyVisibleTagNames:i,addingTag:n}}),(0,l.default)(e,h.PAGE_CHANGED,function(e){var t=e.currentPage;return{currentPage:t}}),(0,l.default)(e,h.SELECTION_CLEARED,function(e,t){var n=t.allTags;return{allTags:d.default.mapObject(n,function(e){return d.default.defaults({isSelected:!1},e)})}}),e))},t.tagManagementCommands={loadTags:function(e){var t=this;return function(n){var r=n.dispatch,i=n.getState,a=n.tagService;r({type:h.LOADING_STARTED}),a.getTags().then(function(n){var a=n.map(function(e){return e.tagName}),s=i(),o=s.currentPage;r({type:h.TAGS_LOADED,payload:{tags:d.default.indexBy(n,"tagName"),sortedTagNames:a,currentPage:o}});var u=i(),l=u.allTags;e&&d.default.has(l,e)&&d.default.defer(function(){r(t.setPageToTag({tagName:e,removeFilterIfNecessary:!0})),r(t.setTagSelected(e,!1)),r(t.setTagSelected(e,!0))})})}},setSearchText:function(e){return{type:h.SEARCH_TEXT_CHANGED,payload:{text:e}}},applyFilter:function(){return{type:h.FILTER_APPLIED}},clearFilter:function(){var e=this;return function(t){var n=t.dispatch;n(e.setSearchText("")),n(e.applyFilter())}},setTagSelected:function(e,t){return{type:h.SELECTION_CHANGED,payload:{tagName:e,isSelected:t}}},deleteSelected:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=t.tagService,a=v(r());0!==a.length&&(n({type:h.LOADING_STARTED}),i.deleteTags({tags:a}).then(function(){n(e.loadTags())}))}},mergeSelected:function(e){var t=this;return function(n){var r=n.dispatch,i=n.getState,a=n.tagService,s=v(i());0!==s.length&&(r({type:h.LOADING_STARTED}),a.mergeTags({tag:e,mergeTags:s}).then(function(){r(t.loadTags(e))}))}},setTagRenaming:function(e){var t=this;return function(n){var r=n.dispatch,i=n.getState,s=i(),o=s.allTags,u=v({allTags:o});if(1===u.length){var l=(0,a.default)(u,1),c=l[0],f=o[c].isRenaming;r(t.setPageToTag({tagName:e,removeFilterIfNecessary:!0})),d.default.defer(function(){return r({type:h.RENAME_CHANGED,payload:{tagName:e,isRenaming:!f}})})}}},applyRename:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=t.tagService,s=r(),o=s.allTags,u=s.currentRenameText,l=s.isRenameTextValid;if(!l)return n({type:h.RENAME_CHANGED}),n(e.setPageToTag({tagName:u,removeFilterIfNecessary:!0})),void d.default.defer(function(){n(e.clearSelection()),n(e.setTagSelected(u,!0))});var c=d.default.keys(o).filter(function(e){return o[e].isRenaming});if(1===c.length){var f=(0,a.default)(c,1),g=f[0],p=y(u);n({type:h.LOADING_STARTED}),i.renameTag({tag:g,newName:p}).then(function(){n(e.loadTags(p))})}}},setRenameText:function(e){return{type:h.RENAME_TEXT_CHANGED,payload:{text:e}}},setEmojiPickerVisible:function(e){return{type:h.EMOJI_PICKER_VISIBILITY_CHANGED,payload:{emojiPickerShown:e}}},setAddingTag:function(e){return{type:h.ADD_TAG_CHANGED,payload:{addingTag:e}}},addTag:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=t.tagService,a=r(),s=a.addingTag,o=a.currentRenameText,u=a.isRenameTextValid;if(s){n(e.setAddingTag(!1));var l=d.default.uniq(o.split(",").map(y).filter(function(e){return""!==e}));l.length&&(u?(n({type:h.LOADING_STARTED}),i.createTags({tags:l}).then(function(){n(e.loadTags(l.length>1?d.default.last(l):l[0]))})):l.length&&(n(e.setPageToTag({tagName:l[0],removeFilterIfNecessary:!0})),d.default.defer(function(){n(e.setTagSelected(l[0],!0))})))}}},clearSelection:function(){return{type:h.SELECTION_CLEARED}},changePage:function(e){return function(t){var n=t.dispatch,r=t.getState,i=r(),a=i.isLoading;a||n({type:h.PAGE_CHANGED,payload:{currentPage:e}})}},setPageToTag:function(e){var t=this,n=e.tagName,r=e.removeFilterIfNecessary,i=void 0!==r&&r;return function(e){var r=e.dispatch,a=e.getState,s=a(),o=s.currentlyVisibleTagNames,u=s.currentPage,l=d.default.indexOf(o.map(function(e){return e.toLowerCase()}),n.toLowerCase());l===-1&&i&&(r(t.clearFilter()),r(t.setPageToTag({tagName:n})));var c=l===-1?0:Math.floor(l/p);u!==c&&r(t.changePage(c))}}}},502:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurableTable=void 0;var i=n(24),a=r(i),s=n(5),o=r(s),u=n(541),l=n(841),c=function(e,t){return t?t(e):{}},d=function(e){var t=e.data,n=e.columns,r=e.index,i=e.bodyRowPropsProvider;return o.default.createElement(u.Tr,(0,a.default)({key:r},c(t,i)),n.map(function(e,n){return o.default.createElement(l.ConfigurableTd,(0,a.default)({key:n},e.cell,t))}))},f=function(e){var t=e.isLoading,n=e.columns,r=e.data,i=e.bodyRowPropsProvider;if(t)return null;var a=r.map(function(e,t){return d({data:e,columns:n,index:t,bodyRowPropsProvider:i})});return o.default.createElement("tbody",null,a)},h=function(e){var t=e.isLoading,n=e.LoaderComponent;return t?o.default.createElement(n,null):null},g=t.ConfigurableTable=function(e){var t=e.data,n=e.columns,r=e.isLoading,i=e.LoaderComponent,s=e.isLight,c=e.isFixed,d=e.bodyRowPropsProvider;return o.default.createElement("div",null,o.default.createElement(u.Table,{isLight:s,isFixed:c},o.default.createElement("thead",null,o.default.createElement(u.Tr,null,n.map(function(e,t){var n=e.header;return o.default.createElement(l.ConfigurableTh,(0,a.default)({},n,{key:t}))}))),f({isLoading:r,columns:n,data:t,bodyRowPropsProvider:d})),h({isLoading:r,LoaderComponent:i}))};g.propTypes={columns:o.default.PropTypes.arrayOf(o.default.PropTypes.shape({header:o.default.PropTypes.shape({Component:o.default.PropTypes.func,props:o.default.PropTypes.object}),cell:o.default.PropTypes.shape({Component:o.default.PropTypes.func,props:o.default.PropTypes.object})})).isRequired,bodyRowPropsProvider:o.default.PropTypes.func,data:o.default.PropTypes.arrayOf(o.default.PropTypes.object),isLight:o.default.PropTypes.bool,isFixed:o.default.PropTypes.bool,isLoading:o.default.PropTypes.bool,LoaderComponent:o.default.PropTypes.func}},503:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedItemsTable=void 0;var i=n(5),a=r(i),s=n(341),o=n(836),u=t.DeletedItemsTable=function(e){var t=e.isInitialLoading,n=e.isTableLoading,r=e.Table,i=e.EmptyMessage,u=e.deletedItems,l=e.totalItemsNumber,c=e.currentPage,d=e.pageSize,f=e.changePage;return t?a.default.createElement(s.Loader,null):0===u.length?a.default.createElement(i,null):a.default.createElement("div",null,a.default.createElement(r,null),n?null:a.default.createElement(o.Paginator,{initialPage:c,total:l,pageSize:d,onPageChange:function(e){return f(e)}}))};u.propTypes={Table:a.default.PropTypes.oneOfType([a.default.PropTypes.func,a.default.PropTypes.object]).isRequired,EmptyMessage:a.default.PropTypes.oneOfType([a.default.PropTypes.func,a.default.PropTypes.object]).isRequired,isInitialLoading:a.default.PropTypes.bool.isRequired,isTableLoading:a.default.PropTypes.bool.isRequired,deletedItems:a.default.PropTypes.arrayOf(a.default.PropTypes.object).isRequired,changePage:a.default.PropTypes.func.isRequired,totalItemsNumber:a.default.PropTypes.number.isRequired,pageSize:a.default.PropTypes.number.isRequired,currentPage:a.default.PropTypes.number.isRequired}},504:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FieldHeader=void 0;var i=n(5),a=r(i),s=n(842),o=n(843),u=t.FieldHeader=function(e){var t=e.field,n=e.text,r=e.sortField,i=e.sortOrder,u=e.changeSort;return a.default.createElement(s.SortableHeader,{sort:t===r?i:"none",onClick:function(){return u(t)}},a.default.createElement(o.TextHeader,{text:n}))};u.propTypes={field:a.default.PropTypes.string.isRequired,text:a.default.PropTypes.string.isRequired,sortField:a.default.PropTypes.string.isRequired,sortOrder:a.default.PropTypes.oneOf(["asc","desc"]).isRequired,changeSort:a.default.PropTypes.func.isRequired}},505:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserRestoreMessage=t.getProjectRestoreMessage=void 0;var i=n(5),a=r(i),s=n(92),o=r(s),u=n(103),l=r(u),c=n(211),d=r(c),f=n(35),h=r(f),g=n(208),p=n(29),m=r(p),y=function(e){var t=e.name,n=e.url,r=e.onClick;return a.default.createElement("a",{href:n,onClick:r},t)},v=function(e){var t=e.children;return a.default.createElement(l.default,{kind:d.default.SUCCESS,message:a.default.createElement(h.default,{key:"message",message:"Success!"}),details:t})},S=function(e){var t=e.entity,n=e.url,r=e.onUrlClick;return a.default.createElement(v,null,a.default.createElement(h.default,{key:"details",message:m.default.getInstance().getTermForProject("project","name",t.id)+" {projectLink} was restored.",projectLink:a.default.createElement(y,{name:t.name,url:n,onClick:r,key:"entityLink"})}))},_=function(e){var t=e.entity,n=e.url,r=e.onUrlClick;return a.default.createElement(v,null,a.default.createElement(h.default,{key:"details",message:"User {userLink} was restored.",userLink:a.default.createElement(y,{name:(0,g.formatUser)(t),url:n,onClick:r,key:"entityLink"})}))};t.getProjectRestoreMessage=function(e){return new o.default(S,e)},t.getUserRestoreMessage=function(e){return new o.default(_,e)}},506:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(78),l=r(u),c=n(424),d=r(c),f=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"addQueryParam",value:function(e,t,n){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),e+="=",e+=encodeURIComponent(n)}},{key:"parseUrlFragment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.default;l.default.debug("UrlUtility.parseUrlFragment"),"string"!=typeof e&&(e=n.location.href);var r=e.lastIndexOf(t);r>=0&&(e=e.substr(r+1));for(var i,a={},s=/([^&=]+)=([^&]*)/g,o=0;i=s.exec(e);)if(a[decodeURIComponent(i[1])]=decodeURIComponent(i[2]),o++>50)return l.default.error("response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var u in a)return a;return{}}}]),e}();t.default=f},509:function(e,t){"use strict";e.exports={}},541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(839);Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return r.Table}});var i=n(840);Object.defineProperty(t,"Tr",{enumerable:!0,get:function(){return i.Tr}}),Object.defineProperty(t,"Td",{enumerable:!0,get:function(){return i.Td}}),Object.defineProperty(t,"Th",{enumerable:!0,get:function(){return i.Th}})},543:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createDeletedItemsModel=void 0;var i=n(28),a=r(i),s=n(1),o=r(s),u=n(36),l=n(1316),c={ASC:"asc",DESC:"desc"},d={INITIAL_LOADING_STARTED:"DeletedItems/InitialLoadingStarted",INITIAL_LOADING_SUCCEEDED:"DeletedItems/InitialLoadingFinished",TABLE_LOADING_STARTED:"DeletedItems/TableLoadingStarted",TABLE_LOADING_FINISHED:"DeletedItems/TableLoadingFinished",SORTING_CHANGED:"DeletedItems/SortingChanged",ITEM_RESTORED:"DeletedItems/ItemRestored",PAGE_CHANGED:"DeletedItems/PageChanged"},f=function(e){return e===c.ASC?c.DESC:c.ASC},h=function(e){return o.default.indexBy(e,function(e){return e.id})},g=20;t.createDeletedItemsModel=function(e){var t=e.initialSortField,n=e.sortFieldSelectors,r={isInitialLoading:!0,isTableLoading:!1,normalizedDeletedItems:null,sortOrder:c.ASC,sortField:t,currentPage:1},i=(0,l.createSelector)([function(e){return e.normalizedDeletedItems},function(e){return e.sortField},function(e){return e.sortOrder}],function(e,t,r){var i=n[t],a=function(e){var t=i(e);return o.default.isString(t)?t.toLowerCase():t},s=o.default.sortBy(o.default.values(e),a);return r===c.DESC?s.reverse():s}),s=(0,l.createSelector)([i,function(e){return e.currentPage}],function(e,t){var n=t-1,r=n*g;return e.slice(r,r+g)}),p=(0,l.createSelector)([i],function(e){return e.length}),m=function(e){return{deletedItems:s(e),totalItemsNumber:p(e),pageSize:g}},y=function(){var e;return(0,u.createSimpleReducer)(r,(e={},(0,a.default)(e,d.INITIAL_LOADING_STARTED,{isInitialLoading:!0}),(0,a.default)(e,d.INITIAL_LOADING_SUCCEEDED,function(e,t){var n=e.deletedItems;t.sortField,t.sortOrder;return{isInitialLoading:!1,normalizedDeletedItems:h(n)}}),(0,a.default)(e,d.SORTING_CHANGED,function(e,t){var n=e.sortField,r=t.sortOrder,i=t.sortField;return{sortOrder:n===i?f(r):c.ASC,sortField:n}}),(0,a.default)(e,d.TABLE_LOADING_STARTED,function(){return{isTableLoading:!0}}),(0,a.default)(e,d.TABLE_LOADING_FINISHED,function(){return{isTableLoading:!1}}),(0,a.default)(e,d.ITEM_RESTORED,function(e,t){var n=e.id,r=t.normalizedDeletedItems;t.currentPage;return{normalizedDeletedItems:o.default.omit(r,n),isTableLoading:!1}}),(0,a.default)(e,d.PAGE_CHANGED,function(e){var t=e.pageNumber;return{currentPage:t}}),e))},v=function(e){var t=e.notificationService,n=e.dispatch,r=e.error;t.showError(r),n({type:d.TABLE_LOADING_FINISHED})},S={load:function(){return function(e){var t=e.dispatch,n=(e.getState,e.itemsService),r=e.notificationService;t({type:d.INITIAL_LOADING_STARTED}),n.load().then(function(e){t({type:d.INITIAL_LOADING_SUCCEEDED,payload:{deletedItems:e}})},function(e){return v({notificationService:r,dispatch:t,error:e})})}},changeSort:function(e){return{type:d.SORTING_CHANGED,payload:{sortField:e}}},restore:function(e){return function(t){var n=t.dispatch,r=t.getState,i=t.itemsService,a=t.notificationService;n({type:d.TABLE_LOADING_STARTED}),i.restore(e).then(function(t){n({type:d.ITEM_RESTORED,payload:{id:e}});var i=r(),o=s(i);0===o.length&&n({type:d.PAGE_CHANGED,payload:{pageNumber:i.currentPage-1}}),a.showRestoreSuccess(t)},function(e){return v({notificationService:a,dispatch:n,error:e})})}},changePage:function(e){return{type:d.PAGE_CHANGED,payload:{pageNumber:e}}}};return{ActionCreators:S,createReducer:y,selector:m}}},623:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralSettings=t.ClearSampleDataButton=void 0;var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(13),h=r(f),g=n(5),p=r(g),m=n(1),y=r(m),v=n(3),S=r(v),_=n(125),b=n(20),E=r(b),A=n(2),w=r(A),x=n(115);n(72);var P=n(253),T=n(29),F=r(T),C=n(860),R=r(C),I=function(e){var t=e.options,n=e.selectedOption,r=e.onOptionSelected,i=e.disabled;return p.default.createElement(_.ButtonGroup,null,t.map(function(e){var t=e.id,a=e.text;return p.default.createElement(_.Button,{key:t,checked:t===n,onClick:function(){return r(t)},disabled:i},a)}))},D=[{id:"Html",text:S.default.formatMessage("WYSIWYG")},{id:"Markdown",text:S.default.formatMessage("Markdown")}],O=[{id:",",text:S.default.formatMessage("Comma")},{id:";",text:S.default.formatMessage("Semicolon")},{id:"\\t",text:S.default.formatMessage("Tab")},{id:"|",text:S.default.formatMessage("Vertical bar")}],k=t.ClearSampleDataButton=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,l.default)(t,[{key:"showConfirmation",value:function(){var e=(0,w.default)(this._container),t=e.tauConfirm("instance");if(t)return void e.tauConfirm("close");var n=this.props,r=n.sampleDataInfo,i=r.userNames,a=r.projectNames,s=n.clearSampleData,o=F.default.getInstance().getTerm("project","names"),u=(0,x.renderToStaticMarkup)(function(){return p.default.createElement("div",null,p.default.createElement("div",{className:"tau-txt"},S.default.formatMessage("All Sample {projects} and Users will be deleted.",{projects:o})),p.default.createElement("p",null,p.default.createElement("strong",null,S.default.formatMessage("{projects}",{projects:y.default.capitalize(o)}),": "),a.join(", ")),p.default.createElement("p",null,p.default.createElement("strong",null,S.default.formatMessage("Users"),": "),i.join(", ")))});e.tauConfirm({showEvent:null,content:u,callbacks:{success:s},onHide:function(){e.tauConfirm("destroy")},onShow:function(e){e.find(".i-role-actionok").removeClass("tau-primary").addClass("tau-attention")},onPositionConfig:function(e){e.my="center top",e.at="center bottom",e.collision="flipfit flipfit"}}),e.tauConfirm("show")}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"general-settings__group__controls-container"},p.default.createElement("span",{ref:function(t){return e._container=t}},p.default.createElement(_.Button,{kind:"red",onClick:this.showConfirmation.bind(this),disabled:this.props.disabled},S.default.formatMessage("Clear sample data"))))}}]),t}(p.default.Component);t.GeneralSettings=function(e){var t=e.csvDelimiter,n=e.editorType,r=e.appHostAndPath,i=(e.loadSettings,e.setCsvDelimiter),a=e.setEditorType,s=e.setAppHostAndPath,o=e.isLoading,u=(e.saveSettings,e.saveIndicator),l=e.sampleData,c=e.clearSampleData,d=e.canSaveHostAndPath,f=e.saveAppHostAndPath,h=e.errorState,g=e.isDefaultFullProjectAccess,m=e.setProjectAccess;return p.default.createElement("div",{className:"general-settings system-view__content--scroll"},p.default.createElement("div",{className:"system-view-header"},p.default.createElement("div",{className:"system-view-header__caption"},p.default.createElement("h1",{className:"header-h1"},S.default.formatMessage("General Settings")))),p.default.createElement("div",{className:"general-settings__body"},p.default.createElement("div",{className:"general-settings__group i-role-project-access"},p.default.createElement("div",{className:"general-settings__group__header"},p.default.createElement("h4",{className:"header-h4"},S.default.formatMessage("Team members access"))),p.default.createElement("p",null,S.default.formatMessage("Once you assign Team to a Project, team members should by default get access to:")),p.default.createElement("div",{className:"i-role-project-access general-settings__compound-control"},p.default.createElement(R.default,{selectedValue:""+g,onChange:function(e){return m(e)},disabled:o}),p.default.createElement(P.SaveIndicator,{isActive:"isDefaultFullProjectAccess"===u}))),p.default.createElement("div",{className:"general-settings__group"},p.default.createElement("div",{className:"general-settings__group__header"},p.default.createElement("h4",{className:"header-h4"},S.default.formatMessage("Text editor type"))),p.default.createElement("div",{className:"general-settings__group__controls-container i-role-editor-type"},p.default.createElement(I,{options:D,selectedOption:n,onOptionSelected:a,disabled:o}),p.default.createElement(P.SaveIndicator,{isActive:"editorType"===u}))),p.default.createElement("div",{className:"general-settings__group"},p.default.createElement("div",{className:"general-settings__group__header"},p.default.createElement("h4",{className:"header-h4"},S.default.formatMessage("CSV export delimiter"))),p.default.createElement("div",{className:"general-settings__group__controls-container i-role-csv-delimiter"},p.default.createElement(I,{options:O,selectedOption:t,onOptionSelected:i,disabled:o}),p.default.createElement(P.SaveIndicator,{isActive:"csvDelimiter"===u}))),l?p.default.createElement("div",{className:"general-settings__group i-role-sample-data"},p.default.createElement("div",{className:"general-settings__group__header"},p.default.createElement("h4",{className:"header-h4"},S.default.formatMessage("Sample data"))),p.default.createElement(k,{sampleDataInfo:l,clearSampleData:c,disabled:o}),p.default.createElement("div",{className:"general-settings__group__description"},S.default.formatMessage("Sample data is included in every new account to help you to better understand how the system works. Feel free to clear this data whenever you’re ready."))):null,null===r?null:p.default.createElement("div",{className:"general-settings__group i-role-root-url"},p.default.createElement("div",{className:"general-settings__group__header"},p.default.createElement("h4",{className:"header-h4"},S.default.formatMessage("Application root URL"))),p.default.createElement("div",{className:"general-settings__group__controls-container"},p.default.createElement("div",{className:"controls-group"},p.default.createElement("input",{className:(0,E.default)("tau-in-text tau-in-text--width-large",{"tau-error":h.appHostAndPath}),value:r,onChange:function(e){var t=e.target.value;return s(t)}}),p.default.createElement(_.Button,{kind:"primary",disabled:o||!d,onClick:function(){return f()}},S.default.formatMessage("Save")))),p.default.createElement("div",{className:"general-settings__group__description"},S.default.formatMessage("This field is used to configure the links in email notifications. Make sure you’re using the correct URL.")))))}},624:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SecurityTab=void 0;var i=n(5),a=r(i),s=n(3),o=r(s),u=(n(125),n(253));t.SecurityTab=function(e){var t=e.isLoading,n=e.disableHttpAccess,r=e.secureJsonp,i=e.saveIndicator,s=e.toggleSecureJsonp,l=e.toggleDisableHttpAccess;return a.default.createElement("div",{className:"security"},a.default.createElement("div",{className:"security__field i-role-jsonp"
},a.default.createElement("label",{className:"tau-checkbox"},a.default.createElement("input",{type:"checkbox",disabled:t,checked:r,onChange:s}),a.default.createElement("i",{className:"tau-checkbox__icon"}),a.default.createElement("span",null,o.default.formatMessage("Allow only token-based authentication for JSONP requests (if unchecked, all authentication types will be allowed)"))),a.default.createElement(u.SaveIndicator,{isActive:"secureJsonp"===i})),null===n?null:a.default.createElement("div",{className:"security__field i-role-https"},a.default.createElement("label",{className:"tau-checkbox"},a.default.createElement("input",{type:"checkbox",disabled:t,checked:n,onChange:l}),a.default.createElement("i",{className:"tau-checkbox__icon"}),a.default.createElement("span",null,o.default.formatMessage("Allow HTTPS access only"))),a.default.createElement(u.SaveIndicator,{isActive:"disableHttpAccess"===i})))}},625:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SystemUser=void 0;var i=n(5),a=r(i),s=n(3),o=r(s),u=n(35),l=r(u),c=n(125),d=n(253);t.SystemUser=function(e){var t=e.login,n=e.password,r=e.isPasswordChangeRequired,i=e.isLoading,s=e.setLogin,u=e.setPassword,f=e.saveSettings,h=e.saveIndicator;return a.default.createElement("div",{className:"system-user"},a.default.createElement("div",{className:"system-user__info"},a.default.createElement("p",null,a.default.createElement(l.default,{message:"The System User account makes it possible for external applications to connect to Targetprocess. For example, the Service Desk portal and REST API clients use this service account."})),a.default.createElement("p",null,a.default.createElement(l.default,{message:"This user is always active and has Administrator access permissions. However, you cannot login under its credentials via the graphical user interface (GUI)."})),a.default.createElement("p",null,a.default.createElement(l.default,{message:"More information"}),": ",a.default.createElement("a",{href:"https://www.targetprocess.com/guide/settings/users-roles-permissions/system-user/",target:"_blank",rel:"noopener noreferer",className:"tau-external-link"},a.default.createElement(l.default,{message:"System User"}))),a.default.createElement("p",null,r?a.default.createElement(l.default,{tagName:"strong",message:"Password must be set to start using System User."}):null," ",a.default.createElement(l.default,{message:"Configure System User carefully, since it can break existing integrations.",tagName:"strong"}))),a.default.createElement("form",{onSubmit:function(e){i||f(),e.preventDefault()},autoComplete:"off"},a.default.createElement("div",{className:"system-user__field"},a.default.createElement("div",{className:"field-container"},a.default.createElement("label",{htmlFor:"",className:"field-container__label"},a.default.createElement(l.default,{message:"Login or Active Directory Name of System User"})),a.default.createElement("input",{type:"text",id:"",className:"tau-in-text tau-in-text--width-large i-role-system-user-login",value:t,disabled:i,onChange:function(e){var t=e.target.value;return s(t)}}))),a.default.createElement("div",{className:"system-user__field"},a.default.createElement("div",{className:"field-container"},a.default.createElement("label",{htmlFor:"",className:"field-container__label"},a.default.createElement(l.default,{message:"Password {hint}",hint:a.default.createElement(l.default,{key:"hint",className:"system-user__field__note",message:"(type the new password if you want to change it)"})})),a.default.createElement("input",{type:"password",className:"tau-in-text tau-in-text--width-large i-role-system-user-password",value:n,disabled:i,onChange:function(e){var t=e.target.value;return u(t)},autoComplete:"new-password"}))),a.default.createElement("div",{className:"system-user__controls"},a.default.createElement(c.Button,{type:"submit",kind:"primary",size:"L",disabled:i,className:"i-role-system-user-save"},o.default.formatMessage("Save")),a.default.createElement(d.SaveIndicator,{isActive:h}))))}},626:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(13),h=r(f),g=n(2),p=r(g),m=n(5),y=r(m),v=n(3),S=r(v),_=n(20),b=r(_),E=n(1),A=r(E),w=n(859),x=n(115),P=n(33),T=function(e){e.my="center top",e.at="center bottom",e.collision="flipfit flipfit"},F=function(e){var t=e.selectedTags;return y.default.createElement("div",null,y.default.createElement("div",{className:"tau-txt"},S.default.formatMessage("Choose a name to merge the selected tags under:")),y.default.createElement("div",{className:"tags-manager-bubble__select"},y.default.createElement("select",{className:"tau-select"},t.map(function(e,t){return y.default.createElement("option",{key:t,value:e},e)}))),y.default.createElement("p",null,S.default.formatMessage("You can change this tag name later")))},C=function(e){var t=e.number,n=e.currentPage,r=e.changePage;return t===n?y.default.createElement("span",{key:t,className:"tau-paging__item active"},t+1):y.default.createElement("a",{key:t,className:"tau-paging__item",onClick:function(){return r(t)}},t+1)},R=function(e){function t(e){(0,o.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.applyFilterDebounced=A.default.debounce(function(){return n.props.applyFilter()},400),n}return(0,h.default)(t,e),(0,l.default)(t,[{key:"_showConfirm",value:function(e){var t=e.$button,n=e.getContent,r=e.onSuccess,i=e.onShow,a=e.className,s=t.tauConfirm("instance");return s?void t.tauConfirm("close"):(t.tauConfirm({showEvent:null,content:n(),callbacks:{success:r},onHide:function(){t.tauConfirm("destroy")},onShow:i,onPositionConfig:T,className:a}),void t.tauConfirm("show"))}},{key:"showDeleteConfirmation",value:function(e){this._showConfirm({$button:(0,p.default)(this._deleteButton),getContent:function(){return"<h3>"+S.default.formatHTMLMessage("Are you sure you want to delete {count} {count, plural, one {tag} other {tags}}?",{count:e})+"</h3>"},onSuccess:this.props.deleteSelected.bind(this),onShow:function(e){e.find(".i-role-actionok").removeClass("tau-primary").addClass("tau-attention")}})}},{key:"showMergeConfirmation",value:function(e){var t=this;this._showConfirm({$button:(0,p.default)(this._mergeButton),getContent:function(){return(0,x.renderToStaticMarkup)(F,{selectedTags:e})},onSuccess:function(e){var n=e.$popup,r=n.find("select").val();t.props.mergeSelected(r)},onShow:function(e){e.find(".i-role-actionok").text(S.default.formatMessage("Merge")),e.find(".i-role-actioncancel").remove()},className:"tags-manager-bubble"})}},{key:"componentDidUpdate",value:function(e){this.props.currentPage!=e.currentPage&&this._scrollNode&&(this._scrollNode.scrollTop=0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isLoading,r=t.allTags,i=t.sortedTagNames,a=t.currentlyVisibleTagNames,s=t.searchFieldText,o=t.currentTagFilter,u=t.setSearchText,l=t.applyFilter,c=t.setTagRenaming,d=t.setTagSelected,f=t.currentRenameText,h=t.setRenameText,g=t.applyRename,p=t.isRenameTextValid,m=t.emojiPickerShown,v=t.setEmojiPickerVisible,_=t.addingTag,E=t.setAddingTag,x=t.addTag,T=t.currentPage,F=t.changePage,R=t.tagsPerPage,I=a,D=Math.floor(I.length/R),O=R*T,k=O+R,N=I.slice(O,k),H=i.filter(function(e){return r[e].isSelected}),j=H.length,M=i.filter(function(e){return r[e].isRenaming}),B=0!==M.length,L=function(){1===j&&c(H[0])},V=function(){T!==D&&F(T+1)},q=function(){0!==T&&F(T-1)},U=0===D?null:y.default.createElement("div",{className:"tags-manager__paging tau-paging-wrap"},y.default.createElement("div",{className:"tau-paging i-role-paging-container"},y.default.createElement("div",{className:"tau-paging__links"},y.default.createElement("a",{className:(0,b.default)("tau-paging__prev i-role-paging-prev",{disabled:0===T}),onClick:q},S.default.formatMessage("Previous {tagsPerPage}",{tagsPerPage:R})),y.default.createElement("a",{className:(0,b.default)("tau-paging__prev i-role-paging-next",{disabled:T===D}),onClick:V},S.default.formatMessage("Next {tagsPerPage}",{tagsPerPage:R}))),y.default.createElement("div",null,y.default.createElement("div",{className:"tau-paging__list"},A.default.range(0,D+1).map(function(e){return y.default.createElement(C,{key:"pagingItem"+e,number:e,currentPage:T,changePage:F})}))))),K=function(t){u(t),e.applyFilterDebounced()},G=function(){u(""),l()};return y.default.createElement("div",{className:"tags-manager"},y.default.createElement("div",{className:"system-view-header"},y.default.createElement("div",{className:"system-view-header__caption"},y.default.createElement("h1",{className:"header-h1"},S.default.formatMessage("Tags")),y.default.createElement("div",{className:"system-view-header__controls"},y.default.createElement("div",{className:"system-view-header__left"},y.default.createElement("div",{className:"system-view-header__control"},y.default.createElement("button",{className:"tau-btn tau-success i-role-add-tag",onClick:function(){return E(!0)},disabled:n},S.default.formatMessage("Add Tag")))),y.default.createElement("div",{className:"system-view-header__right"},y.default.createElement("div",{className:"system-view-header__control"},y.default.createElement("button",{className:"tau-btn i-role-rename-tag",disabled:n||1!==j,onClick:L},S.default.formatMessage("Rename tag"))),y.default.createElement("div",{className:"system-view-header__control"},y.default.createElement("button",{className:"tau-btn i-role-merge-tags",disabled:n||j<=1,ref:function(t){return e._mergeButton=t},onClick:this.showMergeConfirmation.bind(this,H)},S.default.formatMessage("Merge {count} tags",{count:j<=1?"":j}))),y.default.createElement("div",{className:"system-view-header__control"},y.default.createElement("button",{className:"tau-btn tau-attention i-role-delete-tags",disabled:n||0===j,onClick:this.showDeleteConfirmation.bind(this,j),ref:function(t){return e._deleteButton=t}},S.default.formatMessage("Delete {count} {count, plural, one {tag} other {tags}}",{count:0===j?"":j})))))),y.default.createElement("div",{className:"tags-manager__search tau-search"},y.default.createElement("div",{className:"tau-search__wrap"},y.default.createElement("input",{type:"text",tabIndex:"-1",className:"tau-search__input i-role-resetable-target i-role-tag-search",value:s,disabled:n,onChange:function(e){return K(e.target.value)},placeholder:S.default.formatMessage("Search tags")}),y.default.createElement("span",{className:"tau-search__icon"},y.default.createElement(P.GeneralIcon,{name:"close-default",className:(0,b.default)("i-role-clear i-role-resetable-trigger",{invisible:0===s.length}),onClick:function(){return G()}}))))),y.default.createElement("div",{className:"tags-manager__body",ref:function(t){return e._scrollNode=t}},y.default.createElement("div",{className:"tags-manager__list"},0===I.length&&0!==o.length?y.default.createElement("div",{dangerouslySetInnerHTML:{__html:S.default.formatHTMLMessage("There are no tags containing '{filter}'",{filter:"<strong>"+A.default.escape(o)+"</strong>"})}}):null,N.map(function(t){var n=r[t],i=n.isSelected,a=n.isRenaming,s=n.entityCount;return y.default.createElement(w.TagListItem,{key:"tag_"+t,onClick:function(e){B?(e.stopPropagation(),e.preventDefault()):d(t,!i)},tagName:t,isSelected:!!i,isRenaming:!!a,entityCount:s,applyRename:g,scrollNode:e._scrollNode,currentRenameText:f,setRenameText:h,isRenameTextValid:p,emojiPickerShown:m,setEmojiPickerVisible:v})}),_?y.default.createElement(w.TagListItem,{key:"addTag",onClick:A.default.noop,tagName:"",isSelected:!1,isRenaming:!0,entityCount:0,applyRename:x,scrollNode:this._scrollNode,currentRenameText:f,setRenameText:h,isRenameTextValid:p,emojiPickerShown:m,setEmojiPickerVisible:v}):null),U),n?y.default.createElement("div",{className:"tau-loader-logo"}):null)}}]),t}(y.default.Component);t.default=R,R.propTypes={isLoading:m.PropTypes.bool.isRequired,allTags:m.PropTypes.objectOf(m.PropTypes.shape({tagName:m.PropTypes.string.isRequired,isSelected:m.PropTypes.bool,entityCount:m.PropTypes.number.isRequired,isRenaming:m.PropTypes.bool})),sortedTagNames:m.PropTypes.arrayOf(m.PropTypes.string).isRequired,currentlyVisibleTagNames:m.PropTypes.arrayOf(m.PropTypes.string).isRequired,searchFieldText:m.PropTypes.string.isRequired,currentTagFilter:m.PropTypes.string.isRequired,currentRenameText:m.PropTypes.string.isRequired,isRenameTextValid:m.PropTypes.bool,emojiPickerShown:m.PropTypes.bool,addingTag:m.PropTypes.bool,currentPage:m.PropTypes.number.isRequired,setSearchText:m.PropTypes.func.isRequired,applyFilter:m.PropTypes.func.isRequired,setTagSelected:m.PropTypes.func.isRequired,deleteSelected:m.PropTypes.func.isRequired,setTagRenaming:m.PropTypes.func.isRequired,applyRename:m.PropTypes.func.isRequired,setEmojiPickerVisible:m.PropTypes.func.isRequired,setAddingTag:m.PropTypes.func.isRequired,addTag:m.PropTypes.func.isRequired,changePage:m.PropTypes.func.isRequired}},628:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(1456),h=r(f),g=".well-known/openid-configuration",p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.default;if((0,o.default)(this,e),!t)throw d.default.error("No settings passed to MetadataService"),new Error("settings");this._settings=t,this._jsonService=new n}return(0,l.default)(e,[{key:"getMetadata",value:function(){var e=this;return d.default.debug("MetadataService.getMetadata"),this._settings.metadata?(d.default.debug("Returning metadata from settings"),a.default.resolve(this._settings.metadata)):this.metadataUrl?(d.default.debug("getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(t){return d.default.debug("json received"),e._settings.metadata=t,t})):(d.default.error("No authority or metadataUrl configured on settings"),a.default.reject(new Error("No authority or metadataUrl configured on settings")))}},{key:"getIssuer",value:function(){return d.default.debug("MetadataService.getIssuer"),this._getMetadataProperty("issuer")}},{key:"getAuthorizationEndpoint",value:function(){return d.default.debug("MetadataService.getAuthorizationEndpoint"),this._getMetadataProperty("authorization_endpoint")}},{key:"getUserInfoEndpoint",value:function(){return d.default.debug("MetadataService.getUserInfoEndpoint"),this._getMetadataProperty("userinfo_endpoint")}},{key:"getTokenEndpoint",value:function(){return d.default.debug("MetadataService.getTokenEndpoint"),this._getMetadataProperty("token_endpoint",!0)}},{key:"getCheckSessionIframe",value:function(){return d.default.debug("MetadataService.getCheckSessionIframe"),this._getMetadataProperty("check_session_iframe",!0)}},{key:"getEndSessionEndpoint",value:function(){return d.default.debug("MetadataService.getEndSessionEndpoint"),this._getMetadataProperty("end_session_endpoint",!0)}},{key:"getRevocationEndpoint",value:function(){return d.default.debug("MetadataService.getRevocationEndpoint"),this._getMetadataProperty("revocation_endpoint",!0)}},{key:"_getMetadataProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d.default.debug("MetadataService._getMetadataProperty",e),this.getMetadata().then(function(n){if(d.default.debug("metadata recieved"),void 0===n[e]){if(t===!0)return void d.default.warn("Metadata does not contain optional property "+e);throw d.default.error("Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return n[e]})}},{key:"getSigningKeys",value:function(){var e=this;return d.default.debug("MetadataService.getSigningKeys"),this._settings.signingKeys?(d.default.debug("Returning signingKeys from settings"),a.default.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(t){return d.default.debug("jwks_uri received",t),e._jsonService.getJson(t).then(function(t){if(d.default.debug("key set received",t),!t.keys)throw d.default.error("Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys})})}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(g)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=g))),this._metadataUrl}}]),e}();t.default=p},689:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){d.default.getMenu().addItem({id:"roles",text:s.default.formatMessage("Roles"),insert:function(e){var t=e.addDestroyable,n=u.default.get(),r=n.getApplicationPath();return t({destroy:function(){return n.getStore().evictCollection("role")}}),(0,f.insertIframe)({addDestroyable:t,url:r+"/Admin/Roles.aspx?hideleftmenu=1"})},isVisible:function(){return(0,l.isAdministrator)(e)},groupId:"process"})}Object.defineProperty(t,"__esModule",{value:!0}),t.createRolesMenuItem=i;var a=n(3),s=r(a),o=n(317),u=r(o),l=n(76),c=n(84),d=r(c),f=n(447)},690:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createTagManagementMenuItem=t.mapStateToProps=void 0;var i=n(1),a=r(i),s=n(3),o=r(s),u=n(36),l=n(53),c=n(5),d=r(c),f=n(26),h=r(f),g=n(626),p=r(g),m=n(446),y=n(104),v=r(y),S=n(1026),_=r(S),b=n(76),E=n(21),A=r(E),w=n(84),x=r(w),P=t.mapStateToProps=function(e){return a.default.defaults({tagsPerPage:m.TAGS_PER_PAGE},e)},T=function(e){return(0,u.bindActionCreatorsToSelf)(m.tagManagementCommands,e)},F=(0,l.connect)(P,T)(p.default);t.createTagManagementMenuItem=function(e){x.default.getMenu().addItem({id:"tagManagement",groupId:"process",text:o.default.formatMessage("Tags"),isVisible:function(){return(0,b.isAdministrator)(e)},insert:function(t){var n=t.addDestroyable;return(0,A.default)(function(t){var r=e.getApplicationPath(),i=new _.default({applicationPath:r}),a=(0,u.createEnhancedStore)((0,m.createTagManagementReducer)(),{middleware:[v.default.withExtraArgument({tagService:i})]}),s=document.createElement("div");h.default.render(d.default.createElement(l.Provider,{store:a},d.default.createElement(F)),s),a.dispatch(m.tagManagementCommands.loadTags()),n({destroy:function(){h.default.unmountComponentAtNode(s)}}),t(s)})}})}},691:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createProjectsTabItem=void 0;var i=n(1),a=r(i),s=n(5),o=r(s),u=n(26),l=r(u),c=n(36),d=n(53),f=n(104),h=r(f),g=n(3),p=r(g),m=n(360),y=n(849),v=n(1018),S=n(445),_=n(505),b=function(e){return a.default.defaults((0,v.selector)(e),e)},E=function(e){return(0,c.bindActionCreatorsToSelf)(v.ActionCreators,e)},A=(0,d.connect)(b,E)(y.DeletedProjectsTable);t.createProjectsTabItem=function(e){return{id:"projects",text:p.default.formatMessage("{projects}",{projects:a.default.capitalize(e.getTemplateFactory().getTermProcessor().getTerm("project","names"))}),insert:function(t){var n=t.addDestroyable,r=t.placeholder,i=(0,c.createEnhancedStore)((0,v.createReducer)(),{middleware:[h.default.withExtraArgument({itemsService:(0,m.createDeletedProjectsService)(e.getApplicationPath()),notificationService:new S.DeletedItemsNotificationService({configurator:e,getRestoreMessage:_.getProjectRestoreMessage})})]});l.default.render(o.default.createElement(d.Provider,{store:i},o.default.createElement(A)),r),i.dispatch(v.ActionCreators.load()),n({destroy:function(){l.default.unmountComponentAtNode(r)}})}}}},692:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createUsersTabItem=void 0;var i=n(1),a=r(i),s=n(5),o=r(s),u=n(26),l=r(u),c=n(36),d=n(53),f=n(104),h=r(f),g=n(3),p=r(g),m=n(360),y=n(850),v=n(1019),S=n(445),_=n(505),b=function(e){return a.default.defaults((0,v.selector)(e),e)},E=function(e){return(0,c.bindActionCreatorsToSelf)(v.ActionCreators,e)},A=(0,d.connect)(b,E)(y.DeletedUsersTable);t.createUsersTabItem=function(e){return{id:"users",text:p.default.formatMessage("Users"),insert:function(t){var n=t.addDestroyable,r=t.placeholder,i=(0,c.createEnhancedStore)((0,v.createReducer)(),{middleware:[h.default.withExtraArgument({itemsService:(0,m.createDeletedUsersService)(e.getApplicationPath()),notificationService:new S.DeletedItemsNotificationService({configurator:e,getRestoreMessage:_.getUserRestoreMessage})})]});l.default.render(o.default.createElement(d.Provider,{store:i},o.default.createElement(A)),r),i.dispatch(v.ActionCreators.load()),n({destroy:function(){l.default.unmountComponentAtNode(r)}})}}}},693:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.generalSettingsCommands=t.createGeneralSettingsReducer=t.selector=t.GeneralSettingsEvents=void 0;var i,a=n(28),s=r(a),o=n(1),u=r(o),l=n(36),c=n(135),d=r(c),f=t.GeneralSettingsEvents={LOADING_STARTED:"GeneralSettingsEvents/LoadingStarted",SETTINGS_LOADED:"GeneralSettingsEvents/SettingsLoaded",SAVE_INDICATOR_CHANGED:"GeneralSettingsEvents/SaveIndicatorChanged",APP_HOST_AND_PATH_CHANGED:"GeneralSettingsEvents/AppHostAndPathChanged",FIELD_ERROR:"GeneralSettingsEvents/FieldError"},h={csvDelimiter:{id:"csvDelimiter",needsNotification:!0},editorType:{id:"editorType",needsNotification:!0},appHostAndPath:{id:"appHostAndPath"},isDefaultFullProjectAccess:{id:"isDefaultFullProjectAccess",needsNotification:!0}},g=(i={},(0,s.default)(i,h.csvDelimiter.id,null),(0,s.default)(i,h.editorType.id,null),(0,s.default)(i,h.appHostAndPath.id,null),(0,s.default)(i,h.isDefaultFullProjectAccess.id,null),i),p={settings:g,lastLoadedSettings:g,isLoading:!0,saveIndicator:null,saveIndicatorTimestamp:null,errorState:g};t.selector=function(e){var t=e.settings,n=e.lastLoadedSettings,r=e.saveIndicator,i=e.isLoading,a=e.errorState;return u.default.defaults({isLoading:i,saveIndicator:r,canSaveHostAndPath:t.appHostAndPath!==n.appHostAndPath,errorState:a},t)},t.createGeneralSettingsReducer=function(){var e;return(0,l.createSimpleReducer)(p,(e={},(0,s.default)(e,f.LOADING_STARTED,p),(0,s.default)(e,f.SETTINGS_LOADED,function(e){var t=e.settings;return{settings:t,lastLoadedSettings:t,isLoading:!1}}),(0,s.default)(e,f.APP_HOST_AND_PATH_CHANGED,function(e,t){var n=e.appHostAndPath,r=t.settings;return{settings:u.default.defaults((0,s.default)({},h.appHostAndPath.id,n),r),errorState:g}}),(0,s.default)(e,f.SAVE_INDICATOR_CHANGED,function(e){var t=e.saveIndicator,n=e.timestamp;return{saveIndicator:t,timestamp:n}}),(0,s.default)(e,f.FIELD_ERROR,function(e,t){var n=e.fieldId,r=t.errorState;return{errorState:u.default.defaults((0,s.default)({},n,!0),r)}}),e))},t.generalSettingsCommands={loadSettings:function(){return function(e){var t=e.dispatch,n=(e.getState,e.generalSettingsService);t({type:f.LOADING_STARTED}),n.getSettings().then(function(e){t({type:f.SETTINGS_LOADED,payload:{settings:e}})})}},setCsvDelimiter:function(e){var t=this;return function(n){var r=n.dispatch;return r(t.saveField(h.csvDelimiter,e))}},setProjectAccess:function(e){var t=this;return taus.track("settings",{action:(e?"enable":"disable")+" team members access to Projects "}),function(n){var r=n.dispatch;return r(t.saveField(h.isDefaultFullProjectAccess,e))}},setEditorType:function(e){var t=this;return function(n){var r=n.dispatch;return r(t.saveField(h.editorType,e))}},saveAppHostAndPath:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=r(),a=i.settings.appHostAndPath;n(e.saveField(h.appHostAndPath,a))}},saveField:function(e,t){var n=this;return function(r){var i=r.dispatch,a=r.getState,o=r.generalSettingsService,u=a(),l=u.lastLoadedSettings,c=l[e.id];c!==t&&(i({type:f.LOADING_STARTED}),o.saveSettings((0,s.default)({},e.id,t)).fail(function(){i({type:f.FIELD_ERROR,payload:{fieldId:e.id}})}).always(function(){return o.getSettings().then(function(t){i({type:f.SETTINGS_LOADED,payload:{settings:t}}),e.needsNotification&&i(n.showSaveIndicator(e.id))})}))}},setAppHostAndPath:function(e){return{type:f.APP_HOST_AND_PATH_CHANGED,payload:{appHostAndPath:e}}},showSaveIndicator:function(e){return function(t){var n=t.dispatch;t.getState;n({type:f.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:e}}),(0,d.default)(500).then(function(){return n({type:f.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:null}})})}},clearSampleData:function(){var e=this;return function(t){var n=t.dispatch,r=(t.getState,t.generalSettingsService);n({type:f.LOADING_STARTED}),r.clearSampleData().then(function(){n(e.loadSettings())})}}}},694:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTypesSetupModel=void 0;var i=n(28),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(134),d=r(c),f=n(39),h=r(f);t.RequestTypesSetupModel=function(){function e(t){var n=t.requestTypesService;(0,o.default)(this,e),this._requestTypesService=n,this.onNextState=new d.default,this._state=this._getInitState()}return(0,l.default)(e,[{key:"init",value:function(){var e=this;this._requestTypesService.getAll().then(function(t){return e._setState(h.default.extend(e._getInitState(),{isLoading:!1,requestTypes:t}))},function(t){return e._onError(t)})}},{key:"getState",value:function(){var e=this,t=this._state,n=t.isLoading,r=t.error,i=t.requestTypes,a=t.newItem,s=h.default.compact(i.concat(a));return{isLoading:n,error:r,requestTypes:s.map(this._toViewModel,this),addNew:function(){e._setState({newItem:{icon:":warning:",isPrivateByDefault:!1,isVotingEnabled:!0}}),e._beginEditing({editingValue:""})}}}},{key:"destroy",value:function(){this.onNextState.removeAll()}},{key:"_onError",value:function(e){this._setState({isLoading:!1,error:e})}},{key:"_toViewModel",value:function(e){var t=this,n=e.id,r=e.isPrivateByDefault,i=e.isVotingEnabled,a=n||"new";return{key:a,isDeletable:Boolean(n&&this._state.requestTypes.length>1),requests:e.requests,deleteItem:function(){return t._delete({id:n})},icon:{value:e.icon,onChange:function(e){return t._update({id:n,icon:e})}},name:this._mkNameViewModel(e),isPrivateByDefault:{value:r,onChange:function(e){return t._update({id:n,isPrivateByDefault:"true"===e})}},isVotingEnabled:{value:i,onChange:function(e){return t._update({id:n,isVotingEnabled:"true"===e})}}}}},{key:"_mkNameViewModel",value:function(e){var t=this,n=e.id,r=e.name,i={value:r,beginEditing:function(){return t._beginEditing({id:n,editingValue:r})}},a=this._getEditingName(n),s=null===a?null:{value:a,onChange:function(e){return t._continueEditing({id:n,editingValue:e})},discard:function(){return t._discardAll()},commit:function(){return t._commitEditing(e)}};return{view:i,edit:s}}},{key:"_discardAll",value:function(){this._setState({editing:null,newItem:null})}},{key:"_delete",value:function(e){var t=this;this._state.isLoading||(this._setState({isLoading:!0}),this._requestTypesService.deleteOne(e).then(function(){return t.init()},function(e){return t._onError(e)}))}},{key:"_commitEditing",value:function(e){var t=e.id,n=e.name,r=this._getEditingName(t);r===n||h.default.isEmpty(r)?this._discardAll():t?this._update({id:t,name:r}):this._update(h.default.defaults({name:r},e))}},{key:"_getEditingName",value:function(e){var t=h.default.property(e)(this._state.editing);return h.default.isUndefined(t)?null:t}},{key:"_beginEditing",value:function(e){var t=e.id,n=e.editingValue;this._state.isLoading||this._setState({editing:(0,a.default)({},t,n)})}},{key:"_continueEditing",value:function(e){var t=e.id,n=e.editingValue;this._state.isLoading||null===this._getEditingName(t)||this._setState({editing:(0,a.default)({},t,n)})}},{key:"_update",value:function(e){var t=this;this._state.isLoading||(this._setState({isLoading:!0}),this._requestTypesService.save(e).then(function(){return t.init()},function(e){return t._onError(e)}))}},{key:"_getInitState",value:function(){return{isLoading:!0,editing:null,requestTypes:[],newItem:null,error:null}}},{key:"_setState",value:function(e){this._state=h.default.extend(this._state,e),this.onNextState.fire(this.getState())}}]),e}()},695:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.securityTabCommands=t.createSecurityTabReducer=t.selector=t.SecurityTabEvents=void 0;var i=n(28),a=r(i),s=n(1),o=r(s),u=n(36),l=n(135),c=r(l),d=t.SecurityTabEvents={LOADING_STARTED:"SecurityTabEvents/LoadingStarted",SETTINGS_LOADED:"SecurityTabEvents/SettingsLoaded",SAVE_INDICATOR_CHANGED:"SecurityTabEvents/SaveIndicatorChanged"},f={isLoading:!1,disableHttpAccess:null,secureJsonp:!1,saveIndicator:null};t.selector=o.default.identity,t.createSecurityTabReducer=function(){var e;return(0,u.createSimpleReducer)(f,(e={},(0,a.default)(e,d.LOADING_STARTED,{isLoading:!0}),(0,a.default)(e,d.SETTINGS_LOADED,function(e){var t=e.disableHttpAccess,n=e.secureJsonp;return{isLoading:!1,disableHttpAccess:t,secureJsonp:n}}),(0,a.default)(e,d.SAVE_INDICATOR_CHANGED,function(e){var t=e.saveIndicator;return{saveIndicator:t}}),e))},t.securityTabCommands={loadSettings:function(e){var t=this;return function(n){var r=n.dispatch,i=(n.getState,n.generalSettingsService);r({type:d.LOADING_STARTED}),i.getSettings().then(function(n){var i=n.disableHttpAccess,a=n.secureJsonp;r({type:d.SETTINGS_LOADED,payload:{disableHttpAccess:i,secureJsonp:a}}),e&&r(t.showSaveIndicator(e))})}},toggleSecureJsonp:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=t.generalSettingsService;n({type:d.LOADING_STARTED});var a=r(),s=a.secureJsonp;i.saveSettings({secureJsonp:!s}).then(function(){return n(e.loadSettings("secureJsonp"))})}},toggleDisableHttpAccess:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=t.generalSettingsService,a=r(),s=a.disableHttpAccess;null!==s&&(n({type:d.LOADING_STARTED}),i.saveSettings({disableHttpAccess:!s}).then(function(){return n(e.loadSettings("disableHttpAccess"))}))}},showSaveIndicator:function(e){return function(t){var n=t.dispatch;t.getState;n({type:d.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:e}}),(0,c.default)(500).then(function(){return n({type:d.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:null}})})}}}},696:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.systemUserCommands=t.createSystemUserReducer=t.selector=t.SystemUserEvents=void 0;var i=n(28),a=r(i),s=n(1),o=r(s),u=n(36),l=n(135),c=r(l),d=t.SystemUserEvents={SETTINGS_LOADED:"SystemUserEvents/SettingsLoaded",LOGIN_CHANGED:"SystemUserEvents/LoginChanged",PASSWORD_CHANGED:"SystemUserEvents/PasswordChanged",LOADING_STARTED:"SystemUserEvents/LoadingStarted",SAVE_INDICATOR_CHANGED:"SystemUserEvents/SaveIndicatorChanged"},f={login:"",password:"",isPasswordChangeRequired:!1,isLoading:!0,saveIndicator:!1};t.selector=o.default.identity,t.createSystemUserReducer=function(){var e;return(0,u.createSimpleReducer)(f,(e={},(0,a.default)(e,d.LOADING_STARTED,{isLoading:!0}),(0,a.default)(e,d.SETTINGS_LOADED,function(e){var t=e.login,n=e.isPasswordChangeRequired;return{login:t,isPasswordChangeRequired:n,isLoading:!1,password:""}}),(0,a.default)(e,d.LOGIN_CHANGED,function(e){var t=e.login;return{login:t}}),(0,a.default)(e,d.PASSWORD_CHANGED,function(e){var t=e.password;return{password:t}}),(0,a.default)(e,d.SAVE_INDICATOR_CHANGED,function(e){var t=e.saveIndicator;return{saveIndicator:t}}),e))},t.systemUserCommands={loadSettings:function(e){var t=this;return function(n){var r=n.dispatch,i=(n.getState,n.generalSettingsService);r({type:d.LOADING_STARTED}),i.getSystemUser().then(function(n){var i=n.loginOrActiveDirectoryName,a=n.password,s=n.requiresPasswordChange;r({type:d.SETTINGS_LOADED,payload:{login:i,password:a,
isPasswordChangeRequired:s}}),e&&r(t.showSaveIndicator())})}},setLogin:function(e){return{type:d.LOGIN_CHANGED,payload:{login:e}}},setPassword:function(e){return{type:d.PASSWORD_CHANGED,payload:{password:e}}},saveSettings:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=t.generalSettingsService;n({type:d.LOADING_STARTED});var a=r(),s=a.login,o=a.password;i.saveSystemUser({login:s,password:o}).then(function(){return n(e.loadSettings(!0))})}},showSaveIndicator:function(){return function(e){var t=e.dispatch;t({type:d.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:!0}}),(0,c.default)(500).then(function(){return t({type:d.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:!1}})})}}}},836:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Paginator=void 0;var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(13),h=r(f),g=n(5),p=r(g),m=n(20),y=r(m),v=n(3),S=r(v),_=1,b="...",E=5,A=function(e){var t=e.children,n=e.href,r=e.className,i=e.onClick;return p.default.createElement("a",{href:n,onClick:i,className:r},t)};A.propTypes={children:p.default.PropTypes.node,href:p.default.PropTypes.string.isRequired,className:p.default.PropTypes.string,onClick:p.default.PropTypes.func};var w=t.Paginator=function(e){function t(e){(0,o.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={currentPage:e.initialPage||_},n}return(0,h.default)(t,e),(0,l.default)(t,[{key:"onPageClick",value:function(e,t){t.preventDefault(),this.setPage(e)}},{key:"onNextPageClick",value:function(e){e.preventDefault(),this.setPage(this.state.currentPage+1)}},{key:"onPrevPageClick",value:function(e){e.preventDefault(),this.setPage(this.state.currentPage-1)}},{key:"setPage",value:function(e){var t=this;this.setState({currentPage:e},function(){t.props.onPageChange&&t.props.onPageChange(e)})}},{key:"componentWillReceiveProps",value:function(e){this.setState({currentPage:e.initialPage})}},{key:"render",value:function(){var e=this,n=Math.ceil(this.props.total/this.props.pageSize);if(this.props.maxPageCount&&(n=Math.min(this.props.maxPageCount,n)),n<=1)return null;var r=1===this.state.currentPage?0:this.props.pageSize,i=this.state.currentPage===n?0:Math.min(this.props.total-this.state.currentPage*this.props.pageSize,this.props.pageSize);return p.default.createElement("div",{className:"tau-paging"},p.default.createElement("div",{className:"tau-paging__links"},p.default.createElement(A,{href:"#",className:(0,y.default)({"tau-paging__prev":!0,disabled:1===this.state.currentPage}),onClick:function(t){return e.onPrevPageClick(t)}},S.default.formatMessage("Previous")+" "+(r>0?r:"")),p.default.createElement(A,{href:"#",className:(0,y.default)({"tau-paging__next":!0,disabled:this.state.currentPage>=n}),onClick:function(t){return e.onNextPageClick(t)}},S.default.formatMessage("Next")+" "+(i>0?i:""))),p.default.createElement("div",{className:"tau-paging__list"},t.generatePagingItems(this.state.currentPage,n,E).map(function(t){return e.state.currentPage===t.index?p.default.createElement("span",{key:t.index,className:"tau-paging__item active"},t.text):p.default.createElement(A,{href:"#",key:t.index,className:"tau-paging__item",onClick:function(n){return e.onPageClick(t.index,n)}},t.text)})))}}],[{key:"generatePagingItems",value:function(e,t,n){for(var r=[],i=Math.max(e-n,0),a=Math.min(e+n,t-1),s=1;s<=t;s++)1===s||s===t?r.push({index:s,text:s.toString()}):s>=i&&s<=a?r.push({index:s,text:s.toString()}):s!==i-1&&s!==a+1||r.push({index:s,text:b});return r}}]),t}(p.default.Component);w.propTypes={total:p.default.PropTypes.number.isRequired,pageSize:p.default.PropTypes.number.isRequired,onPageChange:p.default.PropTypes.func.isRequired,initialPage:p.default.PropTypes.number,maxPageCount:p.default.PropTypes.number}},839:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Table=void 0;var i=n(5),a=r(i),s=n(20),o=r(s);t.Table=function(e){var t=e.className,n=e.isLight,r=e.isFixed,i=e.children;return a.default.createElement("table",{className:(0,o.default)("tau-table",t,{"tau-table--light":n},{"tau-table--fixed":r})},i)}},840:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Th=t.Td=t.Tr=void 0;var i=n(24),a=r(i),s=n(1),o=r(s),u=n(5),l=r(u),c=n(20),d=r(c),f=function e(t){var n=t.TagName,r=t.className,i=t.children,s=o.default.omit(t,o.default.keys(e.propTypes),"children");return l.default.createElement(n,(0,a.default)({className:(0,d.default)("tau-table__"+n,r)},s),i)};f.propTypes={TagName:l.default.PropTypes.string.isRequired,className:l.default.PropTypes.string};t.Tr=function(e){return l.default.createElement(f,(0,a.default)({TagName:"tr"},e))},t.Td=function(e){return l.default.createElement(f,(0,a.default)({TagName:"td"},e))},t.Th=function(e){return l.default.createElement(f,(0,a.default)({TagName:"th"},e))}},841:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurableTh=t.ConfigurableTd=void 0;var i=n(24),a=r(i),s=n(1),o=r(s),u=n(5),l=r(u),c=n(541),d=function(e){var t=e.Component,n=e.BasicCellComponent,r=e.props,i=o.default.omit(e,"Component","props","BasicCellComponent");return l.default.createElement(n,r,t?l.default.createElement(t,i):null)},f={Component:l.default.PropTypes.func,props:l.default.PropTypes.object};d.propTypes=f;t.ConfigurableTd=function(e){return l.default.createElement(d,(0,a.default)({BasicCellComponent:c.Td},e))},t.ConfigurableTh=function(e){return l.default.createElement(d,(0,a.default)({BasicCellComponent:c.Th},e))}},842:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeSortable=t.SortableHeader=void 0;var i=n(24),a=r(i),s=n(5),o=r(s),u=n(20),l=r(u),c=t.SortableHeader=function(e){var t=e.sort,n=e.onClick,r=e.children;return o.default.createElement("span",{className:(0,l.default)({"tau-sorting":!0,"tau-sorting--desc-sorted":"desc"===t,"tau-sorting--asc-sorted":"asc"===t}),onClick:function(){return n()}},r)};c.propTypes={sort:o.default.PropTypes.oneOf(["asc","desc","none"]).isRequired,onClick:o.default.PropTypes.func};t.makeSortable=function(e){return function(t){return o.default.createElement(c,(0,a.default)({Component:e},t))}}},843:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TextHeader=void 0;var i=n(5),a=r(i),s=t.TextHeader=function(e){var t=e.text;return a.default.createElement("span",{className:"tau-sorting__title"},t)};s.propTypes={text:a.default.PropTypes.string.isRequired}},849:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedProjectsTable=void 0;var i=n(5),a=r(i),s=n(1),o=r(s),u=n(3),l=r(u),c=n(502),d=n(125),f=n(22),h=n(35),g=r(h),p=n(681),m=n(208),y=n(503),v=n(504),S=n(341),_=n(29),b=r(_),E=function(e){var t=e.name,n=e.color;return a.default.createElement("div",{className:"tau-project-label"},a.default.createElement("span",{className:"tau-project-label__icon"},a.default.createElement(p.ProjectIcon,{color:n,bordered:!0})),a.default.createElement("span",{className:"tau-project-label__text"},t))};E.propTypes={name:a.default.PropTypes.string.isRequired,color:a.default.PropTypes.string};var A=t.DeletedProjectsTable=function(e){var t=e.isInitialLoading,n=e.isTableLoading,r=e.deletedItems,i=e.restore,s=e.sortField,u=e.sortOrder,h=e.changeSort,p=e.changePage,_=e.currentPage,A=e.totalItemsNumber,w=e.pageSize;return a.default.createElement(y.DeletedItemsTable,{Table:function(){return a.default.createElement(c.ConfigurableTable,{isLight:!0,isFixed:!0,isLoading:n,LoaderComponent:S.Loader,data:r,bodyRowPropsProvider:function(e){var t=e.id;return{"data-project-id":t}},columns:[{header:{Component:function(){return a.default.createElement(v.FieldHeader,{field:"projectId",text:l.default.formatMessage("ID"),sortField:s,sortOrder:u,changeSort:h})},props:{className:"tau-table__th--id","data-column":"projectId"}},cell:{Component:function(e){var t=e.id;return a.default.createElement("div",null,t)},props:{"data-column":"projectId"}}},{header:{Component:function(){return a.default.createElement(v.FieldHeader,{field:"projectName",text:l.default.formatMessage("{project}",{project:b.default.getInstance().getTerm("project","name")}),sortField:s,sortOrder:u,changeSort:h})},props:{"data-column":"projectName"}},cell:{Component:E,props:{"data-column":"projectName"}}},{header:{Component:function(){return a.default.createElement(v.FieldHeader,{field:"process",text:l.default.formatMessage("Process"),sortField:s,sortOrder:u,changeSort:h})},props:{className:"tau-table__th--linked-entity-name","data-column":"process"}},cell:{Component:function(e){var t=e.process.name;return a.default.createElement("span",null,t)},props:{"data-column":"process"}}},{header:{Component:function(){return a.default.createElement(v.FieldHeader,{field:"program",text:o.default.capitalize(b.default.getInstance().getTerm("program","name")),sortField:s,sortOrder:u,changeSort:h})},props:{"data-column":"program",className:"tau-table__th--linked-entity-name"}},cell:{Component:function(e){var t=e.program;return t?a.default.createElement("span",null,t.name):null},props:{"data-column":"program"}}},{header:{Component:function(){return a.default.createElement(v.FieldHeader,{field:"deleteDate",text:l.default.formatMessage("Deleted On"),sortField:s,sortOrder:u,changeSort:h})},props:{className:"tau-table__th--date","data-column":"deleteDate"}},cell:{Component:function(e){var t=e.deleteDate;return a.default.createElement("div",null,(0,f.formatAs)((0,f.parse)(t),"MMM d, yyyy"))},props:{"data-column":"deleteDate"}}},{header:{Component:function(){return a.default.createElement(v.FieldHeader,{field:"lastEditor",text:l.default.formatMessage("Deleted By"),sortField:s,sortOrder:u,changeSort:h})},props:{className:"tau-table__th--assign-info","data-column":"lastEditor"}},cell:{Component:function(e){var t=e.lastEditor;return a.default.createElement("div",null,(0,m.formatUser)(t))},props:{"data-column":"lastEditor"}}},{header:{props:{className:"tau-table__th--button","data-column":"restore"}},cell:{Component:function(e){var t=e.id;return a.default.createElement("div",{className:"tau-table__td__control"},a.default.createElement(d.Button,{onClick:function(){return i(t)}},a.default.createElement(g.default,{message:"Restore"})))},props:{className:"tau-table__td--right-align","data-column":"restore"}}}]})},EmptyMessage:function(){return a.default.createElement(g.default,{message:"There are no deleted "+b.default.getInstance().getTerm("project","names")+" in the system."})},isInitialLoading:t,isTableLoading:n,deletedItems:r,changePage:p,totalItemsNumber:A,pageSize:w,currentPage:_})};A.propTypes={isInitialLoading:a.default.PropTypes.bool.isRequired,isTableLoading:a.default.PropTypes.bool.isRequired,deletedItems:a.default.PropTypes.arrayOf(a.default.PropTypes.shape({id:a.default.PropTypes.number.isRequired,name:a.default.PropTypes.string.isRequired,process:a.default.PropTypes.shape({name:a.default.PropTypes.string.isRequired}).isRequired,lastEditor:a.default.PropTypes.shape({firstName:a.default.PropTypes.string,lastName:a.default.PropTypes.string,email:a.default.PropTypes.string.isRequired}).isRequired,deleteDate:a.default.PropTypes.string.isRequired})).isRequired,restore:a.default.PropTypes.func.isRequired,sortField:a.default.PropTypes.string.isRequired,sortOrder:a.default.PropTypes.oneOf(["asc","desc"]).isRequired,changeSort:a.default.PropTypes.func.isRequired,changePage:a.default.PropTypes.func.isRequired,totalItemsNumber:a.default.PropTypes.number.isRequired,pageSize:a.default.PropTypes.number.isRequired,currentPage:a.default.PropTypes.number.isRequired}},850:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedUsersTable=void 0;var i=n(5),a=r(i),s=n(3),o=r(s),u=n(502),l=n(125),c=n(22),d=n(35),f=r(d),h=n(208),g=n(503),p=n(504),m=n(341),y=n(203),v=r(y),S=function(e){var t=e.firstName,n=e.lastName,r=e.email,i=e.avatarUri,s=(0,h.formatUser)({firstName:t,lastName:n,email:r});return a.default.createElement("div",{className:"tau-user-label"},a.default.createElement("span",{className:"tau-user-label__icon"},a.default.createElement("span",{className:"tau-avatar",title:s},a.default.createElement(v.default,{size:"S",uri:i}))),a.default.createElement("span",{className:"tau-user-label__text"},(0,h.formatUser)({firstName:t,lastName:n,email:r})))};S.propTypes={email:a.default.PropTypes.string.isRequired,avatarUri:a.default.PropTypes.string.isRequired,firstName:a.default.PropTypes.string,lastName:a.default.PropTypes.string};var _=t.DeletedUsersTable=function(e){var t=e.isInitialLoading,n=e.isTableLoading,r=e.deletedItems,i=e.restore,s=e.sortField,d=e.sortOrder,h=e.changeSort,y=e.changePage,v=e.currentPage,_=e.totalItemsNumber,b=e.pageSize;return a.default.createElement(g.DeletedItemsTable,{Table:function(){return a.default.createElement(u.ConfigurableTable,{isLight:!0,isLoading:n,LoaderComponent:m.Loader,data:r,bodyRowPropsProvider:function(e){var t=e.id;return{"data-user-id":t}},columns:[{header:{Component:function(){return a.default.createElement(p.FieldHeader,{field:"userId",text:o.default.formatMessage("ID"),sortField:s,sortOrder:d,changeSort:h})},props:{className:"tau-table__th--id","data-column":"userId"}},cell:{Component:function(e){var t=e.id;return a.default.createElement("div",null,t)},props:{"data-column":"userId"}}},{header:{Component:function(){return a.default.createElement(p.FieldHeader,{field:"userName",text:o.default.formatMessage("User"),sortField:s,sortOrder:d,changeSort:h})},props:{"data-column":"userName"}},cell:{Component:S,props:{"data-column":"userName"}}},{header:{Component:function(){return a.default.createElement(p.FieldHeader,{field:"email",text:o.default.formatMessage("Email"),sortField:s,sortOrder:d,changeSort:h})},props:{"data-column":"email",className:"tau-table__th--email"}},cell:{Component:function(e){var t=e.email;return a.default.createElement("span",null,t)},props:{"data-column":"email"}}},{header:{Component:function(){return a.default.createElement(p.FieldHeader,{field:"role",text:o.default.formatMessage("Role"),sortField:s,sortOrder:d,changeSort:h})},props:{"data-column":"role",className:"tau-table__th--assign--info"}},cell:{Component:function(e){var t=e.role.name;return a.default.createElement("span",null,t)},props:{"data-column":"role"}}},{header:{Component:function(){return a.default.createElement(p.FieldHeader,{field:"deleteDate",text:o.default.formatMessage("Deleted On"),sortField:s,sortOrder:d,changeSort:h})},props:{className:"tau-table__th--date","data-column":"deleteDate"}},cell:{Component:function(e){var t=e.deleteDate;return a.default.createElement("div",null,(0,c.formatAs)((0,c.parse)(t),"MMM d, yyyy"))},props:{"data-column":"deleteDate"}}},{header:{props:{className:"tau-table__th--button","data-column":"restore"}},cell:{Component:function(e){var t=e.id;return a.default.createElement("div",{className:"tau-table__td__control"},a.default.createElement(l.Button,{onClick:function(){return i(t)}},a.default.createElement(f.default,{message:"Restore"})))},props:{className:"tau-table__td--right-align","data-column":"restore"}}}]})},EmptyMessage:function(){return a.default.createElement(f.default,{message:"There are no deleted users in the system."})},isInitialLoading:t,isTableLoading:n,deletedItems:r,changePage:y,totalItemsNumber:_,pageSize:b,currentPage:v})};_.propTypes={isInitialLoading:a.default.PropTypes.bool.isRequired,isTableLoading:a.default.PropTypes.bool.isRequired,deletedItems:a.default.PropTypes.arrayOf(a.default.PropTypes.shape({id:a.default.PropTypes.number.isRequired,email:a.default.PropTypes.string.isRequired,avatarUri:a.default.PropTypes.string.isRequired,deleteDate:a.default.PropTypes.string.isRequired,firstName:a.default.PropTypes.string,lastName:a.default.PropTypes.string,role:a.default.PropTypes.shape({name:a.default.PropTypes.string.isRequired}).isRequired})).isRequired,restore:a.default.PropTypes.func.isRequired,sortField:a.default.PropTypes.string.isRequired,sortOrder:a.default.PropTypes.oneOf(["asc","desc"]).isRequired,changeSort:a.default.PropTypes.func.isRequired,changePage:a.default.PropTypes.func.isRequired,totalItemsNumber:a.default.PropTypes.number.isRequired,pageSize:a.default.PropTypes.number.isRequired,currentPage:a.default.PropTypes.number.isRequired}},851:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HelpDeskSettings=void 0;var i=n(5),a=r(i),s=n(3),o=r(s),u=n(125),l=n(35),c=r(l),d=n(253);t.HelpDeskSettings=function(e){var t=e.helpDeskPortalPath,n=e.notifyRequester,r=e.notifyAutoCreatedRequester,i=e.isLoading,s=e.setHelpDeskPortalPath,l=e.setNotifyRequester,f=e.setNotifyAutoCreatedRequester,h=e.save,g=e.saveIndicator;return a.default.createElement("div",{className:"help-desk-settings system-view__content--scroll"},a.default.createElement("div",{className:"system-view-header"},a.default.createElement("div",{className:"system-view-header__caption"},a.default.createElement("h1",{className:"header-h1"},o.default.formatMessage("Help Desk Portal")))),a.default.createElement("div",{className:"system-view__body"},a.default.createElement("div",{className:"help-desk-settings__content"},a.default.createElement("div",{className:"help-desk-settings__info"},o.default.formatMessage("Help Desk Portal is a separate web based application that communicates with Targetprocess. It allows your customers to post requests and ideas, discuss requests.")),a.default.createElement("form",{onSubmit:function(e){h(),e.preventDefault()}},a.default.createElement("div",{className:"help-desk-settings__field"},a.default.createElement("div",{className:"field-container"},a.default.createElement("label",{htmlFor:"",className:"field-container__label"},a.default.createElement(c.default,{message:"Help Desk Portal URL {example}",example:a.default.createElement(c.default,{message:"(Ex: http://helpdesk.yourdomain.com)",className:"help-desk-settings__field__note",key:"example"})})),a.default.createElement("input",{type:"text",id:"",className:"tau-in-text tau-in-text--width-large",value:t,disabled:i,onChange:function(e){var t=e.target.value;return s(t)}}))),a.default.createElement("div",{className:"help-desk-settings__field"},a.default.createElement("label",{className:"tau-checkbox tau-checkbox--text-top"},a.default.createElement("input",{type:"checkbox",checked:Boolean(n),disabled:i||null===n,onChange:function(){return l(!n)}}),a.default.createElement("i",{className:"tau-checkbox__icon"}),a.default.createElement("span",{className:"help-desk-settings__field__label"},a.default.createElement("span",null,o.default.formatMessage("Email access parameters to new requesters")),a.default.createElement("span",{className:"help-desk-settings__field__description"},o.default.formatMessage("When a new requester added or his password changed, he will receive an email notification with Help Desk Portal access information."))))),a.default.createElement("div",{className:"help-desk-settings__field"},a.default.createElement("label",{className:"tau-checkbox tau-checkbox--text-top"},a.default.createElement("input",{type:"checkbox",checked:Boolean(r),disabled:i||!n,onChange:function(){return f(!r)}}),a.default.createElement("i",{className:"tau-checkbox__icon"}),a.default.createElement("span",{className:"help-desk-settings__field__label"},a.default.createElement("span",null,o.default.formatMessage("Email access parameters to requesters automatically created from inbound email")),a.default.createElement("span",{className:"help-desk-settings__field__description"},o.default.formatMessage("When a new requester automatically added from inbound email, he will receive an email notification with Help Desk Portal access information."))))),a.default.createElement("div",{className:"help-desk-settings__controls"},a.default.createElement(u.Button,{kind:"primary",type:"submit",size:"L",disabled:i},o.default.formatMessage("Save")),a.default.createElement(d.SaveIndicator,{isActive:g}))))))}},852:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(13),h=r(f),g=n(5),p=r(g),m=n(107),y=n(128),v=n(88),S=n(300),_=r(S),b=n(125),E=t.Icon=function(e){function t(e){(0,o.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={emojiPickerShown:!1},n}return(0,h.default)(t,e),(0,l.default)(t,[{key:"_onPickerAppear",value:function(e){var t=this;e&&e.rendered.then(function(){return t.bubble.adjustImmediately()})}},{key:"_onClick",value:function(e){this.setState({emojiPickerShown:!0}),e.preventDefault()}},{key:"_onEmojiSelect",value:function(e){this.props.onChange(e),this.setState({emojiPickerShown:!1})}},{key:"_renderEmoji",value:function(){var e=(0,v.getEmoji)(this.props.value)||(0,v.getEmoji)(":warning:");return p.default.createElement(y.Emoji,{shortName:e.shortName,size:y.EmojiSizes.MEDIUM})}},{key:"render",value:function(){var e=this,t={key:"emoji.picker",ref:function(t){return e._onPickerAppear(t)},statisticsData:{target:"request-types"},onEmojiSelect:function(t){return e._onEmojiSelect(t)}};return p.default.createElement(m.TauBubble,{ref:function(t){return e.bubble=t},content:p.default.createElement(_.default,t),shown:this.state.emojiPickerShown,options:m.presets.toTheBottom,onNonManagedClose:function(){return e.setState({emojiPickerShown:!1})}},p.default.createElement("div",{className:"request-types-table__emoji-container"},p.default.createElement("div",{className:"request-types-table__emoji-button",onClick:function(t){return e._onClick(t)}},p.default.createElement(b.Button,{kind:"emoji",size:"S"},this._renderEmoji())),p.default.createElement("div",{className:"request-types-table__emoji-icon",onClick:function(t){return e._onClick(t)}},this._renderEmoji())))}}]),t}(p.default.Component);E.propTypes={value:g.PropTypes.string.isRequired,onChange:g.PropTypes.func.isRequired}},853:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTypeListItem=void 0;var i=n(24),a=r(i),s=n(12),o=r(s),u=n(6),l=r(u),c=n(7),d=r(c),f=n(14),h=r(f),g=n(13),p=r(g),m=n(1),y=r(m),v=n(5),S=r(v),_=n(854),b=n(852),E=n(855),A=n(107),w=n(3),x=r(w),P=n(20),T=r(P),F=n(33),C=y.default.extend({className:"tau-warning-bubble"},A.presets.toTheBottom),R=function(e){var t=e.requests,n=e.requestName,r=e.deleteItem,i=e.cancel,a=t?S.default.createElement("h3",null,x.default.formatMessage("{requests} {requests, plural, =1 {Request} other {Requests}} will be set to the first Request Type in list",{requests:t})):null;return S.default.createElement("div",{key:"Confirmation Popup"},S.default.createElement("h3",null,x.default.formatMessage("Are you sure you want to delete '{requestName}' Request Type?",{requestName:n})),a,S.default.createElement("div",{className:"tau-buttons"},S.default.createElement("div",{className:"tau-buttons__control"},S.default.createElement("button",{className:"tau-danger tau-btn",type:"button",onClick:r},x.default.formatMessage("Continue"))),S.default.createElement("div",{className:"tau-buttons__control"},S.default.createElement("button",{className:"tau-btn",onClick:i,type:"button"},x.default.formatMessage("Cancel")))))},I=t.RequestTypeListItem=function(e){function t(e){(0,l.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.state={showConfirmation:!1},n}return(0,p.default)(t,e),(0,d.default)(t,[{key:"_onDeleteClick",value:function(e){e.preventDefault(),this.setState({showConfirmation:!0})}},{key:"_mkDeleteButton",value:function(){var e=this,t=this.props,n=t.requests,r=t.name.view.value,i=t.deleteItem,s=function(){return e.setState({showConfirmation:!1})};return S.default.createElement(A.TauBubble,{content:S.default.createElement(R,(0,a.default)({key:"confirmation"},{requests:n,requestName:r,deleteItem:i,cancel:s})),shown:this.state.showConfirmation,options:C,onNonManagedClose:s},S.default.createElement("div",{className:"request-types__list__control",onClick:function(t){return e._onDeleteClick(t)}},S.default.createElement(F.GeneralIcon,{name:"trash"})))}},{key:"render",value:function(){var e=this.props.isDeletable?this._mkDeleteButton():null;return S.default.createElement("tr",{className:(0,T.default)("request-types-table__tr",{"tau-hover":this.state.showConfirmation})},S.default.createElement("td",{className:"request-types-table__td"},S.default.createElement(b.Icon,this.props.icon)),S.default.createElement("td",{className:"request-types-table__td"},S.default.createElement(_.Name,this.props.name)),S.default.createElement("td",{className:"request-types-table__td"},S.default.createElement(E.IsVotingEnabled,this.props.isVotingEnabled)),S.default.createElement("td",{className:"request-types-table__td"},S.default.createElement(E.IsPrivateByDefault,this.props.isPrivateByDefault)),S.default.createElement("td",{className:"request-types-table__td"},e))}}]),t}(S.default.Component);I.propTypes={icon:v.PropTypes.shape(b.Icon.propTypes).isRequired,name:v.PropTypes.shape(_.Name.propTypes).isRequired,isPrivateByDefault:v.PropTypes.shape(E.IsPrivateByDefault.propTypes).isRequired,isVotingEnabled:v.PropTypes.shape(E.IsVotingEnabled.propTypes).isRequired,isDeletable:v.PropTypes.bool.isRequired,requests:v.PropTypes.number,deleteItem:v.PropTypes.func.isRequired}},854:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Name=void 0;var i=n(5),a=r(i),s=n(2),o=r(s),u=function(e){var t=e.value,n=e.beginEditing;return a.default.createElement("div",{className:"request-types__table__name i-role-name",onClick:n},t)};u.propTypes={value:i.PropTypes.string,beginEditing:i.PropTypes.func.isRequired};var l=function(e){var t=e.value,n=e.onChange,r=e.discard,i=e.commit,s=function(e){e.keyCode===o.default.ui.keyCode.ESCAPE?r():e.keyCode===o.default.ui.keyCode.ENTER&&(i(),e.preventDefault())};return a.default.createElement("input",{ref:function(e){return e&&e.focus()},onKeyDown:s,onChange:function(e){return n(e.target.value)},onBlur:i,value:t,className:"tau-in-text tau-in-text--wide i-role-name",type:"text"})};l.propTypes={value:i.PropTypes.string.isRequired,onChange:i.PropTypes.func.isRequired,discard:i.PropTypes.func.isRequired,commit:i.PropTypes.func.isRequired};var c=t.Name=function(e){var t=e.view,n=e.edit;return n?l(n):u(t)};c.propTypes={view:i.PropTypes.shape(u.propTypes).isRequired,edit:i.PropTypes.shape(l.propTypes)}},855:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.IsVotingEnabled=t.IsPrivateByDefault=void 0;var i=n(5),a=r(i),s=n(3),o=r(s),u=o.default.formatMessage("Private"),l=o.default.formatMessage("Public"),c=t.IsPrivateByDefault=function(e){var t=e.value,n=e.onChange;return a.default.createElement("select",{className:"tau-select tau-select--wide i-role-isPrivateByDefault",value:t,onChange:function(e){return n(e.target.value)}},a.default.createElement("option",{value:"true"},u),a.default.createElement("option",{value:"false"},l))};c.propTypes={value:i.PropTypes.bool.isRequired,onChange:i.PropTypes.func.isRequired};var d=o.default.formatMessage("Enabled"),f=o.default.formatMessage("Disabled"),h=t.IsVotingEnabled=function(e){var t=e.value,n=e.onChange;return a.default.createElement("select",{className:"tau-select tau-select--wide i-role-isVotingEnabled",value:t,onChange:function(e){return n(e.target.value)}},a.default.createElement("option",{value:"true"},d),a.default.createElement("option",{value:"false"},f))};h.propTypes={value:i.PropTypes.bool.isRequired,onChange:i.PropTypes.func.isRequired}},856:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTypeSetup=void 0;var i=n(24),a=r(i),s=n(5),o=r(s),u=n(3),l=r(u),c=n(853),d=n(33),f=l.default.formatMessage('\n    Request Types allow you to categorize requests created in Service Desk and Targetprocess,\n    e.g. "Bug report" or "IT Request".'),h=l.default.formatMessage("\n    Request Types are applied for all processes.\n    You can add, rename, and delete Request Types here, but at least one type is required."),g=t.RequestTypeSetup=function(e){var t=e.error,n=e.isLoading,r=e.addNew,i=e.requestTypes,s=t?o.default.createElement("p",{className:"tau-message tau-message-error"},t.message):null;return o.default.createElement("div",{className:"system-view__content--scroll"},o.default.createElement("section",{className:"request-types"},o.default.createElement("div",{className:"system-view-header"},o.default.createElement("div",{className:"system-view-header__caption"},o.default.createElement("h1",{className:"header-h1"},l.default.formatMessage("Request Types")),o.default.createElement("div",{className:"system-view-header__controls"},o.default.createElement("div",{className:"system-view-header__left"},o.default.createElement("div",{className:"system-view-header__control"},o.default.createElement("button",{type:"button",className:"tau-btn tau-success i-role-add-request-button",onClick:r},l.default.formatMessage("Add Type"))))))),o.default.createElement("div",{className:"request-types__text"},o.default.createElement("p",null,f),o.default.createElement("p",null,h)),o.default.createElement("div",{className:"request-types__settings"},o.default.createElement("div",{className:"tau-loader",style:{display:n?"block":"none"}}),s,o.default.createElement("table",{className:"request-types-table"},o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",{className:"request-types-table__th request-types-table__th--icon"}),o.default.createElement("th",{className:"request-types-table__th request-types-table__th--name"},o.default.createElement("span",{className:"request-types-table__title"},o.default.createElement("span",{className:"request-types-table__title__text"},l.default.formatMessage("Title")))),o.default.createElement("th",{className:"request-types-table__th request-types-table__th--isVotingEnabled"},o.default.createElement("span",{className:"request-types-table__title"},o.default.createElement("span",{className:"request-types-table__title__text"},l.default.formatMessage("Votes")),o.default.createElement("span",{className:"request-types-table__title__icon"},o.default.createElement(d.GeneralIcon,{name:"help",className:"i-role-tooltipArticle","data-article-id":"request.types.votes"})))),o.default.createElement("th",{className:"request-types-table__th request-types-table__th--isPrivateByDefault"},o.default.createElement("span",{className:"request-types-table__title"},o.default.createElement("span",{className:"request-types-table__title__text"},l.default.formatMessage("Default Visibility")),o.default.createElement("span",{className:"request-types-table__title__icon"},o.default.createElement(d.GeneralIcon,{name:"help",className:"i-role-tooltipArticle","data-article-id":"request.types.visibility"})))),o.default.createElement("th",{className:"request-types-table__th request-types-table__th--delete"}))),o.default.createElement("tbody",null,i.map(function(e){return o.default.createElement(c.RequestTypeListItem,(0,a.default)({key:e.key},e))}))))))};g.propTypes={isLoading:s.PropTypes.bool.isRequired,error:s.PropTypes.shape({message:s.PropTypes.string.isRequired}),addNew:s.PropTypes.func.isRequired,requestTypes:s.PropTypes.arrayOf(s.PropTypes.shape(c.RequestTypeListItem.propTypes)).isRequired
}},857:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditModeTagListItem=void 0;var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(13),h=r(f),g=n(5),p=r(g),m=n(300),y=r(m),v=n(26),S=(r(v),n(107)),b=n(446),E=n(2),A=r(E),w=t.EditModeTagListItem=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,l.default)(t,[{key:"_onEmojiSelect",value:function(e){var t=this._renameInput,n=t.selectionStart,r=t.selectionEnd,i=t.value,a=this.props,s=a.setRenameText,o=a.setEmojiPickerVisible;s(i.substring(0,n)+e+i.substring(r,i.length)),o(!1),this._renameInput.focus()}},{key:"_onClickOutside",value:function(e){var t=this.props,n=t.emojiPickerShown,r=t.setEmojiPickerVisible;n&&0===this._emojiPickerBubble._widget.bubble.$popup.find(e.target).length&&(r(!1),e.stopImmediatePropagation(),e.preventDefault())}},{key:"_adjustBubble",value:function(){this._emojiPickerBubble&&this._emojiPickerBubble.adjustImmediately()}},{key:"componentDidMount",value:function(){this._clickHandler=this._onClickOutside.bind(this),document.addEventListener("click",this._clickHandler,!0)}},{key:"componentWillUnmount",value:function(){this._clickHandler&&document.removeEventListener("click",this._clickHandler,!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentRenameText,r=t.setRenameText,i=t.emojiPickerShown,a=t.setEmojiPickerVisible,s=t.applyRename,o=function(e){var t=e.keyCode;t===A.default.ui.keyCode.ENTER&&s(),t===A.default.ui.keyCode.ESCAPE&&(r(""),s())},u=p.default.createElement(y.default,{key:"emoji.picker",statisticsData:{target:"tags.settings"},onEmojiSelect:this._onEmojiSelect.bind(this),onPickerRendered:this._adjustBubble.bind(this)});return p.default.createElement("span",{className:"tau-checkbox__label",ref:function(t){return e._container=t}},p.default.createElement("span",{className:"tau-checkbox__label__input"},p.default.createElement("input",{className:"tau-in-text tau-in-text--wide tags-manager__input i-role-tag-rename",value:n,onChange:function(e){return r(e.target.value)},onKeyDown:o,autoFocus:!0,ref:function(t){return e._renameInput=t},maxLength:b.MAX_TAG_LENGTH}),p.default.createElement(S.TauBubble,{content:u,shown:Boolean(i),onNonManagedClose:_.noop,ref:function(t){return e._emojiPickerBubble=t},options:S.presets.toTheBottom},p.default.createElement("span",{className:"tau-emoji-holder i-role-emoji-button",onClick:function(){return _.defer(function(){return a(!i)})}},p.default.createElement("span",{className:"tau-emoji-picker-icon"})))))}}]),t}(p.default.Component);w.propTypes={emojiPickerShown:g.PropTypes.bool.isRequired,setEmojiPickerVisible:g.PropTypes.func.isRequired,currentRenameText:g.PropTypes.string.isRequired,setRenameText:g.PropTypes.func.isRequired,applyRename:g.PropTypes.func.isRequired}},858:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.isSelected,n=e.entityCount,r=e.tagName,i=t?s.default.createElement("span",{className:"tau-checkbox__label__counter i-role-counter",title:u.default.formatMessage("This tag is used for {count} {count, plural, one {entity} other {entities}}",{count:n||"0"})},s.default.createElement("span",{className:"tau-counter"},n)):null;return s.default.createElement("span",{className:"tau-checkbox__label"},s.default.createElement("span",{className:"tau-checkbox__label__text i-role-tag-name",title:r},d(r)),i)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReadModeTagListItem=i;var a=n(5),s=r(a),o=n(3),u=r(o),l=n(88),c=n(128),d=function(e){return(0,l.extractEmojis)(e,function(e,t){var n=e.shortName;return s.default.createElement("span",{className:"tau-checkbox__label__emoji i-role-tag-emoji",key:t,title:n},s.default.createElement(c.Emoji,{shortName:n,size:c.EmojiSizes.FLEXIBLE}))},function(e,t){return s.default.createElement("span",{className:"tag-space-formatter",key:t},e)})};i.propTypes={isSelected:a.PropTypes.bool,entityCount:a.PropTypes.number.isRequired,tagName:a.PropTypes.string.isRequired}},859:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TagListItem=void 0;var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(13),h=r(f),g=n(5),p=r(g),m=n(26),y=r(m),v=n(20),S=r(v),_=n(858),b=n(857),E=t.TagListItem=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.isRenaming&&this._bindClickOutside(),this.props.isSelected&&this._scrollToBeVisible(this.props.scrollNode)}},{key:"componentWillReceiveProps",value:function(e){this.props.isSelected===!1&&e.isSelected===!0&&this._scrollToBeVisible(e.scrollNode)}},{key:"componentDidUpdate",value:function(e){!e.isRenaming&&this.props.isRenaming?this._bindClickOutside():e.isRenaming&&!this.props.isRenaming&&this._unbindClickOutside()}},{key:"componentWillUnmount",value:function(){this._unbindClickOutside()}},{key:"_scrollToBeVisible",value:function(e){var t=y.default.findDOMNode(this);if(t&&e){var n=t.offsetTop-e.scrollTop,r=n+t.clientHeight;(n<0||r>e.clientHeight)&&(e.scrollTop=t.offsetTop)}}},{key:"_bindClickOutside",value:function(){this._clickHandler=this._onClickOutside.bind(this),document.addEventListener("click",this._clickHandler,!0)}},{key:"_unbindClickOutside",value:function(){this._clickHandler&&(document.removeEventListener("click",this._clickHandler,!0),this._clickHandler=null)}},{key:"_onClickOutside",value:function(e){var t=this.props,n=t.isRenaming,r=t.emojiPickerShown,i=t.applyRename;if(n&&!r){var a=y.default.findDOMNode(this);a&&a.contains(e.target)||(i(),e.stopPropagation(),e.preventDefault())}}},{key:"render",value:function(){var e=this.props,t=e.tagName,n=e.isSelected,r=e.isRenaming,i=e.onClick;return p.default.createElement("div",{className:(0,S.default)("tags-manager__list__item i-role-tag-item",{"tags-manager__list__item--checked i-role-selected":n,"tags-manager__list__item--editable i-role-renaming":r}),key:t},p.default.createElement("label",{className:"tau-checkbox tau-checkbox--category"},p.default.createElement("input",{type:"checkbox",checked:n,onChange:i,className:"i-role-tag-checkbox"}),p.default.createElement("i",{className:"tau-checkbox__icon"}),r?p.default.createElement(b.EditModeTagListItem,this.props):p.default.createElement(_.ReadModeTagListItem,this.props)))}}]),t}(p.default.Component);E.propTypes={tagName:g.PropTypes.string,isSelected:g.PropTypes.bool,isRenaming:g.PropTypes.bool,entityCount:g.PropTypes.number.isRequired,currentRenameText:g.PropTypes.string,setRenameText:g.PropTypes.func.isRequired,applyRename:g.PropTypes.func.isRequired,isRenameTextValid:g.PropTypes.bool,emojiPickerShown:g.PropTypes.bool,setEmojiPickerVisible:g.PropTypes.func.isRequired,scrollNode:g.PropTypes.object}},865:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(244),a=r(i),s=n(45),o=r(s),u=n(31),l=r(u),c=n(6),d=r(c),f=n(7),h=r(f),g=n(78),p=r(g),m=n(1460),y=r(m),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=t.data,i=t.created;(0,d.default)(this,e),this._id=n||(0,y.default)(),this._data=r,"number"==typeof i&&i>0?this._created=i:this._created=parseInt(Date.now()/1e3)}return(0,h.default)(e,[{key:"toStorageString",value:function(){return p.default.debug("State.toStorageString"),(0,l.default)({id:this.id,data:this.data,created:this.created})}},{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}}],[{key:"fromStorageString",value:function(t){return p.default.debug("State.fromStorageString"),new e(JSON.parse(t))}},{key:"clearStaleState",value:function(t,n){p.default.debug("State.clearStaleState");var r=Date.now()/1e3-n;return t.getAllKeys().then(function(n){p.default.debug("got keys",n);var i=[],s=!0,u=!1,l=void 0;try{for(var c,d=function(){var n=c.value;h=t.get(n).then(function(i){var a=!1;if(i)try{var s=e.fromStorageString(i);p.default.debug("got item from key: ",n,s.created),s.created<=r&&(a=!0)}catch(e){p.default.error("Error parsing state for key",n,e.message),a=!0}else p.default.debug("no item in storage for key: ",n),a=!0;if(a)return p.default.debug("removed item for key: ",n),t.remove(n)}),i.push(h)},f=(0,a.default)(n);!(s=(c=f.next()).done);s=!0){var h;d()}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}return p.default.debug("waiting on promise count:",i.length),o.default.all(i)})}}]),e}();t.default=v},868:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e+"/"+t}function a(e,t){var n=f.default.pairs(e).concat(f.default.pairs(t)),r=f.default.groupBy(n,function(e){return e[0]});return f.default.mapObject(r,function(e){var t=e.map(function(e){return e[1]});return 1===t.length?t[0]:f.default.compose.apply(f.default,t.filter(f.default.isFunction))})}function s(e,t){var n=c.default.Deferred();return e.getAppStateStore().get({fields:["acid"],callback:function(r){A.acidToTrack=r.acid,taus.context({"@":"--app-context-core",host:g.default.get(),version:e.getSystemInfo().version,path:t,user:e.getLoggedUser()}),n.resolve()},skipCacheUpdate:!0}),n}function o(e,t){var n=this,r=this.configurator,a=r.getBoardDefinitionFactory();r.getRestStorage()._cache={};var o={id:i(e,t),type:e,args:t};a.getById(t).then(function(n){s(r,o),taus.track("views",{"@":["open-view-action","--open-"+e+"-action"],view:n}),r.getViewApiService().trackViewOpened(t),this.resolve({id:n.key,entity:e})}.bind(this)).fail(function(){n.resolve({id:t,entity:e,notFound:!0})})}function u(e,t){var n=taus.start("statistics_view",{"@":["--add-last-view-entity-context",function(e){var t="@timing";return e.loadTime=e[t],delete e[t],e}],entity:{id:t.entityId,type:t.entityType.toLowerCase()}}),r={id:t.path||i(t.entityType,t.entityId),type:t.entityType,args:t.entityId};s(e,r).then(function(){taus.track({"@":["--save-last-view-entity-context"],action:t.action+" entity",name:t.action+" "+t.entityType+" #"+t.entityId,tags:[t.action+" entity"],type:t.entityType,id:t.entityId})}).then(function(){t.resolve({entity:{id:parseInt(t.entityId,10),type:t.entityType},action:t.action,cssClass:"tau-app tau-page-single tau-page-entity i-role-bubble-holder",handlers:a(t.handlers||{},{onPageLoaded:function(){n.stop()}})})})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),c=r(l),d=n(1),f=r(d),h=n(51),g=r(h),p=n(391),m=r(p),y=n(56),v=r(y),S=n(347),_=r(S),b=n(1033),E=r(b),A={acidToTrack:null,onContextLoaded:function(e){e.acid===this.acidToTrack&&(this.acidToTrack=null,taus.track("appContext",{"@":"--app-context-teams-projects",projects:e.selectedProjectIds,teams:e.selectedTeamIds}))}},w={name:"board_host",type:"master.board"};t.default={createApplicationRoutes:function(e){e.getApplicationContextService().onApplicationContextRetrieved.add(A.onContextLoaded.bind(A));var t=e.getFeaturesService(),r=t.isEnabled("board.menu.user.profile"),a=[{pattern:/start/,host:{name:"board_startScreen_h",type:"board.startScreen"},type:{name:"board_startScreen",type:"board.startScreen"}},{name:"process-setup-workflow",pattern:/process-setup\/(\d+)\/workflows\/([a-z]+)(\/withHelp)?/,adapter:function(e,t,n){var r=parseInt(e,10),i=!!n,a=this.configurator.getUrlBuilder(),s=this.configurator.getRouting();s.redirect(a.getWorkflowSetupPage(r,t,i))},host:w,type:{name:"setup workflow",type:"setup.workflow"}},{name:"process-setup-terms",pattern:/process-setup\/(\d+)\/terms/,host:w,adapter:function(e){var t=parseInt(e,10),n="terms",r=this.configurator.getUrlBuilder(),i=this.configurator.getRouting();i.redirect(r.getProcessSetupPage(t,n))},type:{name:"terms",type:"terms"}},{name:"process-setup-general",pattern:/process-setup\/(\d+)\/([a-z\-]+)/,adapter:function(e,t){var n=parseInt(e,10),r=this.configurator.getUrlBuilder(),i=this.configurator.getRouting();i.redirect(r.getProcessSetupPage(n,t))},host:w,type:{name:"setup process",type:"setup.process"}},{pattern:/invite/,adapter:function(){var e=this.configurator;if(e.getFeaturesService().isEnabled("helpFlow")){var t=e.getHelpScenarioService(),n=t.getAvailableFlows().scratch;t.setCurrentFlow(n.id),t.setState(t.stateTypes.ToBeStarted)}e.getRouting().redirect(e.getUrlBuilder().getDefaultViewUrl())},host:w,type:{name:"board_page",type:"page.board"}},{pattern:/\bcustomreport\/(\d+)/,adapter:f.default.partial(o,v.default.REPORT),host:w,type:{name:"customReport_page",type:"page.customReport"}},{pattern:/report\/(\d+)/,adapter:function(e){var t=this.configurator;t.registerService("chart.size",new m.default),this.resolve({id:e,entity:"report"})},host:w,type:{name:"report_page",type:"page.report"}},{pattern:/\bdashboard\/(\d+)/,adapter:f.default.partial(o,v.default.DASHBOARD),host:w,type:{name:"dashboard_page",type:"page.dashboard"}},{pattern:/\b(?:view|board)\/last/,adapter:function(){var e=this.configurator,t=e.getUrlBuilder(),n=c.default.Deferred(),r=null,a=e.getRouting().getLastPage(),s=a&&/#(.*)page=profile(&*)(.*)/.test(a);if(a&&!s){var o=/#(.*)page=(board|dashboard|customreport)\/(\d+)(&*)(.*)/.exec(a)||[];r=o[3]}r?e.getViewApiService().getViewMenuItem(r).done(function(e){var r=e.data,a=r.itemType||"board",s=t.getRelativeBoardPageUrl(i(a,r.key),r.acid||void 0);n.resolve(s)}).fail(function(){n.resolve(t.getDefaultViewUrl())}):s?n.resolve(t.getProfilePageUrl()):n.resolve(t.getDefaultViewUrl()),c.default.when(n).then(function(t){e.getRouting().redirect(t)})},host:w,type:{name:"board_page",type:"page.board"}},{pattern:/\b(?:view|board)\/current/,adapter:function(){var e=this.configurator;e.getGlobalBus().fire("applicationStart");var n=e.getAppStateStore().settings.acid||void 0;e.getViewsMenuService().getViewsMenuForUser().then(function(n){var r=new _.default(t);r.setSections(n);var i=r.findFirstVisibleViewData(),a=c.default.Deferred();return i?a.resolve(i):e.getBoardDefinitionFactory().createBoard().done(function(e){a.resolve(e)}),a}).then(function(t){var r=e.getUrlBuilder(),a=t.itemType||"board",s=r.getRelativeBoardPageUrl(i(a,t.key),t.acid||n);e.getRouting().redirect(s)})},host:w,type:{name:"board_page",type:"page.board"}},{pattern:/\bboard\/([^&]+)/,adapter:f.default.partial(o,v.default.BOARD),host:w,type:{name:"board_page",type:"page.board"}},{pattern:/finish-(\w+)\/(\d+)/,adapter:function(e,t){this.resolve({entity:{id:parseInt(t,10),type:e}})},host:w,type:{name:"entity component",type:"page.finish-iteration"}},{name:"split-entity",pattern:/(\w+)\/(\d+)\/split/,adapter:function(e,t){var r=n(534),i=r.showSplitPopup,a=n(144),s=a.create({id:t,entityType:{name:e}},this.configurator),o={onPageLoaded:function(){s.then(function(e){return i({context:e})})}};u(this.configurator,{resolve:this.resolve.bind(this),action:"split",entityType:e,entityId:t,handlers:o})},host:w,type:{name:"entity component",type:"page.entity"}},{name:"settings",pattern:/settings\/([\w,\/,\-]+)/,adapter:function(e){this.resolve({regionSelector:"[role=system]",settingsId:e,onRouteChanged:function(t){t.fire("settingsId.ready",e)}})},host:w,type:{name:"system.settings",type:"system.settings"}},{name:"entity-action",pattern:/(\w+)\/(\d+)\/(\w+).*/,adapter:function(e,t,n){u(this.configurator,{resolve:this.resolve.bind(this),entityType:e,entityId:t,action:n})},host:w,type:{name:"entity component",type:"page.entity"}},{name:"show-entity",pattern:/(\w+)\/(\d+)\b/,adapter:function(e,t){u(this.configurator,{resolve:this.resolve.bind(this),action:"view",entityType:e,entityId:t})},host:w,type:{name:"entity component",type:"page.entity",comet:{enabled:!0}}},{pattern:/sso\/welcome/,adapter:E.default,host:w,type:{name:"entity component",type:r?"user.profile":"page.entity"}}];return r&&a.push({name:"show-profile",pattern:/profile/,adapter:function(){var e=this,t=this.configurator.getLoggedUser();u(this.configurator,{resolve:function(t){return e.resolve(t)},path:"profile",action:"view",entityType:"user",entityId:t.id})},host:w,type:{name:"entity component",type:"user.profile",comet:{enabled:!0}}}),a}}},869:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._useDefault=void 0;var r=n(512),i=n(827),a=n(130);t._useDefault=!0;t.default=r.serviceReady.then(function(e){return{createViewMenuItem:function(t){var n=t.itemType,r=t.viewType,s=t.name,o=e.setCurrentSectionType,u=e.model,l=e.viewsMenuItemCreator;return(0,i.expandOtherSectionIfNeeded)(u).then(function(){return o(a.ALL_SECTION_TYPE),l.createMenuItem({itemType:n,viewMode:r,name:s}).then(function(e){var t=e.id,n=e.name,r=e.itemType,i=e.viewMode;return{id:t,name:n,itemType:r,viewType:i}})})}}})},1009:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createAuthenticationAndSecurityMenuItem=void 0;var i=n(3),a=r(i),s=n(423),o=n(76),u=n(1024),l=n(1025),c=n(1023),d=n(84),f=r(d);t.createAuthenticationAndSecurityMenuItem=function(e){f.default.getMenu().addItem(new s.TabsMenuItem({id:"authAndSecurity",groupId:"integration",text:a.default.formatMessage("Authentication and Security"),isVisible:function(){return(0,o.isAdministrator)(e)},className:"security-settings",nestedItems:[(0,u.createSingleSignonMenuItem)(e),(0,l.createSystemUserMenuItem)(e),(0,c.createSecurityMenuItem)(e)]}))}},1010:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomRulesMenuItem=void 0;var i=n(3),a=r(i),s=n(21),o=r(s),u=n(76),l=n(84),c=r(l);t.createCustomRulesMenuItem=function(e){c.default.getMenu().addItem({id:"customRules",groupId:"process",text:a.default.formatMessage("Custom Rules"),insert:function(t){var r=t.addDestroyable;return(0,o.default)(function(t){var i=n(518),a=i.create();r({destroy:function(){return a.fire("destroy")}}),a.on("afterRender",function(e,n){var r=n.element;return t(r[0])}),a.fire("initialize",{context:{configurator:e}})})},isVisible:function(){return(0,u.isAdministrator)(e)}})}},1011:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createDeletedItemsMenuItem=void 0;var i=n(3),a=r(i),s=n(76),o=n(84),u=r(o),l=n(423),c=n(691),d=n(692);t.createDeletedItemsMenuItem=function(e){return u.default.getMenu().addItem(new l.TabsMenuItem({id:"deletedItems",groupId:"systemSettings",text:a.default.formatMessage("Deleted Items"),isVisible:s.isAdministrator,nestedItems:[(0,c.createProjectsTabItem)(e),(0,d.createUsersTabItem)(e)]}))}},1013:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createGeneralSettingsMenuItem=t.mapStateToProps=void 0;var i=n(3),a=r(i),s=n(36),o=n(53),u=n(5),l=r(u),c=n(26),d=r(c),f=n(623),h=n(693),g=n(104),p=r(g),m=n(209),y=n(76),v=n(21),S=r(v),_=n(84),b=r(_),E=t.mapStateToProps=h.selector,A=function(e){return(0,s.bindActionCreatorsToSelf)(h.generalSettingsCommands,e)},w=(0,o.connect)(E,A)(f.GeneralSettings);t.createGeneralSettingsMenuItem=function(e){b.default.getMenu().addItem({id:"general",groupId:"systemSettings",text:a.default.formatMessage("General Settings"),isVisible:function(){return(0,y.isAdministrator)(e)},insert:function(t){var n=t.addDestroyable;return(0,S.default)(function(t){var r=e.getApplicationPath(),i=e.getGlobalSettingsService(),a=new m.GeneralSettingsService({applicationPath:r,globalSettingsService:i}),u=(0,s.createEnhancedStore)((0,h.createGeneralSettingsReducer)(),{middleware:[p.default.withExtraArgument({generalSettingsService:a})]}),c=document.createElement("div");d.default.render(l.default.createElement(o.Provider,{store:u},l.default.createElement(w)),c),u.dispatch(h.generalSettingsCommands.loadSettings()),n({destroy:function(){d.default.unmountComponentAtNode(c)}}),t(c)})}})}},1014:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createHelpDeskMenuItem=t.mapStateToProps=void 0;var i=n(3),a=r(i),s=n(36),o=n(53),u=n(5),l=r(u),c=n(26),d=r(c),f=n(851),h=n(1020),g=n(104),p=r(g),m=n(209),y=n(76),v=n(21),S=r(v),_=n(84),b=r(_),E=t.mapStateToProps=h.selector,A=function(e){return(0,s.bindActionCreatorsToSelf)(h.helpDeskCommands,e)},w=(0,o.connect)(E,A)(f.HelpDeskSettings);t.createHelpDeskMenuItem=function(e){b.default.getMenu().addItem({id:"helpDesk",groupId:"integration",text:a.default.formatMessage("Help Desk Portal"),style:{isDeprecated:!0},isVisible:function(){return(0,y.isAdministrator)(e)},insert:function(t){var n=t.addDestroyable;return(0,S.default)(function(t){var r=e.getApplicationPath(),i=e.getGlobalSettingsService(),a=new m.GeneralSettingsService({applicationPath:r,globalSettingsService:i}),u=(0,s.createEnhancedStore)((0,h.createHelpDeskReducer)(),{middleware:[p.default.withExtraArgument({generalSettingsService:a})]}),c=document.createElement("div");d.default.render(l.default.createElement(o.Provider,{store:u},l.default.createElement(w)),c),u.dispatch(h.helpDeskCommands.loadSettings()),n({destroy:function(){d.default.unmountComponentAtNode(c)}}),t(c)})}})}},1015:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createMetricsMenuItem=void 0;var i=n(3),a=r(i),s=n(21),o=r(s),u=n(76),l=n(84),c=r(l);n(355),t.createMetricsMenuItem=function(e){c.default.getMenu().addItem({id:"metrics",groupId:"process",text:a.default.formatMessage("Metrics"),style:{isBeta:!0},insert:function(t){var r=t.addDestroyable;return(0,o.default)(function(t){var i=n(521),a=n(669),s=a.MetricSetupService,o=n(668),u=n(270),l=n(356),c=n(355),d=c.MetricSetupCustomFieldsService,f=n(670),h=f.MetricSetupStatusService,g=i.create();r({destroy:function(){return g.fire("destroy")}}),g.on("afterRender",function(e,n){var r=n.element;return t(r[0])}),g.fire("initialize",{context:e,metricSetupService:new s(e),processService:new o(new u(e)),entityTypeService:new l,customFieldsService:new d(e),metricStatusService:new h(e.getApplicationPath())})})},isVisible:function(){return(0,u.isAdministrator)(e)}})}},1016:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createProcessesMenuItem=void 0;var i=n(1),a=(r(i),n(3)),s=r(a),o=n(76),u=(n(174),n(21)),l=r(u),c=n(84),d=r(c),f=n(317),h=r(f),g=d.default.getRouterFor("processes");t.createProcessesMenuItem=function(e){d.default.getMenu().addItem({id:"processes",groupId:"process",text:s.default.formatMessage("Processes"),insert:function(e){var t=e.addDestroyable;return(0,l.default)(function(e){var r=n(946).default,i={context:{configurator:h.default.get()},router:g},a=r.create(i);t({destroy:function(){a.fire("destroy"),d.default.getMenu().show()}}),a.on("afterRender",function(t,n){var r=n.element;return e(r[0])}),a.fire("initialize",i),a.fire("dataBind"),d.default.getMenu().hide()})},style:{showCaret:!0},isVisible:function(){return(0,o.isAdministrator)(e)||(0,o.isProcessAdministrator)(e)}})}},1017:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestTypesMenuItem=void 0;var i=n(1),a=(r(i),n(3)),s=r(a),o=n(76),u=n(21),l=r(u),c=n(84),d=r(c);t.createRequestTypesMenuItem=function(e){d.default.getMenu().addItem({id:"requestTypes",groupId:"process",text:s.default.formatMessage("Request Types"),isVisible:function(){return(0,o.isAdministrator)(e)},insert:function(e){var t=e.addDestroyable,r=n(1022),i=r.RequestTypeService,a=n(694),s=a.RequestTypesSetupModel,o=n(25),u=n(5),c=n(26),d=n(856),f=d.RequestTypeSetup,h=function(e,t){c.render(u.createElement(f,e),t)};return(0,l.default)(function(e){var n=document.createElement("div"),r=new i({applicationPath:o.getApplicationPath()}),a=new s({requestTypesService:r});a.init(),a.onNextState.add(function(e){return h(e,n)}),t({destroy:function(){c.unmountComponentAtNode(n),a.destroy()}}),h(a.getState(),n),e(n)})}})}},1018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createReducer=t.selector=t.ActionCreators=void 0;var r=n(543),i=n(208),a=(0,r.createDeletedItemsModel)({initialSortField:"projectId",sortFieldSelectors:{projectId:function(e){return e.id},projectName:function(e){return e.name},process:function(e){return e.process.name},program:function(e){return e.program?e.program.name:""},deleteDate:function(e){return e.deleteDate},lastEditor:function(e){return(0,i.formatUser)(e.lastEditor)}}}),s=a.ActionCreators,o=a.selector,u=a.createReducer;t.ActionCreators=s,t.selector=o,t.createReducer=u},1019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createReducer=t.selector=t.ActionCreators=void 0;var r=n(543),i=n(208),a=(0,r.createDeletedItemsModel)({initialSortField:"userId",sortFieldSelectors:{userId:function(e){return e.id},userName:function(e){return(0,i.formatUser)(e)},deleteDate:function(e){return e.deleteDate},role:function(e){return e.role.name},email:function(e){return e.email}}}),s=a.ActionCreators,o=a.selector,u=a.createReducer;t.ActionCreators=s,t.selector=o,t.createReducer=u},1020:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.helpDeskCommands=t.createHelpDeskReducer=t.selector=t.HelpDeskEvents=void 0;var i=n(28),a=r(i),s=n(1),o=r(s),u=n(36),l=n(135),c=r(l),d=t.HelpDeskEvents={LOADING_STARTED:"HelpDeskSettingsEvents/LoadingStarted",SETTINGS_LOADED:"HelpDeskSettingsEvents/SettingsLoaded",URL_CHANGED:"HelpDeskSettingsEvents/UrlChanged",NOTIFY_REQUESTER_CHANGED:"HelpDeskSettingsEvents/NotifyRequesterChanged",NOTIFY_AUTO_REQUESTER_CHANGED:"HelpDeskSettingsEvents/NotifyAutoCreatedRequesterChanged",SAVE_INDICATOR_CHANGED:"HelpDeskSettingsEvents/SaveIndicatorChanged"},f={helpDeskPortalPath:"",notifyRequester:null,notifyAutoCreatedRequester:null,isLoading:!0,saveIndicator:!1};t.selector=o.default.identity,t.createHelpDeskReducer=function(){var e;return(0,u.createSimpleReducer)(f,(e={},(0,a.default)(e,d.LOADING_STARTED,{isLoading:!0}),(0,a.default)(e,d.SETTINGS_LOADED,function(e){var t=e.helpDeskPortalPath,n=e.notifyRequester,r=e.notifyAutoCreatedRequester;return{helpDeskPortalPath:t,notifyRequester:n,notifyAutoCreatedRequester:r,isLoading:!1}}),(0,a.default)(e,d.URL_CHANGED,function(e){var t=e.helpDeskPortalPath;return{helpDeskPortalPath:t}}),(0,a.default)(e,d.NOTIFY_REQUESTER_CHANGED,function(e,t){var n=e.notifyRequester,r=t.notifyAutoCreatedRequester;return{notifyRequester:n,notifyAutoCreatedRequester:!!Boolean(n)&&r}}),(0,a.default)(e,d.NOTIFY_AUTO_REQUESTER_CHANGED,function(e){var t=e.notifyAutoCreatedRequester;return{notifyAutoCreatedRequester:t}}),(0,a.default)(e,d.SAVE_INDICATOR_CHANGED,function(e){var t=e.saveIndicator;return{saveIndicator:t}}),e))},t.helpDeskCommands={loadSettings:function(e){var t=this;return function(n){var r=n.dispatch,i=(n.getState,n.generalSettingsService);r({type:d.LOADING_STARTED}),i.getSettings().then(function(e){var t=e.helpDeskPortalPath,n=e.notifyRequester,i=e.notifyAutoCreatedRequester;t=t?t:"",r({type:d.SETTINGS_LOADED,payload:{helpDeskPortalPath:t,notifyRequester:n,notifyAutoCreatedRequester:i}})}),e&&r(t.showSaveIndicator())}},setHelpDeskPortalPath:function(e){return{type:d.URL_CHANGED,payload:{helpDeskPortalPath:e}}},setNotifyRequester:function(e){return{type:d.NOTIFY_REQUESTER_CHANGED,payload:{notifyRequester:e}}},setNotifyAutoCreatedRequester:function(e){return{type:d.NOTIFY_AUTO_REQUESTER_CHANGED,payload:{notifyAutoCreatedRequester:e}}},save:function(){var e=this;return function(t){var n=t.dispatch,r=t.getState,i=t.generalSettingsService,a=r(),s=a.isLoading,o=a.helpDeskPortalPath,u=a.notifyRequester,l=a.notifyAutoCreatedRequester;s||(null!==u&&(Boolean(u)||(l=!1)),i.saveSettings({helpDeskPortalPath:o,notifyRequester:u,notifyAutoCreatedRequester:l}).then(function(){return n(e.loadSettings(!0))}))}},showSaveIndicator:function(){return function(e){var t=e.dispatch;t({type:d.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:!0}}),(0,c.default)(500).then(function(){return t({type:d.SAVE_INDICATOR_CHANGED,payload:{saveIndicator:!1}})})}}}},1021:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(84),a=r(i),s=n(3),o=r(s),u=n(76),l=n(1015),c=n(1010),d=n(1016),f=n(1013),h=n(690),g=n(1014),p=n(1009),m=n(1017),y=n(1012),v=n(689),S=n(1011);t.default={mountSystemSettings:function(e){var t=e.getApplicationPath(),n=a.default.getMenu();(0,d.createProcessesMenuItem)(e),n.addItem({id:"customFields",text:o.default.formatMessage("Custom Fields"),url:t+"/Admin/CustomFieldsSetup.aspx?hideleftmenu=1",isVisible:u.isAdministrator,groupId:"process"}),(0,v.createRolesMenuItem)(e),n.addItem({id:"businessValues",text:o.default.formatMessage("Business Values"),url:t+"/Admin/CustomPriority.aspx?hideleftmenu=1",isVisible:u.isAdministrator,groupId:"process"}),(0,m.createRequestTypesMenuItem)(e),(0,h.createTagManagementMenuItem)(e),(0,c.createCustomRulesMenuItem)(e),(0,l.createMetricsMenuItem)(e),[{id:"import",text:o.default.formatMessage("Import"),url:t+"/Project/Admin/Import/CSV.aspx?hideleftmenu=1"},{id:"emailNotifications",text:o.default.formatMessage("Email Notifications"),url:t+"/Admin/EmailNotification.aspx?hideleftmenu=1",isVisible:function(){return(0,u.isAdministrator)(e)}}].forEach(function(e){e.groupId="integration",n.addItem(e)}),(0,p.createAuthenticationAndSecurityMenuItem)(e),(0,g.createHelpDeskMenuItem)(e),n.addItem({id:"companies",groupId:"integration",text:o.default.formatMessage("Companies"),url:t+"/Admin/Company/List.aspx?hideleftmenu=1",isVisible:function(){return(0,u.isAdministrator)(e)}}),n.addItem({id:"plugins",groupId:"integration",text:o.default.formatMessage("Plugins"),url:t+"/Admin/Plugins.aspx?hideleftmenu=1",isVisible:function(){return(0,u.isAdministrator)(e)},order:190}),(0,f.createGeneralSettingsMenuItem)(e),n.addItem({id:"license",text:o.default.formatMessage("License"),url:t+"/Admin/License.aspx?hideleftmenu=1",isVisible:function(){return(0,u.isAdministrator)(e)},groupId:"systemSettings"}),(0,y.createDiagnosticAndLogsMenuItem)(e),(0,S.createDeletedItemsMenuItem)(e)}}},1022:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTypeService=void 0;var i=n(6),a=r(i),s=n(7),o=r(s),u=n(671),l=n(163);t.RequestTypeService=function(){function e(t){var n=t.applicationPath;(0,a.default)(this,e),this._apiV1=new u.ErrorHandlingHttpClient(n+"/api/v1/requestTypes"),this._apiV2=new u.ErrorHandlingHttpClient(n+"/api/v2/requestTypes")}return(0,o.default)(e,[{key:"getAll",value:function(){var e="{id,name,icon,isPrivateByDefault,isVotingEnabled,requests:requests.count()}";return this._apiV2.executeRequest("?take=1000&orderby=id&select="+e,{type:l.httpTypes.GET}).then(function(e){var t=e.items;return t})}},{key:"deleteOne",value:function(e){var t=e.id;return this._apiV1.executeRequest("/"+t,{type:l.httpTypes.DELETE})}},{key:"save",value:function(e){var t=e.id?"/"+e.id:"/";return this._apiV1.executeRequest(t,{type:l.httpTypes.POST,data:e})}}]),e}()},1023:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createSecurityMenuItem=t.mapStateToProps=void 0;var i=n(3),a=r(i),s=n(36),o=n(53),u=n(5),l=r(u),c=n(26),d=r(c),f=n(624),h=n(695),g=n(104),p=r(g),m=n(209),y=n(76),v=t.mapStateToProps=h.selector,S=function(e){return(0,s.bindActionCreatorsToSelf)(h.securityTabCommands,e)},_=(0,o.connect)(v,S)(f.SecurityTab);t.createSecurityMenuItem=function(e){return{id:"security",text:a.default.formatMessage("Security"),isVisible:function(){
return(0,y.isAdministrator)(e)},insert:function(t){var n=t.placeholder,r=t.addDestroyable,i=e.getApplicationPath(),a=e.getGlobalSettingsService(),u=new m.GeneralSettingsService({applicationPath:i,globalSettingsService:a}),c=(0,s.createEnhancedStore)((0,h.createSecurityTabReducer)(),{middleware:[p.default.withExtraArgument({generalSettingsService:u})]});d.default.render(l.default.createElement(o.Provider,{store:c},l.default.createElement(_)),n),c.dispatch(h.securityTabCommands.loadSettings()),r({destroy:function(){d.default.unmountComponentAtNode(n)}})}}}},1024:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createSingleSignonMenuItem=void 0;var i=n(3),a=r(i),s=n(528),o=r(s),u=n(76);t.createSingleSignonMenuItem=function(e){return{id:"singleSignOn",text:a.default.formatMessage("Single Sign-On"),insert:function(t){var n=t.placeholder,r=t.addDestroyable,i=o.default.create();r({destroy:function(){return i.fire("destroy")}}),i.on("afterRender",function(e,t){var r=t.element;n.appendChild(r[0])}),i.fire("initialize",{context:{configurator:e}})},isVisible:function(){return(0,u.isAdministrator)(e)&&e.getFeaturesService().isEnabled("single.signon")}}}},1025:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createSystemUserMenuItem=t.mapStateToProps=void 0;var i=n(3),a=r(i),s=n(36),o=n(53),u=n(5),l=r(u),c=n(26),d=r(c),f=n(625),h=n(696),g=n(104),p=r(g),m=n(209),y=n(76),v=t.mapStateToProps=h.selector,S=function(e){return(0,s.bindActionCreatorsToSelf)(h.systemUserCommands,e)},_=(0,o.connect)(v,S)(f.SystemUser);t.createSystemUserMenuItem=function(e){return{id:"systemUser",text:a.default.formatMessage("System User"),isVisible:function(){return(0,y.isAdministrator)(e)},insert:function(t){var n=t.placeholder,r=t.addDestroyable,i=e.getApplicationPath(),a=e.getGlobalSettingsService(),u=new m.GeneralSettingsService({applicationPath:i,globalSettingsService:a}),c=(0,s.createEnhancedStore)((0,h.createSystemUserReducer)(),{middleware:[p.default.withExtraArgument({generalSettingsService:u})]});d.default.render(l.default.createElement(o.Provider,{store:c},l.default.createElement(_)),n),c.dispatch(h.systemUserCommands.loadSettings()),r({destroy:function(){d.default.unmountComponentAtNode(n)}})}}}},1026:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(163),l=n(57),c=function(){function e(t){var n=t.applicationPath,r=void 0===n?(0,l.throwArgNotProvided)("applicationPath"):n,i=t.apiClient;(0,a.default)(this,e),this._apiClient=i||new u.HttpClient(r+"/api/settings/v1/tags",(0,u.newPromiseAjaxService)($.ajax))}return(0,o.default)(e,[{key:"getTags",value:function(){return this._executeRequest({type:u.httpTypes.GET})}},{key:"createTags",value:function(e){var t=e.tags;return this._executeRequest({type:u.httpTypes.POST,data:{tags:t}})}},{key:"mergeTags",value:function(e){var t=e.tag,n=e.mergeTags;return this._executeRequest({type:u.httpTypes.POST,data:{tag:t,mergeTags:n}})}},{key:"deleteTags",value:function(e){var t=e.tags;return this._executeRequest({type:u.httpTypes.DELETE,data:{tags:t}})}},{key:"renameTag",value:function(e){var t=e.tag,n=e.newName;return this._executeRequest({type:u.httpTypes.PUT,data:{tag:t,newName:n}})}},{key:"_executeRequest",value:function(e){var t=e.type,n=e.data;return this._apiClient.executeRequest("",{type:t,data:n})}}]),e}();t.default=c},1033:function(e,t,n){var r,i;r=[],i=function(){var e=function(){var e=this.configurator.getLoggedUser().id,t=this.configurator.getBoardSettingsFactory().createComponentSettings({id:"user"});t.set({set:{generalTab:"accountSettings"},callback:function(){this.resolve({entity:{id:e,type:"user"},cssClass:"tau-app tau-page-single tau-page-entity i-role-bubble-holder",handlers:{onPageLoaded:function(){this.configurator.service("errorBar").fire("notification",{message:"We created a new TP user for you, but didn't have enough details. Please change “John Doe” to your real name."})}.bind(this)}})}.bind(this)})};return e}.apply(t,r),!(void 0!==i&&(e.exports=i))},1289:function(e,t,n){(function(e){function r(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=ur.charAt(n>>6)+ur.charAt(63&n);if(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=ur.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=ur.charAt(n>>2)+ur.charAt((3&n)<<4)),lr)for(;(3&r.length)>0;)r+=lr;return r}function i(e){var t,n,r,i="",a=0;for(t=0;t<e.length&&e.charAt(t)!=lr;++t)r=ur.indexOf(e.charAt(t)),r<0||(0==a?(i+=d(r>>2),n=3&r,a=1):1==a?(i+=d(n<<2|r>>4),n=15&r,a=2):2==a?(i+=d(n),i+=d(r>>2),n=3&r,a=3):(i+=d(n<<2|r>>4),i+=d(15&r),a=0));return 1==a&&(i+=d(n<<2)),i}function a(e){var t,n=i(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function s(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new s(null)}function u(e,t,n,r,i,a){for(;--a>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i}function l(e,t,n,r,i,a){for(var s=32767&t,o=t>>15;--a>=0;){var u=32767&this[e],l=this[e++]>>15,c=o*u+l*s;u=s*u+((32767&c)<<15)+n[r]+(1073741823&i),i=(u>>>30)+(c>>>15)+o*l+(i>>>30),n[r++]=1073741823&u}return i}function c(e,t,n,r,i,a){for(var s=16383&t,o=t>>14;--a>=0;){var u=16383&this[e],l=this[e++]>>14,c=o*u+l*s;u=s*u+((16383&c)<<14)+n[r]+i,i=(u>>28)+(c>>14)+o*l,n[r++]=268435455&u}return i}function d(e){return pr.charAt(e)}function f(e,t){var n=mr[e.charCodeAt(t)];return null==n?-1:n}function h(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function g(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function p(e){var t=o();return t.fromInt(e),t}function m(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,a=0;--r>=0;){var o=8==n?255&e[r]:f(e,r);o<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==a?this[this.t++]=o:a+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,a+=n,a>=this.DB&&(a-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&s.ZERO.subTo(this,this)}function y(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function v(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(n=this[s]>>o)>0&&(i=!0,a=d(n));s>=0;)o<t?(n=(this[s]&(1<<o)-1)<<t-o,n|=this[--s]>>(o+=this.DB-t)):(n=this[s]>>(o-=t)&r,o<=0&&(o+=this.DB,--s)),n>0&&(i=!0),i&&(a+=d(n));return i?a:"0"}function S(){var e=o();return s.ZERO.subTo(this,e),e}function _(){return this.s<0?this.negate():this}function b(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function E(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function A(){return this.t<=0?0:this.DB*(this.t-1)+E(this[this.t-1]^this.s&this.DM)}function w(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function x(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function P(e,t){var n,r=e%this.DB,i=this.DB-r,a=(1<<i)-1,s=Math.floor(e/this.DB),o=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|o,o=(this[n]&a)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function T(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&a)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}function F(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function C(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)}function R(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function I(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=o());var a=o(),u=this.s,l=e.s,c=this.DB-E(r[r.t-1]);c>0?(r.lShiftTo(c,a),i.lShiftTo(c,n)):(r.copyTo(a),i.copyTo(n));var d=a.t,f=a[d-1];if(0!=f){var h=f*(1<<this.F1)+(d>1?a[d-2]>>this.F2:0),g=this.FV/h,p=(1<<this.F1)/h,m=1<<this.F2,y=n.t,v=y-d,S=null==t?o():t;for(a.dlShiftTo(v,S),n.compareTo(S)>=0&&(n[n.t++]=1,n.subTo(S,n)),s.ONE.dlShiftTo(d,S),S.subTo(a,a);a.t<d;)a[a.t++]=0;for(;--v>=0;){var _=n[--y]==f?this.DM:Math.floor(n[y]*g+(n[y-1]+m)*p);if((n[y]+=a.am(0,_,n,v,0,d))<_)for(a.dlShiftTo(v,S),n.subTo(S,n);n[y]<--_;)n.subTo(S,n)}null!=t&&(n.drShiftTo(d,t),u!=l&&s.ZERO.subTo(t,t)),n.t=d,n.clamp(),c>0&&n.rShiftTo(c,n),u<0&&s.ZERO.subTo(n,n)}}}function D(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t}function O(e){this.m=e}function k(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function N(e){return e}function H(e){e.divRemTo(this.m,null,e)}function j(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function M(e,t){e.squareTo(t),this.reduce(t)}function B(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function L(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function V(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t}function q(e){var t=o();return e.copyTo(t),this.reduce(t),t}function U(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function K(e,t){e.squareTo(t),this.reduce(t)}function G(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function W(){return 0==(this.t>0?1&this[0]:this.s)}function z(e,t){if(e>4294967295||e<1)return s.ONE;var n=o(),r=o(),i=t.convert(this),a=E(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,i,n);else{var u=n;n=r,r=u}return t.revert(n)}function J(e,t){var n;return n=e<256||t.isEven()?new O(t):new L(t),this.exp(e,n)}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
	 */
function Y(){var e=o();return this.copyTo(e),e}function X(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function $(){return 0==this.t?this.s:this[0]<<24>>24}function Q(){return 0==this.t?this.s:this[0]<<16>>16}function Z(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ee(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function te(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=p(n),i=o(),a=o(),s="";for(this.divRemTo(r,i,a);i.signum()>0;)s=(n+a.intValue()).toString(e).substr(1)+s,i.divRemTo(r,i,a);return a.intValue().toString(e)+s}function ne(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,a=0,o=0,u=0;u<e.length;++u){var l=f(e,u);l<0?"-"==e.charAt(u)&&0==this.signum()&&(i=!0):(o=t*o+l,++a>=n&&(this.dMultiply(r),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&s.ZERO.subTo(this,this)}function re(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(s.ONE.shiftLeft(e-1),de,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(s.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function ie(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function ae(e){return 0==this.compareTo(e)}function se(e){return this.compareTo(e)<0?this:e}function oe(e){return this.compareTo(e)>0?this:e}function ue(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function le(e,t){return e&t}function ce(e){var t=o();return this.bitwiseTo(e,le,t),t}function de(e,t){return e|t}function fe(e){var t=o();return this.bitwiseTo(e,de,t),t}function he(e,t){return e^t}function ge(e){var t=o();return this.bitwiseTo(e,he,t),t}function pe(e,t){return e&~t}function me(e){var t=o();return this.bitwiseTo(e,pe,t),t}function ye(){for(var e=o(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function ve(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Se(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function _e(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function be(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+_e(this[e]);return this.s<0?this.t*this.DB:-1}function Ee(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Ae(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=Ee(this[n]^t);return e}function we(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function xe(e,t){var n=s.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function Pe(e){return this.changeBit(e,de)}function Te(e){return this.changeBit(e,pe)}function Fe(e){return this.changeBit(e,he)}function Ce(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()}function Re(e){var t=o();return this.addTo(e,t),t}function Ie(e){var t=o();return this.subTo(e,t),t}function De(e){var t=o();return this.multiplyTo(e,t),t}function Oe(){var e=o();return this.squareTo(e),e}function ke(e){var t=o();return this.divRemTo(e,t,null),t}function Ne(e){var t=o();return this.divRemTo(e,null,t),t}function He(e){var t=o(),n=o();return this.divRemTo(e,t,n),new Array(t,n)}function je(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Me(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Be(){}function Le(e){return e}function Ve(e,t,n){e.multiplyTo(t,n)}function qe(e,t){e.squareTo(t)}function Ue(e){return this.exp(e,new Be)}function Ke(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()}function Ge(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function We(e){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function ze(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t}function Je(e){return e}function Ye(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Xe(e,t){e.squareTo(t),this.reduce(t)}function $e(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Qe(e,t){var n,r,i=e.bitLength(),a=p(1);if(i<=0)return a;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new O(t):t.isEven()?new We(t):new L(t);var s=new Array,u=3,l=n-1,c=(1<<n)-1;if(s[1]=r.convert(this),n>1){var d=o();for(r.sqrTo(s[1],d);u<=c;)s[u]=o(),r.mulTo(d,s[u-2],s[u]),u+=2}var f,h,g=e.t-1,m=!0,y=o();for(i=E(e[g])-1;g>=0;){for(i>=l?f=e[g]>>i-l&c:(f=(e[g]&(1<<i+1)-1)<<l-i,g>0&&(f|=e[g-1]>>this.DB+i-l)),u=n;0==(1&f);)f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--g),m)s[f].copyTo(a),m=!1;else{for(;u>1;)r.sqrTo(a,y),r.sqrTo(y,a),u-=2;u>0?r.sqrTo(a,y):(h=a,a=y,y=h),r.mulTo(y,s[f],a)}for(;g>=0&&0==(e[g]&1<<i);)r.sqrTo(a,y),h=a,a=y,y=h,--i<0&&(i=this.DB-1,--g)}return r.revert(a)}function Ze(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n}function et(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n}function tt(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return s.ZERO;for(var n=e.clone(),r=this.clone(),i=p(1),a=p(0),o=p(0),u=p(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&u.isEven()||(o.addTo(this,o),u.subTo(e,u)),o.rShiftTo(1,o)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(o,i),a.subTo(u,a)):(r.subTo(n,r),t&&o.subTo(i,o),u.subTo(a,u))}return 0!=r.compareTo(s.ONE)?s.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u}function nt(e){var t,n=this.abs();if(1==n.t&&n[0]<=yr[yr.length-1]){for(t=0;t<yr.length;++t)if(n[0]==yr[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<yr.length;){for(var r=yr[t],i=t+1;i<yr.length&&r<vr;)r*=yr[i++];for(r=n.modInt(r);t<i;)if(r%yr[t++]==0)return!1}return n.millerRabin(e)}function rt(e){var t=this.subtract(s.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);e=e+1>>1,e>yr.length&&(e=yr.length);for(var i=o(),a=0;a<e;++a){i.fromInt(yr[Math.floor(Math.random()*yr.length)]);var u=i.modPow(r,this);if(0!=u.compareTo(s.ONE)&&0!=u.compareTo(t)){for(var l=1;l++<n&&0!=u.compareTo(t);)if(u=u.modPowInt(2,this),0==u.compareTo(s.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
	 */
function it(){this.i=0,this.j=0,this.S=new Array}function at(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function st(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function ot(){return new it}function ut(e){_r[br++]^=255&e,_r[br++]^=e>>8&255,_r[br++]^=e>>16&255,_r[br++]^=e>>24&255,br>=Er&&(br-=Er)}function lt(){ut((new Date).getTime())}function ct(){if(null==Sr){for(lt(),Sr=ot(),Sr.init(_r),br=0;br<_r.length;++br)_r[br]=0;br=0}return Sr.next()}function dt(e){var t;for(t=0;t<e.length;++t)e[t]=ct()}function ft(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
	 */
function ht(e,t){return new s(e,t)}function gt(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var a=new ft,o=new Array;t>2;){for(o[0]=0;0==o[0];)a.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new s(n)}function pt(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function mt(e,t,n){if(e.length+2*Pr+2>t)throw"Message too long for RSA";var r,i="";for(r=0;r<t-e.length-2*Pr-2;r+=1)i+="\0";var a=rstr_sha1("")+i+""+e,o=new Array(Pr);(new ft).nextBytes(o);var u=pt(o,a.length,n||rstr_sha1),l=[];for(r=0;r<a.length;r+=1)l[r]=a.charCodeAt(r)^u.charCodeAt(r);var c=pt(l,o.length,rstr_sha1),d=[0];for(r=0;r<o.length;r+=1)d[r+1]=o[r]^c.charCodeAt(r);return new s(d.concat(l))}function yt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function vt(e,t){this.isPublic=!0,"string"!=typeof e?(this.n=e,this.e=t):null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=ht(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function St(e){return e.modPowInt(this.e,this.n)}function _t(e){var t=gt(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r}function bt(e,t){var n=mt(e,this.n.bitLength()+7>>3,t);if(null==n)return null;var r=this.doPublic(n);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
	 */
function Et(e,t){for(var n=e.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var a=255&n[r];a<128?i+=String.fromCharCode(a):a>191&&a<224?(i+=String.fromCharCode((31&a)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&a)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}function At(e,t,n){for(var r="",i=0;r.length<t;)r+=n(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function wt(e,t,n){e=e.toByteArray();var r;for(r=0;r<e.length;r+=1)e[r]&=255;for(;e.length<t;)e.unshift(0);if(e=String.fromCharCode.apply(String,e),e.length<2*Pr+2)throw"Cipher too short";var r,i=e.substr(1,Pr),a=e.substr(Pr+1),s=At(a,Pr,n||rstr_sha1),o=[];for(r=0;r<i.length;r+=1)o[r]=i.charCodeAt(r)^s.charCodeAt(r);var u=At(String.fromCharCode.apply(String,o),e.length-Pr,rstr_sha1),l=[];for(r=0;r<a.length;r+=1)l[r]=a.charCodeAt(r)^u.charCodeAt(r);if(l=String.fromCharCode.apply(String,l),l.substr(0,Pr)!==rstr_sha1(""))throw"Hash mismatch";l=l.substr(Pr);var c=l.indexOf(""),d=c!=-1?l.substr(0,c).lastIndexOf("\0"):-1;if(d+1!=c)throw"Malformed data";return l.substr(c+1)}function xt(e,t,n){this.isPrivate=!0,"string"!=typeof e?(this.n=e,this.e=t,this.d=n):null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=ht(e,16),this.e=parseInt(t,16),this.d=ht(n,16)):alert("Invalid RSA private key")}function Pt(e,t,n,r,i,a,s,o){if(this.isPrivate=!0,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=ht(e,16),this.e=parseInt(t,16),this.d=ht(n,16),this.p=ht(r,16),this.q=ht(i,16),this.dmp1=ht(a,16),this.dmq1=ht(s,16),this.coeff=ht(o,16)):alert("Invalid RSA private key in RSASetPrivateEx")}function Tt(e,t){var n=new ft,r=e>>1;this.e=parseInt(t,16);for(var i=new s(t,16);;){for(;this.p=new s(e-r,1,n),0!=this.p.subtract(s.ONE).gcd(i).compareTo(s.ONE)||!this.p.isProbablePrime(10););for(;this.q=new s(r,1,n),0!=this.q.subtract(s.ONE).gcd(i).compareTo(s.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var o=this.p.subtract(s.ONE),u=this.q.subtract(s.ONE),l=o.multiply(u);if(0==l.gcd(i).compareTo(s.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(l),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(u),this.coeff=this.q.modInverse(this.p);break}}}function Ft(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)}function Ct(e){var t=ht(e,16),n=this.doPrivate(t);return null==n?null:Et(n,this.n.bitLength()+7>>3)}function Rt(e,t){var n=ht(e,16),r=this.doPrivate(n);return null==r?null:wt(r,this.n.bitLength()+7>>3,t)}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
	 */
function It(e,t){this.x=t,this.q=e}function Dt(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)}function Ot(){return this.x}function kt(){return new It(this.q,this.x.negate().mod(this.q))}function Nt(e){return new It(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function Ht(e){return new It(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function jt(e){return new It(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function Mt(){return new It(this.q,this.x.square().mod(this.q))}function Bt(e){return new It(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}function Lt(e,t,n,r){this.curve=e,this.x=t,this.y=n,null==r?this.z=s.ONE:this.z=r,this.zinv=null}function Vt(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function qt(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function Ut(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,n;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),!!t.equals(s.ZERO)&&(n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),n.equals(s.ZERO))}function Kt(){return null==this.x&&null==this.y||this.z.equals(s.ZERO)&&!this.y.toBigInteger().equals(s.ZERO)}function Gt(){return new Lt(this.curve,this.x,this.y.negate(),this.z)}function Wt(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(s.ZERO.equals(n))return s.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new s("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),u=o.multiply(n),l=i.multiply(o),c=t.square().multiply(this.z),d=c.subtract(l.shiftLeft(1)).multiply(e.z).subtract(u).multiply(n).mod(this.curve.q),f=l.multiply(r).multiply(t).subtract(a.multiply(u)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(u)).mod(this.curve.q),h=u.multiply(this.z).multiply(e.z).mod(this.curve.q);return new Lt(this.curve,this.curve.fromBigInteger(d),this.curve.fromBigInteger(f),h)}function zt(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new s("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),a=this.curve.a.toBigInteger(),o=t.square().multiply(e);s.ZERO.equals(a)||(o=o.add(this.z.square().multiply(a))),o=o.mod(this.curve.q);var u=o.square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),l=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new Lt(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(l),c)}function Jt(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new s("3")),i=this.negate(),a=this;for(t=r.bitLength()-2;t>0;--t){a=a.twice();var o=r.testBit(t),u=n.testBit(t);o!=u&&(a=a.add(o?this:i))}return a}function Yt(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(a):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i}function Xt(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new Lt(this,null,null)}function $t(){return this.q}function Qt(){return this.a}function Zt(){return this.b}function en(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function tn(){return this.infinity}function nn(e){return new It(this.q,e)}function rn(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new Lt(this,this.fromBigInteger(new s(n,16)),this.fromBigInteger(new s(r,16)));default:return null}}function an(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function sn(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function on(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function un(e){return on(an(e))}function ln(e){return r(un(e))}function cn(e){return fn(r(un(e)))}function dn(e){return sn(a(hn(e)))}function fn(e){return e=e.replace(/\=/g,""),e=e.replace(/\+/g,"-"),e=e.replace(/\//g,"_")}function hn(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/")}function gn(e){return e.length%2==1&&(e="0"+e),fn(r(e))}function pn(e){return i(hn(e))}function mn(e){return r(An(xn(e)))}function yn(e){return decodeURIComponent(wn(i(e)))}function vn(e){return An(xn(e))}function Sn(e){return decodeURIComponent(wn(e))}function _n(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function bn(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function En(e){return r(e)}function An(e){return e.replace(/%/g,"")}function wn(e){return e.replace(/(..)/g,"%$1")}function xn(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+un(t[r]);return n}function Pn(e){return e=e.replace(/\r\n/gm,"\n")}function Tn(e){return e=e.replace(/\r\n/gm,"\n"),e=e.replace(/\n/gm,"\r\n")}function Fn(e){e=e.replace(/^\s*\[\s*/,""),e=e.replace(/\s*\]\s*$/,""),e=e.replace(/\s*/g,"");try{var t=e.split(/,/).map(function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";var i=("00"+r.toString(16)).slice(-2);return i}).join("");return t}catch(e){throw"malformed integer array string: "+e}}/*! rsapem-1.1.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
function Cn(e){var t=e;return t=t.replace("-----BEGIN RSA PRIVATE KEY-----",""),t=t.replace("-----END RSA PRIVATE KEY-----",""),t=t.replace(/[ \n]+/g,"")}function Rn(e){var t=new Array,n=Fr.getStartPosOfV_AtObj(e,0),r=Fr.getPosOfNextSibling_AtObj(e,n),i=Fr.getPosOfNextSibling_AtObj(e,r),a=Fr.getPosOfNextSibling_AtObj(e,i),s=Fr.getPosOfNextSibling_AtObj(e,a),o=Fr.getPosOfNextSibling_AtObj(e,s),u=Fr.getPosOfNextSibling_AtObj(e,o),l=Fr.getPosOfNextSibling_AtObj(e,u),c=Fr.getPosOfNextSibling_AtObj(e,l);return t.push(n,r,i,a,s,o,u,l,c),t}function In(e){var t=Rn(e),n=Fr.getHexOfV_AtObj(e,t[0]),r=Fr.getHexOfV_AtObj(e,t[1]),i=Fr.getHexOfV_AtObj(e,t[2]),a=Fr.getHexOfV_AtObj(e,t[3]),s=Fr.getHexOfV_AtObj(e,t[4]),o=Fr.getHexOfV_AtObj(e,t[5]),u=Fr.getHexOfV_AtObj(e,t[6]),l=Fr.getHexOfV_AtObj(e,t[7]),c=Fr.getHexOfV_AtObj(e,t[8]),d=new Array;return d.push(n,r,i,a,s,o,u,l,c),d}function Dn(e){var t=In(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function On(e){var t=Cn(e),n=i(t),r=In(n);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function kn(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e}function Nn(e,t){var n=function(e){return Cr.crypto.Util.hashString(e,t)},r=n(e);return this.signWithMessageHash(r,t)}function Hn(e,t){var n=Cr.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),r=ht(n,16),i=this.doPrivate(r),a=i.toString(16);return kn(a,this.n.bitLength())}function jn(e){return Nn.call(this,e,"sha1")}function Mn(e){return Nn.call(this,e,"sha256")}function Bn(e,t,n){for(var r="",i=0;r.length<t;)r+=_n(n(bn(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function Ln(e,t,n){var r=function(e){return Cr.crypto.Util.hashHex(e,t)},i=r(bn(e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,t,n)}function Vn(e,t,n){var r,i=_n(e),a=i.length,o=this.n.bitLength()-1,u=Math.ceil(o/8),l=function(e){return Cr.crypto.Util.hashHex(e,t)};if(n===-1||void 0===n)n=a;else if(n===-2)n=u-a-2;else if(n<-2)throw"invalid salt length";if(u<a+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new ft).nextBytes(c),c=String.fromCharCode.apply(String,c));var d=_n(l(bn("\0\0\0\0\0\0\0\0"+i+c))),f=[];for(r=0;r<u-n-a-2;r+=1)f[r]=0;var h=String.fromCharCode.apply(String,f)+""+c,g=Bn(d,h.length,l),p=[];for(r=0;r<h.length;r+=1)p[r]=h.charCodeAt(r)^g.charCodeAt(r);var m=65280>>8*u-o&255;for(p[0]&=~m,r=0;r<a;r++)p.push(d.charCodeAt(r));return p.push(188),kn(this.doPrivate(new s(p)).toString(16),this.n.bitLength())}function qn(e,t,n){var r=new yt;r.setPublic(t,n);var i=r.doPublic(e);return i}function Un(e,t,n){var r=qn(e,t,n),i=r.toString(16).replace(/^1f+00/,"");return i}function Kn(e){for(var t in Cr.crypto.Util.DIGESTINFOHEAD){var n=Cr.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n){var i=[t,e.substring(r)];return i}}return[]}function Gn(e,t,n,r){var i=Un(t,n,r),a=Kn(i);if(0==a.length)return!1;var s=a[0],o=a[1],u=function(e){return Cr.crypto.Util.hashString(e,s)},l=u(e);return o==l}function Wn(e,t){var n=ht(e,16),r=Gn(t,n,this.n.toString(16),this.e.toString(16));return r}function zn(e,t){t=t.replace(Nr,""),t=t.replace(/[ \n]+/g,"");var n=ht(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=this.doPublic(n),i=r.toString(16).replace(/^1f+00/,""),a=Kn(i);if(0==a.length)return!1;var s=a[0],o=a[1],u=function(e){return Cr.crypto.Util.hashString(e,s)},l=u(e);return o==l}function Jn(e,t){t=t.replace(Nr,""),t=t.replace(/[ \n]+/g,"");var n=ht(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=this.doPublic(n),i=r.toString(16).replace(/^1f+00/,""),a=Kn(i);if(0==a.length)return!1;var s=(a[0],a[1]);return s==e}function Yn(e,t,n,r){var i=function(e){return Cr.crypto.Util.hashHex(e,n)},a=i(bn(e));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(a,t,n,r)}function Xn(e,t,n,r){var i=new s(t,16);if(i.bitLength()>this.n.bitLength())return!1;var a,o=function(e){return Cr.crypto.Util.hashHex(e,n)},u=_n(e),l=u.length,c=this.n.bitLength()-1,d=Math.ceil(c/8);if(r===-1||void 0===r)r=l;else if(r===-2)r=d-l-2;else if(r<-2)throw"invalid salt length";if(d<l+r+2)throw"data too long";var f=this.doPublic(i).toByteArray();for(a=0;a<f.length;a+=1)f[a]&=255;for(;f.length<d;)f.unshift(0);if(188!==f[d-1])throw"encoded message does not end in 0xbc";f=String.fromCharCode.apply(String,f);var h=f.substr(0,d-l-1),g=f.substr(h.length,l),p=65280>>8*d-c&255;if(0!==(h.charCodeAt(0)&p))throw"bits beyond keysize not zero";var m=Bn(g,h.length,o),y=[];for(a=0;a<h.length;a+=1)y[a]=h.charCodeAt(a)^m.charCodeAt(a);y[0]&=~p;var v=d-l-r-2;for(a=0;a<v;a+=1)if(0!==y[a])throw"leftmost octets not zero";if(1!==y[v])throw"0x01 marker not found";return g===_n(o(bn("\0\0\0\0\0\0\0\0"+u+String.fromCharCode.apply(String,y.slice(-r)))))}/*! x509-1.1.9.js (c) 2012-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
function $n(){this.subjectPublicKeyRSA=null,this.subjectPublicKeyRSA_hN=null,this.subjectPublicKeyRSA_hE=null,this.hex=null,this.getSerialNumberHex=function(){return Fr.getDecendantHexVByNthList(this.hex,0,[0,1])},this.getSignatureAlgorithmField=function(){var e=Fr.getDecendantHexVByNthList(this.hex,0,[0,2,0]),t=Cr.asn1.ASN1Util.oidHexToInt(e),n=Cr.asn1.x509.OID.oid2name(t);return n},this.getIssuerHex=function(){return Fr.getDecendantHexTLVByNthList(this.hex,0,[0,3])},this.getIssuerString=function(){return $n.hex2dn(Fr.getDecendantHexTLVByNthList(this.hex,0,[0,3]))},this.getSubjectHex=function(){return Fr.getDecendantHexTLVByNthList(this.hex,0,[0,5])},this.getSubjectString=function(){return $n.hex2dn(Fr.getDecendantHexTLVByNthList(this.hex,0,[0,5]))},this.getNotBefore=function(){var e=Fr.getDecendantHexVByNthList(this.hex,0,[0,4,0]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.getNotAfter=function(){var e=Fr.getDecendantHexVByNthList(this.hex,0,[0,4,1]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.readCertPEM=function(e){var t=$n.pemToHex(e),n=$n.getPublicKeyHexArrayFromCertHex(t),r=new yt;r.setPublic(n[0],n[1]),this.subjectPublicKeyRSA=r,this.subjectPublicKeyRSA_hN=n[0],this.subjectPublicKeyRSA_hE=n[1],this.hex=t},this.readCertPEMWithoutRSAInit=function(e){var t=$n.pemToHex(e),n=$n.getPublicKeyHexArrayFromCertHex(t);this.subjectPublicKeyRSA.setPublic(n[0],n[1]),this.subjectPublicKeyRSA_hN=n[0],this.subjectPublicKeyRSA_hE=n[1],this.hex=t},this.getInfo=function(){var e="Basic Fields\n";e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n";var t=$n.getSubjectPublicKeyInfoPosFromCertHex(this.hex),n=Fr.getHexOfTLV_AtObj(this.hex,t),r=kr.getKey(n,null,"pkcs8pub");r instanceof yt&&(e+="    key algorithm: RSA\n",e+="    n="+r.n.toString(16).substr(0,16)+"...\n",e+="    e="+r.e.toString(16)+"\n"),e+="X509v3 Extensions:\n";for(var i=$n.getV3ExtInfoListOfCertHex(this.hex),a=0;a<i.length;a++){var s=i[a],o=Cr.asn1.x509.OID.oid2name(s.oid);""===o&&(o=s.oid);var u="";if(s.critical===!0&&(u="CRITICAL"),e+="  "+o+" "+u+":\n","basicConstraints"===o){var l=$n.getExtBasicConstraints(this.hex);void 0===l.cA?e+="    {}\n":(e+="    cA=true",void 0!==l.pathLen&&(e+=", pathLen="+l.pathLen),e+="\n")}else if("keyUsage"===o)e+="    "+$n.getExtKeyUsageString(this.hex)+"\n";else if("subjectKeyIdentifier"===o)e+="    "+$n.getExtSubjectKeyIdentifier(this.hex)+"\n";else if("authorityKeyIdentifier"===o){var c=$n.getExtAuthorityKeyIdentifier(this.hex);void 0!==c.kid&&(e+="    kid="+c.kid+"\n")}else if("extKeyUsage"===o){var d=$n.getExtExtKeyUsageName(this.hex);e+="    "+d.join(", ")+"\n"}else if("subjectAltName"===o){var f=$n.getExtSubjectAltName(this.hex);e+="    "+f.join(", ")+"\n"}else if("cRLDistributionPoints"===o){var h=$n.getExtCRLDistributionPointsURI(this.hex);e+="    "+h+"\n"}else if("authorityInfoAccess"===o){var g=$n.getExtAIAInfo(this.hex);void 0!==g.ocsp&&(e+="    ocsp: "+g.ocsp.join(",")+"\n"),void 0!==g.caissuer&&(e+="    caissuer: "+g.caissuer.join(",")+"\n")}}return e+="signature algorithm: "+$n.getSignatureAlgorithmName(this.hex)+"\n",e+="signature: "+$n.getSignatureValueHex(this.hex).substr(0,16)+"...\n"}}/*! nodeutil-1.0.0 (c) 2015 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
function Qn(e){return n(509).readFileSync(e,"utf8")}function Zn(e){var t=n(1289),r=n(509);return t.rstrtohex(r.readFileSync(e,"binary"))}function er(e){var t=n(509);return t.readFileSync(e,"binary")}function tr(e,t){var r=n(509);r.writeFileSync(e,t,"binary")}function nr(e,t){var r=n(509),i=n(1289),a=i.hextorstr(t);r.writeFileSync(e,a,"binary")}var rr={};rr.userAgent=!1;var ir={};if("undefined"==typeof ar||!ar)var ar={};ar.namespace=function(){var e,t,n,r=arguments,i=null;for(e=0;e<r.length;e+=1)for(n=(""+r[e]).split("."),i=ar,t="YAHOO"==n[0]?1:0;t<n.length;t+=1)i[n[t]]=i[n[t]]||{},i=i[n[t]];return i},ar.log=function(e,t,n){var r=ar.widget.Logger;return!(!r||!r.log)&&r.log(e,t,n)},ar.register=function(e,t,n){var r,i,a,s,o,u=ar.env.modules;for(u[e]||(u[e]={versions:[],builds:[]}),r=u[e],i=n.version,a=n.build,s=ar.env.listeners,r.name=e,r.version=i,r.build=a,r.versions.push(i),r.builds.push(a),r.mainClass=t,o=0;o<s.length;o+=1)s[o](r);t?(t.VERSION=i,t.BUILD=a):ar.log("mainClass is undefined for module "+e,"warn")},ar.env=ar.env||{modules:[],listeners:[]},ar.env.getVersion=function(e){return ar.env.modules[e]||null},ar.env.parseUA=function(e){var t,n=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":"."}))},r=rr,i={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:r&&r.cajaVersion,secure:!1,os:null},a=e||rr&&rr.userAgent,s=ir&&ir.location,o=s&&s.href;return i.secure=o&&0===o.toLowerCase().indexOf("https"),a&&(/windows|win32/i.test(a)?i.os="windows":/macintosh/i.test(a)?i.os="macintosh":/rhino/i.test(a)&&(i.os="rhino"),/KHTML/.test(a)&&(i.webkit=1),t=a.match(/AppleWebKit\/([^\s]*)/),t&&t[1]&&(i.webkit=n(t[1]),/ Mobile\//.test(a)?(i.mobile="Apple",t=a.match(/OS ([^\s]*)/),t&&t[1]&&(t=n(t[1].replace("_","."))),i.ios=t,i.ipad=i.ipod=i.iphone=0,t=a.match(/iPad|iPod|iPhone/),t&&t[0]&&(i[t[0].toLowerCase()]=i.ios)):(t=a.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),t&&(i.mobile=t[0]),/webOS/.test(a)&&(i.mobile="WebOS",t=a.match(/webOS\/([^\s]*);/),t&&t[1]&&(i.webos=n(t[1]))),/ Android/.test(a)&&(i.mobile="Android",t=a.match(/Android ([^\s]*);/),t&&t[1]&&(i.android=n(t[1])))),t=a.match(/Chrome\/([^\s]*)/),t&&t[1]?i.chrome=n(t[1]):(t=a.match(/AdobeAIR\/([^\s]*)/),t&&(i.air=t[0]))),i.webkit||(t=a.match(/Opera[\s\/]([^\s]*)/),t&&t[1]?(i.opera=n(t[1]),t=a.match(/Version\/([^\s]*)/),t&&t[1]&&(i.opera=n(t[1])),t=a.match(/Opera Mini[^;]*/),t&&(i.mobile=t[0])):(t=a.match(/MSIE\s([^;]*)/),t&&t[1]?i.ie=n(t[1]):(t=a.match(/Gecko\/([^\s]*)/),t&&(i.gecko=1,t=a.match(/rv:([^\s\)]*)/),t&&t[1]&&(i.gecko=n(t[1]))))))),i},ar.env.ua=ar.env.parseUA(),function(){if(ar.namespace("util","widget","example"),"undefined"!=typeof YAHOO_config){var e,t=YAHOO_config.listener,n=ar.env.listeners,r=!0;if(t){for(e=0;e<n.length;e++)if(n[e]==t){r=!1;break}r&&n.push(t)}}}(),ar.lang=ar.lang||{},function(){var e=ar.lang,t=Object.prototype,n="[object Array]",r="[object Function]",i="[object Object]",a=[],s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},o=["toString","valueOf"],u={isArray:function(e){return t.toString.apply(e)===n},isBoolean:function(e){return"boolean"==typeof e},isFunction:function(e){return"function"==typeof e||t.toString.apply(e)===r},isNull:function(e){return null===e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isObject:function(t){return t&&("object"==typeof t||e.isFunction(t))||!1},isString:function(e){return"string"==typeof e},isUndefined:function(e){return"undefined"==typeof e},_IEEnumFix:ar.env.ua.ie?function(n,r){var i,a,s;for(i=0;i<o.length;i+=1)a=o[i],s=r[a],e.isFunction(s)&&s!=t[a]&&(n[a]=s)}:function(){},escapeHTML:function(e){return e.replace(/[&<>"'\/`]/g,function(e){return s[e]})},extend:function(n,r,i){if(!r||!n)throw new Error("extend failed, please check that all dependencies are included.");var a,s=function(){};if(s.prototype=r.prototype,n.prototype=new s,n.prototype.constructor=n,n.superclass=r.prototype,r.prototype.constructor==t.constructor&&(r.prototype.constructor=r),i){for(a in i)e.hasOwnProperty(i,a)&&(n.prototype[a]=i[a]);e._IEEnumFix(n.prototype,i)}},augmentObject:function(t,n){if(!n||!t)throw new Error("Absorb failed, verify dependencies.");var r,i,a=arguments,s=a[2];if(s&&s!==!0)for(r=2;r<a.length;r+=1)t[a[r]]=n[a[r]];else{for(i in n)!s&&i in t||(t[i]=n[i]);e._IEEnumFix(t,n)}return t},augmentProto:function(t,n){if(!n||!t)throw new Error("Augment failed, verify dependencies.");var r,i=[t.prototype,n.prototype];for(r=2;r<arguments.length;r+=1)i.push(arguments[r]);return e.augmentObject.apply(this,i),t},dump:function(t,n){var r,i,a=[],s="{...}",o="f(){...}",u=", ",l=" => ";if(!e.isObject(t))return t+"";if(t instanceof Date||"nodeType"in t&&"tagName"in t)return t;if(e.isFunction(t))return o;if(n=e.isNumber(n)?n:3,e.isArray(t)){for(a.push("["),r=0,i=t.length;r<i;r+=1)e.isObject(t[r])?a.push(n>0?e.dump(t[r],n-1):s):a.push(t[r]),a.push(u);a.length>1&&a.pop(),a.push("]")}else{a.push("{");for(r in t)e.hasOwnProperty(t,r)&&(a.push(r+l),e.isObject(t[r])?a.push(n>0?e.dump(t[r],n-1):s):a.push(t[r]),a.push(u));a.length>1&&a.pop(),a.push("}")}return a.join("")},substitute:function(t,n,r,a){for(var s,o,u,l,c,d,f,h,g,p=[],m=t.length,y="dump",v=" ",S="{",_="}";(s=t.lastIndexOf(S,m),!(s<0))&&(o=t.indexOf(_,s),!(s+1>o));)f=t.substring(s+1,o),l=f,d=null,u=l.indexOf(v),u>-1&&(d=l.substring(u+1),l=l.substring(0,u)),c=n[l],r&&(c=r(l,c,d)),e.isObject(c)?e.isArray(c)?c=e.dump(c,parseInt(d,10)):(d=d||"",h=d.indexOf(y),h>-1&&(d=d.substring(4)),g=c.toString(),c=g===i||h>-1?e.dump(c,parseInt(d,10)):g):e.isString(c)||e.isNumber(c)||(c="~-"+p.length+"-~",p[p.length]=f),t=t.substring(0,s)+c+t.substring(o+1),a===!1&&(m=s-1);for(s=p.length-1;s>=0;s-=1)t=t.replace(new RegExp("~-"+s+"-~"),"{"+p[s]+"}","g");return t},trim:function(e){try{return e.replace(/^\s+|\s+$/g,"")}catch(t){return e}},merge:function(){var t,n={},r=arguments,i=r.length;for(t=0;t<i;t+=1)e.augmentObject(n,r[t],!0);return n},later:function(t,n,r,i,s){t=t||0,n=n||{};var o,u,l=r,c=i;if(e.isString(r)&&(l=n[r]),!l)throw new TypeError("method undefined");return e.isUndefined(i)||e.isArray(c)||(c=[i]),o=function(){l.apply(n,c||a)},u=s?setInterval(o,t):setTimeout(o,t),{interval:s,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},isValue:function(t){return e.isObject(t)||e.isString(t)||e.isNumber(t)||e.isBoolean(t)}};e.hasOwnProperty=t.hasOwnProperty?function(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}:function(t,n){return!e.isUndefined(t[n])&&t.constructor.prototype[n]!==t[n]},u.augmentObject(e,u,!0),ar.util.Lang=e,e.augment=e.augmentProto,ar.augment=e.augmentProto,ar.extend=e.extend}(),ar.register("yahoo",ar,{version:"2.9.0",build:"2800"});/*! CryptoJS v3.1.2 core-fix.js
	 * code.google.com/p/crypto-js
	 * (c) 2009-2013 by Jeff Mott. All rights reserved.
	 * code.google.com/p/crypto-js/wiki/License
	 * THIS IS FIX of 'core.js' to fix Hmac issue.
	 * https://code.google.com/p/crypto-js/issues/detail?id=84
	 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
	 */
var sr=sr||function(e,t){var n={},r=n.lib={},i=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=4*e.length},toString:function(e){return(e||o).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++){var s=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=s<<24-(r+a)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},o=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},c=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,o=4*s,u=i/o;u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var l=u*s,c=e.min(4*l,i);if(l){for(var d=0;d<l;d+=s)this._doProcessBlock(r,d);var f=r.splice(0,l);n.sigBytes-=c}return new a.init(f,c)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(r.Hasher=c.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),n.algo={});return n}(Math);!function(e){var t=sr,n=t.lib,r=n.Base,i=n.WordArray,t=t.x64={};t.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),sr.lib.Cipher||function(e){var t=sr,n=t.lib,r=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,s=t.enc.Base64,o=t.algo.EvpKDF,u=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?g:h).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?g:h).decrypt(e,t,n,r)}}}});n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=t.mode={},c=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=i[a]},d=(n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;c.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),d.Decryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),c.call(this,e,t,r),this._prevBlock=i}}),l=l.CBC=d,d=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(r);n=i.create(a,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:l,padding:d}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){e=s.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:n})}},h=n.SerializableCipher=r.extend({cfg:r.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,f.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=i.random(8)),e=o.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:r})}},g=n.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=h.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,h.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=sr,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],a=[],s=[],o=[],u=[],l=[],c=[],d=[],f=[],h=[],g=0;256>g;g++)h[g]=128>g?g<<1:g<<1^283;for(var p=0,m=0,g=0;256>g;g++){var y=m^m<<1^m<<2^m<<3^m<<4,y=y>>>8^255&y^99;r[p]=y,i[y]=p;var v=h[p],S=h[v],_=h[S],b=257*h[y]^16843008*y;a[p]=b<<24|b>>>8,s[p]=b<<16|b>>>16,o[p]=b<<8|b>>>24,u[p]=b,b=16843009*_^65537*S^257*v^16843008*p,l[y]=b<<24|b>>>8,c[y]=b<<16|b>>>16,d[y]=b<<8|b>>>24,f[y]=b,p?(p=v^h[h[h[_^v]]],m^=h[h[m]]):p=m=1}var E=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<e;a++)if(a<n)i[a]=t[a];else{var s=i[a-1];a%n?6<n&&4==a%n&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=s<<8|s>>>24,s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=E[a/n|0]<<24),i[a]=i[a-n]^s}for(t=this._invKeySchedule=[],n=0;n<e;n++)a=e-n,s=n%4?i[a]:i[a-4],t[n]=4>n||4>=a?s:l[r[s>>>24]]^c[r[s>>>16&255]]^d[r[s>>>8&255]]^f[r[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,o,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,c,d,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,a,s,o){for(var u=this._nRounds,l=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],f=e[t+3]^n[3],h=4,g=1;g<u;g++)var p=r[l>>>24]^i[c>>>16&255]^a[d>>>8&255]^s[255&f]^n[h++],m=r[c>>>24]^i[d>>>16&255]^a[f>>>8&255]^s[255&l]^n[h++],y=r[d>>>24]^i[f>>>16&255]^a[l>>>8&255]^s[255&c]^n[h++],f=r[f>>>24]^i[l>>>16&255]^a[c>>>8&255]^s[255&d]^n[h++],l=p,c=m,d=y;p=(o[l>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&f])^n[h++],m=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[f>>>8&255]<<8|o[255&l])^n[h++],y=(o[d>>>24]<<24|o[f>>>16&255]<<16|o[l>>>8&255]<<8|o[255&c])^n[h++],f=(o[f>>>24]<<24|o[l>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^n[h++],e[t]=p,e[t+1]=m,e[t+2]=y,e[t+3]=f},keySize:8});e.AES=t._createHelper(n)}(),function(){function e(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function t(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var n=sr,r=n.lib,i=r.WordArray,r=r.BlockCipher,a=n.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=a.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;56>n;n++){var r=s[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(e=this._subKeys=[],r=0;16>r;r++){for(var i=e[r]=[],a=u[r],n=0;24>n;n++)i[n/6|0]|=t[(o[n]-1+a)%28]<<31-n%6,i[4+(n/6|0)]|=t[28+(o[n+24]-1+a)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(t=this._invSubKeys=[],n=0;16>n;n++)t[n]=e[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var a=0;16>a;a++){for(var s=i[a],o=this._lBlock,u=this._rBlock,d=0,f=0;8>f;f++)d|=l[f][((u^s[f])&c[f])>>>0];this._lBlock=u,this._rBlock=o^d}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=r._createHelper(d),a=a.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=d.createEncryptor(i.create(e.slice(0,2))),this._des2=d.createEncryptor(i.create(e.slice(2,4))),this._des3=d.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=r._createHelper(a)}(),function(){var e=sr,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,s=0;4>s&&i+.75*s<n;s++)e.push(r.charAt(a>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],a=0,s=0;s<n;s++)if(s%4){var o=r.indexOf(e.charAt(s-1))<<2*(s%4),u=r.indexOf(e.charAt(s))>>>6-2*(s%4);i[a>>>2]|=(o|u)<<24-8*(a%4),a++}return t.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,a,s){return e=e+(t&n|~t&r)+i+s,(e<<a|e>>>32-a)+t}function n(e,t,n,r,i,a,s){return e=e+(t&r|n&~r)+i+s,(e<<a|e>>>32-a)+t}function r(e,t,n,r,i,a,s){return e=e+(t^n^r)+i+s,(e<<a|e>>>32-a)+t}function i(e,t,n,r,i,a,s){return e=e+(n^(t|~r))+i+s,(e<<a|e>>>32-a)+t}for(var a=sr,s=a.lib,o=s.WordArray,u=s.Hasher,s=a.algo,l=[],c=0;64>c;c++)l[c]=4294967296*e.abs(e.sin(c+1))|0;s=s.MD5=u.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var s=0;16>s;s++){var o=a+s,u=e[o];e[o]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,o=e[a+0],u=e[a+1],c=e[a+2],d=e[a+3],f=e[a+4],h=e[a+5],g=e[a+6],p=e[a+7],m=e[a+8],y=e[a+9],v=e[a+10],S=e[a+11],_=e[a+12],b=e[a+13],E=e[a+14],A=e[a+15],w=s[0],x=s[1],P=s[2],T=s[3],w=t(w,x,P,T,o,7,l[0]),T=t(T,w,x,P,u,12,l[1]),P=t(P,T,w,x,c,17,l[2]),x=t(x,P,T,w,d,22,l[3]),w=t(w,x,P,T,f,7,l[4]),T=t(T,w,x,P,h,12,l[5]),P=t(P,T,w,x,g,17,l[6]),x=t(x,P,T,w,p,22,l[7]),w=t(w,x,P,T,m,7,l[8]),T=t(T,w,x,P,y,12,l[9]),P=t(P,T,w,x,v,17,l[10]),x=t(x,P,T,w,S,22,l[11]),w=t(w,x,P,T,_,7,l[12]),T=t(T,w,x,P,b,12,l[13]),P=t(P,T,w,x,E,17,l[14]),x=t(x,P,T,w,A,22,l[15]),w=n(w,x,P,T,u,5,l[16]),T=n(T,w,x,P,g,9,l[17]),P=n(P,T,w,x,S,14,l[18]),x=n(x,P,T,w,o,20,l[19]),w=n(w,x,P,T,h,5,l[20]),T=n(T,w,x,P,v,9,l[21]),P=n(P,T,w,x,A,14,l[22]),x=n(x,P,T,w,f,20,l[23]),w=n(w,x,P,T,y,5,l[24]),T=n(T,w,x,P,E,9,l[25]),P=n(P,T,w,x,d,14,l[26]),x=n(x,P,T,w,m,20,l[27]),w=n(w,x,P,T,b,5,l[28]),T=n(T,w,x,P,c,9,l[29]),P=n(P,T,w,x,p,14,l[30]),x=n(x,P,T,w,_,20,l[31]),w=r(w,x,P,T,h,4,l[32]),T=r(T,w,x,P,m,11,l[33]),P=r(P,T,w,x,S,16,l[34]),x=r(x,P,T,w,E,23,l[35]),w=r(w,x,P,T,u,4,l[36]),T=r(T,w,x,P,f,11,l[37]),P=r(P,T,w,x,p,16,l[38]),x=r(x,P,T,w,v,23,l[39]),w=r(w,x,P,T,b,4,l[40]),T=r(T,w,x,P,o,11,l[41]),P=r(P,T,w,x,d,16,l[42]),x=r(x,P,T,w,g,23,l[43]),w=r(w,x,P,T,y,4,l[44]),T=r(T,w,x,P,_,11,l[45]),P=r(P,T,w,x,A,16,l[46]),x=r(x,P,T,w,c,23,l[47]),w=i(w,x,P,T,o,6,l[48]),T=i(T,w,x,P,p,10,l[49]),P=i(P,T,w,x,E,15,l[50]),x=i(x,P,T,w,h,21,l[51]),w=i(w,x,P,T,_,6,l[52]),T=i(T,w,x,P,d,10,l[53]),P=i(P,T,w,x,v,15,l[54]),x=i(x,P,T,w,u,21,l[55]),w=i(w,x,P,T,m,6,l[56]),T=i(T,w,x,P,A,10,l[57]),P=i(P,T,w,x,g,15,l[58]),x=i(x,P,T,w,b,21,l[59]),w=i(w,x,P,T,f,6,l[60]),T=i(T,w,x,P,S,10,l[61]),P=i(P,T,w,x,c,15,l[62]),x=i(x,P,T,w,y,21,l[63]);s[0]=s[0]+w|0,s[1]=s[1]+x|0,s[2]=s[2]+P|0,s[3]=s[3]+T|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var a=e.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=u._createHelper(s),a.HmacMD5=u._createHmacHelper(s)}(Math),function(){var e=sr,t=e.lib,n=t.WordArray,r=t.Hasher,i=[],t=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],s=n[2],o=n[3],u=n[4],l=0;80>l;l++){if(16>l)i[l]=0|e[t+l];else{var c=i[l-3]^i[l-8]^i[l-14]^i[l-16];i[l]=c<<1|c>>>31}c=(r<<5|r>>>27)+u+i[l],c=20>l?c+((a&s|~a&o)+1518500249):40>l?c+((a^s^o)+1859775393):60>l?c+((a&s|a&o|s&o)-1894007588):c+((a^s^o)-899497514),u=o,o=s,s=a<<30|a>>>2,a=r,r=c}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(t),e.HmacSHA1=r._createHmacHelper(t)}(),function(e){for(var t=sr,n=t.lib,r=n.WordArray,i=n.Hasher,n=t.algo,a=[],s=[],o=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var c;e:{c=u;for(var d=e.sqrt(c),f=2;f<=d;f++)if(!(c%f)){c=!1;break e}c=!0}c&&(8>l&&(a[l]=o(e.pow(u,.5))),s[l]=o(e.pow(u,1/3)),l++),u++}var h=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],o=n[3],u=n[4],l=n[5],c=n[6],d=n[7],f=0;64>f;f++){if(16>f)h[f]=0|e[t+f];else{var g=h[f-15],p=h[f-2];h[f]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+h[f-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+h[f-16]}g=d+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&c)+s[f]+h[f],p=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&a^i&a),d=c,c=l,l=u,u=o+g|0,o=a,a=i,i=r,r=g+p|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0,n[5]=n[5]+l|0,n[6]=n[6]+c|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(n),t.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var e=sr,t=e.lib.WordArray,n=e.algo,r=n.SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)}(),function(){function e(){return i.create.apply(i,arguments)}for(var t=sr,n=t.lib.Hasher,r=t.x64,i=r.Word,a=r.WordArray,r=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],o=[],u=0;80>u;u++)o[u]=e();r=r.SHA512=n.extend({_doReset:function(){this._hash=new a.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],u=n[3],l=n[4],c=n[5],d=n[6],n=n[7],f=r.high,h=r.low,g=i.high,p=i.low,m=a.high,y=a.low,v=u.high,S=u.low,_=l.high,b=l.low,E=c.high,A=c.low,w=d.high,x=d.low,P=n.high,T=n.low,F=f,C=h,R=g,I=p,D=m,O=y,k=v,N=S,H=_,j=b,M=E,B=A,L=w,V=x,q=P,U=T,K=0;80>K;K++){var G=o[K];if(16>K)var W=G.high=0|e[t+2*K],z=G.low=0|e[t+2*K+1];else{var W=o[K-15],z=W.high,J=W.low,W=(z>>>1|J<<31)^(z>>>8|J<<24)^z>>>7,J=(J>>>1|z<<31)^(J>>>8|z<<24)^(J>>>7|z<<25),Y=o[K-2],z=Y.high,X=Y.low,Y=(z>>>19|X<<13)^(z<<3|X>>>29)^z>>>6,X=(X>>>19|z<<13)^(X<<3|z>>>29)^(X>>>6|z<<26),z=o[K-7],$=z.high,Q=o[K-16],Z=Q.high,Q=Q.low,z=J+z.low,W=W+$+(z>>>0<J>>>0?1:0),z=z+X,W=W+Y+(z>>>0<X>>>0?1:0),z=z+Q,W=W+Z+(z>>>0<Q>>>0?1:0);G.high=W,G.low=z}var $=H&M^~H&L,Q=j&B^~j&V,G=F&R^F&D^R&D,ee=C&I^C&O^I&O,J=(F>>>28|C<<4)^(F<<30|C>>>2)^(F<<25|C>>>7),Y=(C>>>28|F<<4)^(C<<30|F>>>2)^(C<<25|F>>>7),X=s[K],te=X.high,ne=X.low,X=U+((j>>>14|H<<18)^(j>>>18|H<<14)^(j<<23|H>>>9)),Z=q+((H>>>14|j<<18)^(H>>>18|j<<14)^(H<<23|j>>>9))+(X>>>0<U>>>0?1:0),X=X+Q,Z=Z+$+(X>>>0<Q>>>0?1:0),X=X+ne,Z=Z+te+(X>>>0<ne>>>0?1:0),X=X+z,Z=Z+W+(X>>>0<z>>>0?1:0),z=Y+ee,G=J+G+(z>>>0<Y>>>0?1:0),q=L,U=V,L=M,V=B,M=H,B=j,j=N+X|0,H=k+Z+(j>>>0<N>>>0?1:0)|0,k=D,N=O,D=R,O=I,R=F,I=C,C=X+z|0,F=Z+G+(C>>>0<X>>>0?1:0)|0}h=r.low=h+C,r.high=f+F+(h>>>0<C>>>0?1:0),p=i.low=p+I,i.high=g+R+(p>>>0<I>>>0?1:0),y=a.low=y+O,a.high=m+D+(y>>>0<O>>>0?1:0),S=u.low=S+N,u.high=v+k+(S>>>0<N>>>0?1:0),b=l.low=b+j,l.high=_+H+(b>>>0<j>>>0?1:0),A=c.low=A+B,c.high=E+M+(A>>>0<B>>>0?1:0),x=d.low=x+V,d.high=w+L+(x>>>0<V>>>0?1:0),T=n.low=T+U,n.high=P+q+(T>>>0<U>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+128>>>10<<5)+30]=Math.floor(n/4294967296),t[(r+128>>>10<<5)+31]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(r),t.HmacSHA512=n._createHmacHelper(r)}(),function(){var e=sr,t=e.x64,n=t.Word,r=t.WordArray,t=e.algo,i=t.SHA512,t=t.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=i._createHelper(t),e.HmacSHA384=i._createHmacHelper(t)}(),function(){var e=sr,t=e.lib,n=t.WordArray,r=t.Hasher,t=e.algo,i=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),o=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=n.create([0,1518500249,1859775393,2400959708,2840853838]),l=n.create([1352829926,1548603684,1836072691,2053994217,0]),t=t.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++){var r=t+n,c=e[r];
e[r]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var d,f,h,g,p,m,y,v,S,_,r=this._hash.words,c=u.words,b=l.words,E=i.words,A=a.words,w=s.words,x=o.words;m=d=r[0],y=f=r[1],v=h=r[2],S=g=r[3],_=p=r[4];for(var P,n=0;80>n;n+=1)P=d+e[t+E[n]]|0,P=16>n?P+((f^h^g)+c[0]):32>n?P+((f&h|~f&g)+c[1]):48>n?P+(((f|~h)^g)+c[2]):64>n?P+((f&g|h&~g)+c[3]):P+((f^(h|~g))+c[4]),P|=0,P=P<<w[n]|P>>>32-w[n],P=P+p|0,d=p,p=g,g=h<<10|h>>>22,h=f,f=P,P=m+e[t+A[n]]|0,P=16>n?P+((y^(v|~S))+b[0]):32>n?P+((y&S|v&~S)+b[1]):48>n?P+(((y|~v)^S)+b[2]):64>n?P+((y&v|~y&S)+b[3]):P+((y^v^S)+b[4]),P|=0,P=P<<x[n]|P>>>32-x[n],P=P+_|0,m=_,_=S,S=v<<10|v>>>22,v=y,y=P;P=r[1]+h+S|0,r[1]=r[2]+g+_|0,r[2]=r[3]+p+m|0,r[3]=r[4]+d+y|0,r[4]=r[0]+f+v|0,r[0]=P},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;for(t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash,t=e.words,n=0;5>n;n++)r=t[n],t[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.RIPEMD160=r._createHelper(t),e.HmacRIPEMD160=r._createHmacHelper(t)}(Math),function(){var e=sr,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var a=this._oKey=n.clone(),s=this._iKey=n.clone(),o=a.words,u=s.words,l=0;l<r;l++)o[l]^=1549556828,u[l]^=909522486;a.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=sr,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,i=t.HMAC,a=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=i.create(n.hasher,e),s=r.create(),o=r.create([1]),u=s.words,l=o.words,c=n.keySize,n=n.iterations;u.length<c;){var d=a.update(t).finalize(o);a.reset();for(var f=d.words,h=f.length,g=d,p=1;p<n;p++){g=a.finalize(g),a.reset();for(var m=g.words,y=0;y<h;y++)f[y]^=m[y]}s.concat(d),l[0]++}return s.sigBytes=4*c,s}});e.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)}}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
	 */
var or,ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lr="=",cr=0xdeadbeefcafe,dr=15715070==(16777215&cr);dr&&"Microsoft Internet Explorer"==rr.appName?(s.prototype.am=l,or=30):dr&&"Netscape"!=rr.appName?(s.prototype.am=u,or=26):(s.prototype.am=c,or=28),s.prototype.DB=or,s.prototype.DM=(1<<or)-1,s.prototype.DV=1<<or;var fr=52;s.prototype.FV=Math.pow(2,fr),s.prototype.F1=fr-or,s.prototype.F2=2*or-fr;var hr,gr,pr="0123456789abcdefghijklmnopqrstuvwxyz",mr=new Array;for(hr="0".charCodeAt(0),gr=0;gr<=9;++gr)mr[hr++]=gr;for(hr="a".charCodeAt(0),gr=10;gr<36;++gr)mr[hr++]=gr;for(hr="A".charCodeAt(0),gr=10;gr<36;++gr)mr[hr++]=gr;O.prototype.convert=k,O.prototype.revert=N,O.prototype.reduce=H,O.prototype.mulTo=j,O.prototype.sqrTo=M,L.prototype.convert=V,L.prototype.revert=q,L.prototype.reduce=U,L.prototype.mulTo=G,L.prototype.sqrTo=K,s.prototype.copyTo=h,s.prototype.fromInt=g,s.prototype.fromString=m,s.prototype.clamp=y,s.prototype.dlShiftTo=w,s.prototype.drShiftTo=x,s.prototype.lShiftTo=P,s.prototype.rShiftTo=T,s.prototype.subTo=F,s.prototype.multiplyTo=C,s.prototype.squareTo=R,s.prototype.divRemTo=I,s.prototype.invDigit=B,s.prototype.isEven=W,s.prototype.exp=z,s.prototype.toString=v,s.prototype.negate=S,s.prototype.abs=_,s.prototype.compareTo=b,s.prototype.bitLength=A,s.prototype.mod=D,s.prototype.modPowInt=J,s.ZERO=p(0),s.ONE=p(1),Be.prototype.convert=Le,Be.prototype.revert=Le,Be.prototype.mulTo=Ve,Be.prototype.sqrTo=qe,We.prototype.convert=ze,We.prototype.revert=Je,We.prototype.reduce=Ye,We.prototype.mulTo=$e,We.prototype.sqrTo=Xe;var yr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],vr=(1<<26)/yr[yr.length-1];s.prototype.chunkSize=Z,s.prototype.toRadix=te,s.prototype.fromRadix=ne,s.prototype.fromNumber=re,s.prototype.bitwiseTo=ue,s.prototype.changeBit=xe,s.prototype.addTo=Ce,s.prototype.dMultiply=je,s.prototype.dAddOffset=Me,s.prototype.multiplyLowerTo=Ke,s.prototype.multiplyUpperTo=Ge,s.prototype.modInt=et,s.prototype.millerRabin=rt,s.prototype.clone=Y,s.prototype.intValue=X,s.prototype.byteValue=$,s.prototype.shortValue=Q,s.prototype.signum=ee,s.prototype.toByteArray=ie,s.prototype.equals=ae,s.prototype.min=se,s.prototype.max=oe,s.prototype.and=ce,s.prototype.or=fe,s.prototype.xor=ge,s.prototype.andNot=me,s.prototype.not=ye,s.prototype.shiftLeft=ve,s.prototype.shiftRight=Se,s.prototype.getLowestSetBit=be,s.prototype.bitCount=Ae,s.prototype.testBit=we,s.prototype.setBit=Pe,s.prototype.clearBit=Te,s.prototype.flipBit=Fe,s.prototype.add=Re,s.prototype.subtract=Ie,s.prototype.multiply=De,s.prototype.divide=ke,s.prototype.remainder=Ne,s.prototype.divideAndRemainder=He,s.prototype.modPow=Qe,s.prototype.modInverse=tt,s.prototype.pow=Ue,s.prototype.gcd=Ze,s.prototype.isProbablePrime=nt,s.prototype.square=Oe,it.prototype.init=at,it.prototype.next=st;var Sr,_r,br,Er=256;if(null==_r){_r=new Array,br=0;var Ar;if(ir.crypto&&ir.crypto.getRandomValues){var wr=new Uint8Array(32);for(ir.crypto.getRandomValues(wr),Ar=0;Ar<32;++Ar)_r[br++]=wr[Ar]}if("Netscape"==rr.appName&&rr.appVersion<"5"&&ir.crypto){var xr=ir.crypto.random(32);for(Ar=0;Ar<xr.length;++Ar)_r[br++]=255&xr.charCodeAt(Ar)}for(;br<Er;)Ar=Math.floor(65536*Math.random()),_r[br++]=Ar>>>8,_r[br++]=255&Ar;br=0,lt()}ft.prototype.nextBytes=dt;var Pr=20;yt.prototype.doPublic=St,yt.prototype.setPublic=vt,yt.prototype.encrypt=_t,yt.prototype.encryptOAEP=bt,yt.prototype.type="RSA";var Pr=20;yt.prototype.doPrivate=Ft,yt.prototype.setPrivate=xt,yt.prototype.setPrivateEx=Pt,yt.prototype.generate=Tt,yt.prototype.decrypt=Ct,yt.prototype.decryptOAEP=Rt,It.prototype.equals=Dt,It.prototype.toBigInteger=Ot,It.prototype.negate=kt,It.prototype.add=Nt,It.prototype.subtract=Ht,It.prototype.multiply=jt,It.prototype.square=Mt,It.prototype.divide=Bt,Lt.prototype.getX=Vt,Lt.prototype.getY=qt,Lt.prototype.equals=Ut,Lt.prototype.isInfinity=Kt,Lt.prototype.negate=Gt,Lt.prototype.add=Wt,Lt.prototype.twice=zt,Lt.prototype.multiply=Jt,Lt.prototype.multiplyTwo=Yt,Xt.prototype.getQ=$t,Xt.prototype.getA=Qt,Xt.prototype.getB=Zt,Xt.prototype.equals=en,Xt.prototype.getInfinity=tn,Xt.prototype.fromBigInteger=nn,Xt.prototype.decodePointHex=rn,/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
	 */
It.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Lt.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i},Lt.decodeFrom=function(e,t){var n=(t[0],t.length-1),r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var a=new s(r),o=new s(i);return new Lt(e,e.fromBigInteger(a),e.fromBigInteger(o))},Lt.decodeFromHex=function(e,t){var n=(t.substr(0,2),t.length-2),r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),a=new s(r,16),o=new s(i,16);return new Lt(e,e.fromBigInteger(a),e.fromBigInteger(o))},Lt.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y),r=n.divide(t),i=r.square().subtract(this.x).subtract(e.x),a=r.multiply(this.x.subtract(i)).subtract(this.y);return new Lt(this.curve,i,a)},Lt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(s.valueOf(2)),t=this.curve.fromBigInteger(s.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new Lt(this.curve,r,i)},Lt.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new s("3")),i=this.negate(),a=this;for(t=r.bitLength()-2;t>0;--t){a=a.twice();var o=r.testBit(t),u=n.testBit(t);o!=u&&(a=a.add2D(o?this:i))}return a},Lt.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),a=t.multiply(t).mod(i),s=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return a.equals(s)},Lt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Lt.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(s.ONE)<0||t.compareTo(e.subtract(s.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(s.ONE)<0||n.compareTo(e.subtract(s.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
	 */
var Tr=function(){function e(e,t,n){return t?s[t]:String.fromCharCode(parseInt(n,16))}var t="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",n='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',r='(?:"'+n+'*")',i=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+t+"|"+r+")","g"),a=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=new String(""),u="\\",l=({"{":Object,"[":Array},Object.hasOwnProperty);return function(t,n){var r,s=t.match(i),c=s[0],d=!1;"{"===c?r={}:"["===c?r=[]:(r=[],d=!0);for(var f,h=[r],g=1-d,p=s.length;g<p;++g){c=s[g];var m;switch(c.charCodeAt(0)){default:m=h[0],m[f||m.length]=+c,f=void 0;break;case 34:if(c=c.substring(1,c.length-1),c.indexOf(u)!==-1&&(c=c.replace(a,e)),m=h[0],!f){if(!(m instanceof Array)){f=c||o;break}f=m.length}m[f]=c,f=void 0;break;case 91:m=h[0],h.unshift(m[f||m.length]=[]),f=void 0;break;case 93:h.shift();break;case 102:m=h[0],m[f||m.length]=!1,f=void 0;break;case 110:m=h[0],m[f||m.length]=null,f=void 0;break;case 116:m=h[0],m[f||m.length]=!0,f=void 0;break;case 123:m=h[0],h.unshift(m[f||m.length]={}),f=void 0;break;case 125:h.shift()}}if(d){if(1!==h.length)throw new Error;r=r[0]}else if(h.length)throw new Error;if(n){var y=function(e,t){var r=e[t];if(r&&"object"==typeof r){var i=null;for(var a in r)if(l.call(r,a)&&r!==e){var s=y(r,a);void 0!==s?r[a]=s:(i||(i=[]),i.push(a))}if(i)for(var o=i.length;--o>=0;)delete r[i[o]]}return n.call(e,t,r)};r=y({"":r},"")}return r}}();/*! asn1-1.0.10.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.asn1&&Cr.asn1||(Cr.asn1={}),Cr.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1),r=n.length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var i="",a=0;a<r;a++)i+="f";var o=new s(i,16),u=o.xor(e).add(s.ONE);t=u.toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){var n=En(e),r=n.replace(/(.{64})/g,"$1\r\n");return r=r.replace(/\r\n$/,""),"-----BEGIN "+t+"-----\r\n"+r+"\r\n-----END "+t+"-----\r\n"},this.newObject=function(e){var t=Cr.asn1,n=Object.keys(e);if(1!=n.length)throw"key of param shall be only one.";var r=n[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+r+":")==-1)throw"undefined key: "+r;if("bool"==r)return new t.DERBoolean(e[r]);if("int"==r)return new t.DERInteger(e[r]);if("bitstr"==r)return new t.DERBitString(e[r]);if("octstr"==r)return new t.DEROctetString(e[r]);if("null"==r)return new t.DERNull(e[r]);if("oid"==r)return new t.DERObjectIdentifier(e[r]);if("enum"==r)return new t.DEREnumerated(e[r]);if("utf8str"==r)return new t.DERUTF8String(e[r]);if("numstr"==r)return new t.DERNumericString(e[r]);if("prnstr"==r)return new t.DERPrintableString(e[r]);if("telstr"==r)return new t.DERTeletexString(e[r]);if("ia5str"==r)return new t.DERIA5String(e[r]);if("utctime"==r)return new t.DERUTCTime(e[r]);if("gentime"==r)return new t.DERGeneralizedTime(e[r]);if("seq"==r){for(var i=e[r],a=[],s=0;s<i.length;s++){var o=t.ASN1Util.newObject(i[s]);a.push(o)}return new t.DERSequence({array:a})}if("set"==r){for(var i=e[r],a=[],s=0;s<i.length;s++){var o=t.ASN1Util.newObject(i[s]);a.push(o)}return new t.DERSet({array:a})}if("tag"==r){var u=e[r];if("[object Array]"===Object.prototype.toString.call(u)&&3==u.length){var l=t.ASN1Util.newObject(u[2]);return new t.DERTaggedObject({tag:u[0],explicit:u[1],obj:l})}var c={};if(void 0!==u.explicit&&(c.explicit=u.explicit),void 0!==u.tag&&(c.tag=u.tag),void 0===u.obj)throw"obj shall be specified for 'tag'.";return c.obj=t.ASN1Util.newObject(u.obj),new t.DERTaggedObject(c)}},this.jsonToASN1HEX=function(e){var t=this.newObject(e);return t.getEncodedHex()}},Cr.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=Math.floor(n/40),i=n%40,t=r+"."+i,a="",o=2;o<e.length;o+=2){var u=parseInt(e.substr(o,2),16),l=("00000000"+u.toString(2)).slice(-8);if(a+=l.substr(1,7),"0"==l.substr(0,1)){var c=new s(a,2);t=t+"."+c.toString(10),a=""}}return t},Cr.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new s(e,10),i=r.toString(2),a=7-i.length%7;7==a&&(a=0);for(var o="",u=0;u<a;u++)o+="0";i=o+i;for(var u=0;u<i.length-1;u+=7){var l=i.substr(u,7);u!=i.length-7&&(l="1"+l),n+=t(parseInt(l,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),a=40*parseInt(i[0])+parseInt(i[1]);r+=t(a),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},Cr.asn1.ASN1Object=function(){var e="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+e.length+",v="+this.hV;var t=this.hV.length/2,n=t.toString(16);if(n.length%2==1&&(n="0"+n),t<128)return n;var r=n.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);var i=128+r;return i.toString(16)+n},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},Cr.asn1.DERAbstractString=function(e){Cr.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=un(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("string"==typeof e?this.setString(e):"undefined"!=typeof e.str?this.setString(e.str):"undefined"!=typeof e.hex&&this.setStringHex(e.hex))},ar.lang.extend(Cr.asn1.DERAbstractString,Cr.asn1.ASN1Object),Cr.asn1.DERAbstractTime=function(e){Cr.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(e){utc=e.getTime()+6e4*e.getTimezoneOffset();var t=new Date(utc);return t},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),a=String(i.getFullYear());"utc"==t&&(a=a.substr(2,2));var s=r(String(i.getMonth()+1),2),o=r(String(i.getDate()),2),u=r(String(i.getHours()),2),l=r(String(i.getMinutes()),2),c=r(String(i.getSeconds()),2),d=a+s+o+u+l+c;if(n===!0){var f=i.getMilliseconds();if(0!=f){var h=r(String(f),3);h=h.replace(/[0]+$/,""),d=d+"."+h}}return d+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=un(e)},this.setByDateValue=function(e,t,n,r,i,a){var s=new Date(Date.UTC(e,t-1,n,r,i,a,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},ar.lang.extend(Cr.asn1.DERAbstractTime,Cr.asn1.ASN1Object),Cr.asn1.DERAbstractStructured=function(e){Cr.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,"undefined"!=typeof e&&"undefined"!=typeof e.array&&(this.asn1Array=e.array)},ar.lang.extend(Cr.asn1.DERAbstractStructured,Cr.asn1.ASN1Object),Cr.asn1.DERBoolean=function(){Cr.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},ar.lang.extend(Cr.asn1.DERBoolean,Cr.asn1.ASN1Object),Cr.asn1.DERInteger=function(e){Cr.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=Cr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new s(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.bigint?this.setByBigInteger(e.bigint):"undefined"!=typeof e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):"undefined"!=typeof e.hex&&this.setValueHex(e.hex))},ar.lang.extend(Cr.asn1.DERInteger,Cr.asn1.ASN1Object),Cr.asn1.DERBitString=function(e){Cr.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){e=e.replace(/0+$/,"");var t=8-e.length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";for(var r="",n=0;n<e.length-1;n+=8){var i=e.substr(n,8),a=parseInt(i,2).toString(16);1==a.length&&(a="0"+a),r+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)t+=1==e[n]?"1":"0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):"undefined"!=typeof e.hex?this.setHexValueIncludingUnusedBits(e.hex):"undefined"!=typeof e.bin?this.setByBinaryString(e.bin):"undefined"!=typeof e.array&&this.setByBooleanArray(e.array))},ar.lang.extend(Cr.asn1.DERBitString,Cr.asn1.ASN1Object),Cr.asn1.DEROctetString=function(e){Cr.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},ar.lang.extend(Cr.asn1.DEROctetString,Cr.asn1.DERAbstractString),Cr.asn1.DERNull=function(){Cr.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},ar.lang.extend(Cr.asn1.DERNull,Cr.asn1.ASN1Object),Cr.asn1.DERObjectIdentifier=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new s(e,10),i=r.toString(2),a=7-i.length%7;7==a&&(a=0);for(var o="",u=0;u<a;u++)o+="0";i=o+i;for(var u=0;u<i.length-1;u+=7){var l=i.substr(u,7);u!=i.length-7&&(l="1"+l),n+=t(parseInt(l,2))}return n};Cr.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),a=40*parseInt(i[0])+parseInt(i[1]);r+=t(a),i.splice(0,2);for(var s=0;s<i.length;s++)r+=n(i[s]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){if("undefined"==typeof Cr.asn1.x509.OID.name2oidList[e])throw"DERObjectIdentifier oidName undefined: "+e;var t=Cr.asn1.x509.OID.name2oidList[e];this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("string"==typeof e&&e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):void 0!==Cr.asn1.x509.OID.name2oidList[e]?this.setValueOidString(Cr.asn1.x509.OID.name2oidList[e]):"undefined"!=typeof e.oid?this.setValueOidString(e.oid):"undefined"!=typeof e.hex?this.setValueHex(e.hex):"undefined"!=typeof e.name&&this.setValueName(e.name))},ar.lang.extend(Cr.asn1.DERObjectIdentifier,Cr.asn1.ASN1Object),Cr.asn1.DEREnumerated=function(e){Cr.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=Cr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new s(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):"undefined"!=typeof e.hex&&this.setValueHex(e.hex))},ar.lang.extend(Cr.asn1.DEREnumerated,Cr.asn1.ASN1Object),Cr.asn1.DERUTF8String=function(e){Cr.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},ar.lang.extend(Cr.asn1.DERUTF8String,Cr.asn1.DERAbstractString),Cr.asn1.DERNumericString=function(e){Cr.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},ar.lang.extend(Cr.asn1.DERNumericString,Cr.asn1.DERAbstractString),Cr.asn1.DERPrintableString=function(e){Cr.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},ar.lang.extend(Cr.asn1.DERPrintableString,Cr.asn1.DERAbstractString),Cr.asn1.DERTeletexString=function(e){Cr.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},ar.lang.extend(Cr.asn1.DERTeletexString,Cr.asn1.DERAbstractString),Cr.asn1.DERIA5String=function(e){Cr.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},ar.lang.extend(Cr.asn1.DERIA5String,Cr.asn1.DERAbstractString),Cr.asn1.DERUTCTime=function(e){Cr.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=un(this.s)},this.getFreshValueHex=function(){return"undefined"==typeof this.date&&"undefined"==typeof this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=un(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},ar.lang.extend(Cr.asn1.DERUTCTime,Cr.asn1.DERAbstractTime),Cr.asn1.DERGeneralizedTime=function(e){Cr.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=un(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=un(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),e.millis===!0&&(this.withMillis=!0))},ar.lang.extend(Cr.asn1.DERGeneralizedTime,Cr.asn1.DERAbstractTime),Cr.asn1.DERSequence=function(e){Cr.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e+=n.getEncodedHex()}return this.hV=e,this.hV}},ar.lang.extend(Cr.asn1.DERSequence,Cr.asn1.DERAbstractStructured),Cr.asn1.DERSet=function(e){Cr.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e.push(n.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},"undefined"!=typeof e&&"undefined"!=typeof e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},ar.lang.extend(Cr.asn1.DERSet,Cr.asn1.DERAbstractStructured),Cr.asn1.DERTaggedObject=function(e){Cr.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.tag&&(this.hT=e.tag),"undefined"!=typeof e.explicit&&(this.isExplicit=e.explicit),"undefined"!=typeof e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},ar.lang.extend(Cr.asn1.DERTaggedObject,Cr.asn1.ASN1Object);/*! asn1hex-1.1.6.js (c) 2012-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
var Fr=new function(){this.getByteLengthOfL_AtObj=function(e,t){if("8"!=e.substring(t+2,t+3))return 1;var n=parseInt(e.substring(t+3,t+4));return 0==n?-1:0<n&&n<10?n+1:-2},this.getHexOfL_AtObj=function(e,t){var n=this.getByteLengthOfL_AtObj(e,t);return n<1?"":e.substring(t+2,t+2+2*n)},this.getIntOfL_AtObj=function(e,t){var n=this.getHexOfL_AtObj(e,t);if(""==n)return-1;var r;return r=parseInt(n.substring(0,1))<8?new s(n,16):new s(n.substring(2),16),r.intValue()},this.getStartPosOfV_AtObj=function(e,t){var n=this.getByteLengthOfL_AtObj(e,t);return n<0?n:t+2*(n+1)},this.getHexOfV_AtObj=function(e,t){var n=this.getStartPosOfV_AtObj(e,t),r=this.getIntOfL_AtObj(e,t);return e.substring(n,n+2*r)},this.getHexOfTLV_AtObj=function(e,t){var n=e.substr(t,2),r=this.getHexOfL_AtObj(e,t),i=this.getHexOfV_AtObj(e,t);return n+r+i},this.getPosOfNextSibling_AtObj=function(e,t){var n=this.getStartPosOfV_AtObj(e,t),r=this.getIntOfL_AtObj(e,t);return n+2*r},this.getPosArrayOfChildren_AtObj=function(e,t){var n=new Array,r=this.getStartPosOfV_AtObj(e,t);n.push(r);for(var i=this.getIntOfL_AtObj(e,t),a=r,s=0;;){var o=this.getPosOfNextSibling_AtObj(e,a);if(null==o||o-r>=2*i)break;if(s>=200)break;n.push(o),a=o,s++}return n},this.getNthChildIndex_AtObj=function(e,t,n){var r=this.getPosArrayOfChildren_AtObj(e,t);return r[n]},this.getDecendantIndexByNthList=function(e,t,n){if(0==n.length)return t;var r=n.shift(),i=this.getPosArrayOfChildren_AtObj(e,t);return this.getDecendantIndexByNthList(e,i[r],n)},this.getDecendantHexTLVByNthList=function(e,t,n){var r=this.getDecendantIndexByNthList(e,t,n);return this.getHexOfTLV_AtObj(e,r)},this.getDecendantHexVByNthList=function(e,t,n){var r=this.getDecendantIndexByNthList(e,t,n);return this.getHexOfV_AtObj(e,r)}};Fr.getVbyList=function(e,t,n,r){var i=this.getDecendantIndexByNthList(e,t,n);if(void 0===i)throw"can't find nthList object";if(void 0!==r&&e.substr(i,2)!=r)throw"checking tag doesn't match: "+e.substr(i,2)+"!="+r;return this.getHexOfV_AtObj(e,i)},Fr.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var a=e.substr(2),s=[],o=0;o<a.length/2;o++)s.push(parseInt(a.substr(2*o,2),16));for(var u=[],l="",o=0;o<s.length;o++)128&s[o]?l+=t((127&s[o]).toString(2),7):(l+=t((127&s[o]).toString(2),7),u.push(new String(parseInt(l,2))),l="");var c=n.join(".");return u.length>0&&(c=c+"."+u.join(".")),c},Fr.dump=function(e,t,n,r){var i=function(e,t){if(e.length<=2*t)return e;var n=e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t);return n};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var a=t.ommit_long_octet;if("01"==e.substr(n,2)){var s=Fr.getHexOfV_AtObj(e,n);return"00"==s?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n"}if("02"==e.substr(n,2)){var s=Fr.getHexOfV_AtObj(e,n);return r+"INTEGER "+i(s,a)+"\n"}if("03"==e.substr(n,2)){var s=Fr.getHexOfV_AtObj(e,n);return r+"BITSTRING "+i(s,a)+"\n"}if("04"==e.substr(n,2)){var s=Fr.getHexOfV_AtObj(e,n);if(Fr.isASN1HEX(s)){var o=r+"OCTETSTRING, encapsulates\n";return o+=Fr.dump(s,t,0,r+"  ")}return r+"OCTETSTRING "+i(s,a)+"\n"}if("05"==e.substr(n,2))return r+"NULL\n";if("06"==e.substr(n,2)){var u=Fr.getHexOfV_AtObj(e,n),l=Cr.asn1.ASN1Util.oidHexToInt(u),c=Cr.asn1.x509.OID.oid2name(l),d=l.replace(/\./g," ");return""!=c?r+"ObjectIdentifier "+c+" ("+d+")\n":r+"ObjectIdentifier ("+d+")\n"}if("0c"==e.substr(n,2))return r+"UTF8String '"+Sn(Fr.getHexOfV_AtObj(e,n))+"'\n";if("13"==e.substr(n,2))return r+"PrintableString '"+Sn(Fr.getHexOfV_AtObj(e,n))+"'\n";if("14"==e.substr(n,2))return r+"TeletexString '"+Sn(Fr.getHexOfV_AtObj(e,n))+"'\n";if("16"==e.substr(n,2))return r+"IA5String '"+Sn(Fr.getHexOfV_AtObj(e,n))+"'\n";if("17"==e.substr(n,2))return r+"UTCTime "+Sn(Fr.getHexOfV_AtObj(e,n))+"\n";if("18"==e.substr(n,2))return r+"GeneralizedTime "+Sn(Fr.getHexOfV_AtObj(e,n))+"\n";if("30"==e.substr(n,2)){if("3000"==e.substr(n,4))return r+"SEQUENCE {}\n";var o=r+"SEQUENCE\n",f=Fr.getPosArrayOfChildren_AtObj(e,n),h=t;if((2==f.length||3==f.length)&&"06"==e.substr(f[0],2)&&"04"==e.substr(f[f.length-1],2)){var g=Fr.getHexOfV_AtObj(e,f[0]),l=Cr.asn1.ASN1Util.oidHexToInt(g),c=Cr.asn1.x509.OID.oid2name(l),p=JSON.parse(JSON.stringify(t));p.x509ExtName=c,h=p}for(var m=0;m<f.length;m++)o+=Fr.dump(e,h,f[m],r+"  ");return o}if("31"==e.substr(n,2)){for(var o=r+"SET\n",f=Fr.getPosArrayOfChildren_AtObj(e,n),m=0;m<f.length;m++)o+=Fr.dump(e,t,f[m],r+"  ");return o}var y=parseInt(e.substr(n,2),16);if(0!=(128&y)){var v=31&y;if(0!=(32&y)){for(var o=r+"["+v+"]\n",f=Fr.getPosArrayOfChildren_AtObj(e,n),m=0;m<f.length;m++)o+=Fr.dump(e,t,f[m],r+"  ");return o}var s=Fr.getHexOfV_AtObj(e,n);"68747470"==s.substr(0,8)&&(s=Sn(s)),"subjectAltName"===t.x509ExtName&&2==v&&(s=Sn(s));var o=r+"["+v+"] "+s+"\n";return o}return r+"UNKNOWN("+e.substr(n,2)+") "+Fr.getHexOfV_AtObj(e,n)+"\n"},Fr.isASN1HEX=function(e){if(e.length%2==1)return!1;var t=Fr.getIntOfL_AtObj(e,0),n=e.substr(0,2),r=Fr.getHexOfL_AtObj(e,0),i=e.length-n.length-r.length;return i==2*t},/*! asn1x509-1.0.14.js (c) 2013-2015 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.asn1&&Cr.asn1||(Cr.asn1={}),"undefined"!=typeof Cr.asn1.x509&&Cr.asn1.x509||(Cr.asn1.x509={}),Cr.asn1.x509.Certificate=function(e){Cr.asn1.x509.Certificate.superclass.constructor.call(this);this.setRsaPrvKeyByPEMandPass=function(e,t){var n=Or.getDecryptedKeyHex(e,t),r=new yt;r.readPrivateKeyFromASN1HexString(n),this.prvKey=r},this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,sig=new Cr.crypto.Signature({alg:"SHA1withRSA"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new Cr.asn1.DERBitString({hex:"00"+this.hexSig});var e=new Cr.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(e){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=e,this.asn1Sig=new Cr.asn1.DERBitString({hex:"00"+this.hexSig});var t=new Cr.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){var e=this.getEncodedHex(),t=sr.enc.Hex.parse(e),n=sr.enc.Base64.stringify(t),r=n.replace(/(.{64})/g,"$1\r\n");return"-----BEGIN CERTIFICATE-----\r\n"+r+"\r\n-----END CERTIFICATE-----\r\n"},"undefined"!=typeof e&&("undefined"!=typeof e.tbscertobj&&(this.asn1TBSCert=e.tbscertobj),"undefined"!=typeof e.prvkeyobj?this.prvKey=e.prvkeyobj:"undefined"!=typeof e.rsaprvkey?this.prvKey=e.rsaprvkey:"undefined"!=typeof e.rsaprvpem&&"undefined"!=typeof e.rsaprvpas&&this.setRsaPrvKeyByPEMandPass(e.rsaprvpem,e.rsaprvpas))},ar.lang.extend(Cr.asn1.x509.Certificate,Cr.asn1.ASN1Object),Cr.asn1.x509.TBSCertificate=function(e){Cr.asn1.x509.TBSCertificate.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new Cr.asn1.DERTaggedObject({obj:new Cr.asn1.DERInteger({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(e){this.asn1SerialNumber=new Cr.asn1.DERInteger(e)},this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new Cr.asn1.x509.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new Cr.asn1.x509.X500Name(e)},this.setNotBeforeByParam=function(e){this.asn1NotBefore=new Cr.asn1.x509.Time(e)},this.setNotAfterByParam=function(e){this.asn1NotAfter=new Cr.asn1.x509.Time(e)},this.setSubjectByParam=function(e){this.asn1Subject=new Cr.asn1.x509.X500Name(e)},this.setSubjectPublicKeyByParam=function(e){this.asn1SubjPKey=new Cr.asn1.x509.SubjectPublicKeyInfo(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=kr.getKey(e);this.asn1SubjPKey=new Cr.asn1.x509.SubjectPublicKeyInfo(t)},this.appendExtension=function(e){this.extensionsArray.push(e)},this.appendExtensionByName=function(e,t){if("basicconstraints"==e.toLowerCase()){var n=new Cr.asn1.x509.BasicConstraints(t);this.appendExtension(n)}else if("keyusage"==e.toLowerCase()){var n=new Cr.asn1.x509.KeyUsage(t);this.appendExtension(n)}else if("crldistributionpoints"==e.toLowerCase()){var n=new Cr.asn1.x509.CRLDistributionPoints(t);this.appendExtension(n)}else if("extkeyusage"==e.toLowerCase()){var n=new Cr.asn1.x509.ExtKeyUsage(t);this.appendExtension(n)}else{if("authoritykeyidentifier"!=e.toLowerCase())throw"unsupported extension name: "+e;var n=new Cr.asn1.x509.AuthorityKeyIdentifier(t);this.appendExtension(n)}},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var e=new Cr.asn1.DERSequence({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(e),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new Cr.asn1.DERSequence({array:this.extensionsArray}),n=new Cr.asn1.DERTaggedObject({explicit:!0,tag:"a3",obj:t});this.asn1Array.push(n)}var r=new Cr.asn1.DERSequence({array:this.asn1Array});return this.hTLV=r.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},ar.lang.extend(Cr.asn1.x509.TBSCertificate,Cr.asn1.ASN1Object),Cr.asn1.x509.Extension=function(e){Cr.asn1.x509.Extension.superclass.constructor.call(this);this.getEncodedHex=function(){var e=new Cr.asn1.DERObjectIdentifier({oid:this.oid}),t=new Cr.asn1.DEROctetString({hex:this.getExtnValueHex()}),n=new Array;n.push(e),this.critical&&n.push(new Cr.asn1.DERBoolean),n.push(t);var r=new Cr.asn1.DERSequence({array:n});return r.getEncodedHex()},this.critical=!1,"undefined"!=typeof e&&"undefined"!=typeof e.critical&&(this.critical=e.critical)},ar.lang.extend(Cr.asn1.x509.Extension,Cr.asn1.ASN1Object),Cr.asn1.x509.KeyUsage=function(e){Cr.asn1.x509.KeyUsage.superclass.constructor.call(this,e),this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15","undefined"!=typeof e&&"undefined"!=typeof e.bin&&(this.asn1ExtnValue=new Cr.asn1.DERBitString(e))},ar.lang.extend(Cr.asn1.x509.KeyUsage,Cr.asn1.x509.Extension),Cr.asn1.x509.BasicConstraints=function(e){Cr.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new Cr.asn1.DERBoolean),this.pathLen>-1&&e.push(new Cr.asn1.DERInteger({int:this.pathLen}));var t=new Cr.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,"undefined"!=typeof e&&("undefined"!=typeof e.cA&&(this.cA=e.cA),"undefined"!=typeof e.pathLen&&(this.pathLen=e.pathLen))},ar.lang.extend(Cr.asn1.x509.BasicConstraints,Cr.asn1.x509.Extension),Cr.asn1.x509.CRLDistributionPoints=function(e){Cr.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e),this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){this.asn1ExtnValue=new Cr.asn1.DERSequence({array:e})},this.setByOneURI=function(e){var t=new Cr.asn1.x509.GeneralNames([{uri:e}]),n=new Cr.asn1.x509.DistributionPointName(t),r=new Cr.asn1.x509.DistributionPoint({dpobj:n});this.setByDPArray([r])},this.oid="2.5.29.31","undefined"!=typeof e&&("undefined"!=typeof e.array?this.setByDPArray(e.array):"undefined"!=typeof e.uri&&this.setByOneURI(e.uri))},ar.lang.extend(Cr.asn1.x509.CRLDistributionPoints,Cr.asn1.x509.Extension),Cr.asn1.x509.ExtKeyUsage=function(e){Cr.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e),this.setPurposeArray=function(e){this.asn1ExtnValue=new Cr.asn1.DERSequence;for(var t=0;t<e.length;t++){var n=new Cr.asn1.DERObjectIdentifier(e[t]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37","undefined"!=typeof e&&"undefined"!=typeof e.array&&this.setPurposeArray(e.array)},ar.lang.extend(Cr.asn1.x509.ExtKeyUsage,Cr.asn1.x509.Extension),Cr.asn1.x509.AuthorityKeyIdentifier=function(e){Cr.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e),this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new Cr.asn1.DERTaggedObject({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new Cr.asn1.DERTaggedObject({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&e.push(new Cr.asn1.DERTaggedObject({explicit:!1,tag:"82",obj:this.asn1CertSN}));var t=new Cr.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){this.asn1KID=new Cr.asn1.DEROctetString(e)},this.setCertIssuerByParam=function(e){this.asn1CertIssuer=new Cr.asn1.x509.X500Name(e)},this.setCertSNByParam=function(e){this.asn1CertSN=new Cr.asn1.DERInteger(e)},this.oid="2.5.29.35","undefined"!=typeof e&&("undefined"!=typeof e.kid&&this.setKIDByParam(e.kid),"undefined"!=typeof e.issuer&&this.setCertIssuerByParam(e.issuer),"undefined"!=typeof e.sn&&this.setCertSNByParam(e.sn))},ar.lang.extend(Cr.asn1.x509.AuthorityKeyIdentifier,Cr.asn1.x509.Extension),Cr.asn1.x509.CRL=function(e){Cr.asn1.x509.CRL.superclass.constructor.call(this);this.setRsaPrvKeyByPEMandPass=function(e,t){var n=Or.getDecryptedKeyHex(e,t),r=new yt;r.readPrivateKeyFromASN1HexString(n),this.rsaPrvKey=r},this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new Cr.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.initSign(this.rsaPrvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new Cr.asn1.DERBitString({hex:"00"+this.hexSig});var e=new Cr.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){var e=this.getEncodedHex(),t=sr.enc.Hex.parse(e),n=sr.enc.Base64.stringify(t),r=n.replace(/(.{64})/g,"$1\r\n");return"-----BEGIN X509 CRL-----\r\n"+r+"\r\n-----END X509 CRL-----\r\n"},"undefined"!=typeof e&&("undefined"!=typeof e.tbsobj&&(this.asn1TBSCertList=e.tbsobj),"undefined"!=typeof e.rsaprvkey&&(this.rsaPrvKey=e.rsaprvkey),"undefined"!=typeof e.rsaprvpem&&"undefined"!=typeof e.rsaprvpas&&this.setRsaPrvKeyByPEMandPass(e.rsaprvpem,e.rsaprvpas))},ar.lang.extend(Cr.asn1.x509.CRL,Cr.asn1.ASN1Object),Cr.asn1.x509.TBSCertList=function(e){Cr.asn1.x509.TBSCertList.superclass.constructor.call(this);this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new Cr.asn1.x509.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new Cr.asn1.x509.X500Name(e)},this.setThisUpdateByParam=function(e){this.asn1ThisUpdate=new Cr.asn1.x509.Time(e)},this.setNextUpdateByParam=function(e){this.asn1NextUpdate=new Cr.asn1.x509.Time(e)},this.addRevokedCert=function(e,t){var n={};void 0!=e&&null!=e&&(n.sn=e),void 0!=t&&null!=t&&(n.time=t);var r=new Cr.asn1.x509.CRLEntry(n);this.aRevokedCert.push(r)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var e=new Cr.asn1.DERSequence({array:this.aRevokedCert});this.asn1Array.push(e)}var t=new Cr.asn1.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},ar.lang.extend(Cr.asn1.x509.TBSCertList,Cr.asn1.ASN1Object),Cr.asn1.x509.CRLEntry=function(e){Cr.asn1.x509.CRLEntry.superclass.constructor.call(this);this.setCertSerial=function(e){this.sn=new Cr.asn1.DERInteger(e)},this.setRevocationDate=function(e){this.time=new Cr.asn1.x509.Time(e)},this.getEncodedHex=function(){var e=new Cr.asn1.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},"undefined"!=typeof e&&("undefined"!=typeof e.time&&this.setRevocationDate(e.time),"undefined"!=typeof e.sn&&this.setCertSerial(e.sn))},ar.lang.extend(Cr.asn1.x509.CRLEntry,Cr.asn1.ASN1Object),Cr.asn1.x509.X500Name=function(e){if(Cr.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array,this.setByString=function(e){var t=e.split("/");t.shift();for(var n=0;n<t.length;n++)this.asn1Array.push(new Cr.asn1.x509.RDN({str:t[n]}))},this.setByObject=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=new Cr.asn1.x509.RDN({str:t+"="+e[t]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new Cr.asn1.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof e){if("undefined"!=typeof e.str?this.setByString(e.str):"object"==typeof e&&this.setByObject(e),"undefined"!=typeof e.certissuer){var t=new $n;t.hex=$n.pemToHex(e.certissuer),this.hTLV=t.getIssuerHex()}if("undefined"!=typeof e.certsubject){var t=new $n;t.hex=$n.pemToHex(e.certsubject),this.hTLV=t.getSubjectHex()}}},ar.lang.extend(Cr.asn1.x509.X500Name,Cr.asn1.ASN1Object),Cr.asn1.x509.RDN=function(e){Cr.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(e){this.asn1Array.push(new Cr.asn1.x509.AttributeTypeAndValue({str:e}))},this.getEncodedHex=function(){var e=new Cr.asn1.DERSet({array:this.asn1Array});return this.TLV=e.getEncodedHex(),this.TLV},"undefined"!=typeof e&&"undefined"!=typeof e.str&&this.addByString(e.str)},ar.lang.extend(Cr.asn1.x509.RDN,Cr.asn1.ASN1Object),Cr.asn1.x509.AttributeTypeAndValue=function(e){Cr.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var t="utf8";this.setByString=function(e){if(!e.match(/^([^=]+)=(.+)$/))throw"malformed attrTypeAndValueStr: "+e;this.setByAttrTypeAndValueStr(RegExp.$1,RegExp.$2)},this.setByAttrTypeAndValueStr=function(e,n){this.typeObj=Cr.asn1.x509.OID.atype2obj(e);var r=t;"C"==e&&(r="prn"),this.valueObj=this.getValueObj(r,n)},this.getValueObj=function(e,t){if("utf8"==e)return new Cr.asn1.DERUTF8String({str:t});if("prn"==e)return new Cr.asn1.DERPrintableString({str:t});if("tel"==e)return new Cr.asn1.DERTeletexString({str:t});if("ia5"==e)return new Cr.asn1.DERIA5String({str:t});throw"unsupported directory string type: type="+e+" value="+t},this.getEncodedHex=function(){var e=new Cr.asn1.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=e.getEncodedHex(),this.TLV},"undefined"!=typeof e&&"undefined"!=typeof e.str&&this.setByString(e.str)},ar.lang.extend(Cr.asn1.x509.AttributeTypeAndValue,Cr.asn1.ASN1Object),Cr.asn1.x509.SubjectPublicKeyInfo=function(e){Cr.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);this.setRSAKey=function(e){if(!yt.prototype.isPrototypeOf(e))throw"argument is not RSAKey instance";this.rsaKey=e;var t=new Cr.asn1.DERInteger({bigint:e.n}),n=new Cr.asn1.DERInteger({int:e.e}),r=new Cr.asn1.DERSequence({array:[t,n]}),i=r.getEncodedHex();this.asn1AlgId=new Cr.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),this.asn1SubjPKey=new Cr.asn1.DERBitString({hex:"00"+i})},this.setRSAPEM=function(e){if(!e.match(/-----BEGIN PUBLIC KEY-----/))throw"key not supported";var t=e;t=t.replace(/^-----[^-]+-----/,""),t=t.replace(/-----[^-]+-----\s*$/,"");var n=t.replace(/\s+/g,""),r=sr.enc.Base64.parse(n),i=sr.enc.Hex.stringify(r),a=In(i),s=a[1],o=s.substr(2),u=In(o),l=new yt;l.setPublic(u[0],u[1]),this.setRSAKey(l)},this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";var e=new Cr.asn1.DERSequence({array:[this.asn1AlgId,this.asn1SubjPKey]});return e},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this._setRSAKey=function(e){var t=Cr.asn1.ASN1Util.newObject({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}),n=t.getEncodedHex();this.asn1AlgId=new Cr.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),this.asn1SubjPKey=new Cr.asn1.DERBitString({hex:"00"+n})},this._setEC=function(e){var t=new Cr.asn1.DERObjectIdentifier({name:e.curveName});this.asn1AlgId=new Cr.asn1.x509.AlgorithmIdentifier({name:"ecPublicKey",asn1params:t}),this.asn1SubjPKey=new Cr.asn1.DERBitString({hex:"00"+e.pubKeyHex})},this._setDSA=function(e){var t=new Cr.asn1.ASN1Util.newObject({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]});this.asn1AlgId=new Cr.asn1.x509.AlgorithmIdentifier({name:"dsa",asn1params:t});var n=new Cr.asn1.DERInteger({bigint:e.y});this.asn1SubjPKey=new Cr.asn1.DERBitString({hex:"00"+n.getEncodedHex()})},"undefined"!=typeof e&&("undefined"!=typeof yt&&e instanceof yt?this._setRSAKey(e):"undefined"!=typeof Cr.crypto.ECDSA&&e instanceof Cr.crypto.ECDSA?this._setEC(e):"undefined"!=typeof Cr.crypto.DSA&&e instanceof Cr.crypto.DSA?this._setDSA(e):"undefined"!=typeof e.rsakey?this.setRSAKey(e.rsakey):"undefined"!=typeof e.rsapem&&this.setRSAPEM(e.rsapem))},ar.lang.extend(Cr.asn1.x509.SubjectPublicKeyInfo,Cr.asn1.ASN1Object),Cr.asn1.x509.Time=function(e){Cr.asn1.x509.Time.superclass.constructor.call(this);this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new Cr.asn1.DERUTCTime(this.timeParams):new Cr.asn1.DERGeneralizedTime(this.timeParams):"utc"==this.type?new Cr.asn1.DERUTCTime:new Cr.asn1.DERGeneralizedTime,this.TLV=e.getEncodedHex(),this.TLV},this.type="utc","undefined"!=typeof e&&("undefined"!=typeof e.type?this.type=e.type:"undefined"!=typeof e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},ar.lang.extend(Cr.asn1.x509.Time,Cr.asn1.ASN1Object),Cr.asn1.x509.AlgorithmIdentifier=function(e){Cr.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this);this.getEncodedHex=function(){if(null==this.nameAlg&&null==this.asn1Alg)throw"algorithm not specified";null!=this.nameAlg&&null==this.asn1Alg&&(this.asn1Alg=Cr.asn1.x509.OID.name2obj(this.nameAlg));var e=[this.asn1Alg];this.paramEmpty||e.push(this.asn1Params);var t=new Cr.asn1.DERSequence({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&("undefined"!=typeof e.name&&(this.nameAlg=e.name),"undefined"!=typeof e.asn1params&&(this.asn1Params=e.asn1params),"undefined"!=typeof e.paramempty&&(this.paramEmpty=e.paramempty)),null==this.asn1Params&&(this.asn1Params=new Cr.asn1.DERNull)},ar.lang.extend(Cr.asn1.x509.AlgorithmIdentifier,Cr.asn1.ASN1Object),Cr.asn1.x509.GeneralName=function(e){Cr.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86"};this.explicit=!1,this.setByParam=function(e){var n=null;if("undefined"!=typeof e){if("undefined"!=typeof e.rfc822&&(this.type="rfc822",n=new Cr.asn1.DERIA5String({str:e[this.type]})),"undefined"!=typeof e.dns&&(this.type="dns",n=new Cr.asn1.DERIA5String({str:e[this.type]})),"undefined"!=typeof e.uri&&(this.type="uri",n=new Cr.asn1.DERIA5String({str:e[this.type]})),"undefined"!=typeof e.certissuer){this.type="dn",this.explicit=!0;var r=e.certissuer,i=null;if(r.match(/^[0-9A-Fa-f]+$/),r.indexOf("-----BEGIN ")!=-1&&(i=$n.pemToHex(r)),null==i)throw"certissuer param not cert";var a=new $n;a.hex=i;var s=a.getIssuerHex();n=new Cr.asn1.ASN1Object,n.hTLV=s}if("undefined"!=typeof e.certsubj){this.type="dn",this.explicit=!0;var r=e.certsubj,i=null;if(r.match(/^[0-9A-Fa-f]+$/),r.indexOf("-----BEGIN ")!=-1&&(i=$n.pemToHex(r)),null==i)throw"certsubj param not cert";var a=new $n;a.hex=i;var s=a.getSubjectHex();n=new Cr.asn1.ASN1Object,n.hTLV=s}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new Cr.asn1.DERTaggedObject({explicit:this.explicit,tag:t[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},"undefined"!=typeof e&&this.setByParam(e)},ar.lang.extend(Cr.asn1.x509.GeneralName,Cr.asn1.ASN1Object),Cr.asn1.x509.GeneralNames=function(e){Cr.asn1.x509.GeneralNames.superclass.constructor.call(this);this.setByParamArray=function(e){for(var t=0;t<e.length;t++){var n=new Cr.asn1.x509.GeneralName(e[t]);this.asn1Array.push(n)}},this.getEncodedHex=function(){var e=new Cr.asn1.DERSequence({array:this.asn1Array});return e.getEncodedHex()},this.asn1Array=new Array,"undefined"!=typeof e&&this.setByParamArray(e)},ar.lang.extend(Cr.asn1.x509.GeneralNames,Cr.asn1.ASN1Object),Cr.asn1.x509.DistributionPointName=function(e){Cr.asn1.x509.DistributionPointName.superclass.constructor.call(this);if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new Cr.asn1.DERTaggedObject({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},"undefined"!=typeof e){if(!Cr.asn1.x509.GeneralNames.prototype.isPrototypeOf(e))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=e}},ar.lang.extend(Cr.asn1.x509.DistributionPointName,Cr.asn1.ASN1Object),Cr.asn1.x509.DistributionPoint=function(e){Cr.asn1.x509.DistributionPoint.superclass.constructor.call(this);this.getEncodedHex=function(){var e=new Cr.asn1.DERSequence;if(null!=this.asn1DP){var t=new Cr.asn1.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(t)}return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&"undefined"!=typeof e.dpobj&&(this.asn1DP=e.dpobj)},ar.lang.extend(Cr.asn1.x509.DistributionPoint,Cr.asn1.ASN1Object),Cr.asn1.x509.OID=new function(e){this.atype2oidList={C:"2.5.4.6",O:"2.5.4.10",OU:"2.5.4.11",ST:"2.5.4.8",L:"2.5.4.7",CN:"2.5.4.3",SN:"2.5.4.4",DN:"2.5.4.49",DC:"0.9.2342.19200300.100.1.25"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",countryName:"2.5.4.6",organization:"2.5.4.10",organizationalUnit:"2.5.4.11",stateOrProvinceName:"2.5.4.8",locality:"2.5.4.7",commonName:"2.5.4.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4"},this.objCache={},this.name2obj=function(e){if("undefined"!=typeof this.objCache[e])return this.objCache[e];if("undefined"==typeof this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=this.name2oidList[e],n=new Cr.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=n,n},this.atype2obj=function(e){if("undefined"!=typeof this.objCache[e])return this.objCache[e];if("undefined"==typeof this.atype2oidList[e])throw"AttributeType name undefined: "+e;var t=this.atype2oidList[e],n=new Cr.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=n,n}},Cr.asn1.x509.OID.oid2name=function(e){var t=Cr.asn1.x509.OID.name2oidList;for(var n in t)if(t[n]==e)return n;return""},Cr.asn1.x509.OID.name2oid=function(e){var t=Cr.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},Cr.asn1.x509.X509Util=new function(){this.getPKCS8PubKeyPEMfromRSAKey=function(e){var t=null,n=Cr.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e.n),r=Cr.asn1.ASN1Util.integerToByteHex(e.e),i=new Cr.asn1.DERInteger({hex:n}),a=new Cr.asn1.DERInteger({hex:r}),s=new Cr.asn1.DERSequence({array:[i,a]}),o=s.getEncodedHex(),u=new Cr.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),l=new Cr.asn1.DERBitString({hex:"00"+o}),c=new Cr.asn1.DERSequence({array:[u,l]}),d=c.getEncodedHex(),t=Cr.asn1.ASN1Util.getPEMStringFromHex(d,"PUBLIC KEY");return t}},Cr.asn1.x509.X509Util.newCertPEM=function(e){var t=Cr.asn1.x509,n=new t.TBSCertificate;if(void 0===e.serial)throw"serial number undefined.";if(n.setSerialNumberByParam(e.serial),"string"!=typeof e.sigalg.name)throw"unproper signature algorithm name";if(n.setSignatureAlgByParam(e.sigalg),void 0===e.issuer)throw"issuer name undefined.";if(n.setIssuerByParam(e.issuer),void 0===e.notbefore)throw"notbefore undefined.";if(n.setNotBeforeByParam(e.notbefore),void 0===e.notafter)throw"notafter undefined.";if(n.setNotAfterByParam(e.notafter),void 0===e.subject)throw"subject name undefined.";if(n.setSubjectByParam(e.subject),void 0===e.sbjpubkey)throw"subject public key undefined.";if(n.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var r=0;r<e.ext.length;r++)for(key in e.ext[r])n.appendExtensionByName(key,e.ext[r][key]);if(void 0===e.cakey&&void 0===e.sighex)throw"param cakey and sighex undefined.";var i=null,a=null;return e.cakey&&(i=kr.getKey.apply(null,e.cakey),a=new t.Certificate({tbscertobj:n,prvkeyobj:i}),a.sign()),e.sighex&&(a=new t.Certificate({tbscertobj:n}),a.setSignatureHex(e.sighex)),a.getPEMString()},/*! asn1cms-1.0.2.js (c) 2013-2014 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.asn1&&Cr.asn1||(Cr.asn1={}),"undefined"!=typeof Cr.asn1.cms&&Cr.asn1.cms||(Cr.asn1.cms={}),Cr.asn1.cms.Attribute=function(e){Cr.asn1.cms.Attribute.superclass.constructor.call(this);this.getEncodedHex=function(){var e,t,n;e=new Cr.asn1.DERObjectIdentifier({oid:this.attrTypeOid}),t=new Cr.asn1.DERSet({array:this.valueList});try{t.getEncodedHex()}catch(e){throw"fail valueSet.getEncodedHex in Attribute(1)/"+e}n=new Cr.asn1.DERSequence({array:[e,t]});try{this.hTLV=n.getEncodedHex()}catch(e){throw"failed seq.getEncodedHex in Attribute(2)/"+e}return this.hTLV}},ar.lang.extend(Cr.asn1.cms.Attribute,Cr.asn1.ASN1Object),Cr.asn1.cms.ContentType=function(e){Cr.asn1.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var t=null;if("undefined"!=typeof e){var t=new Cr.asn1.DERObjectIdentifier(e);this.valueList=[t]}},ar.lang.extend(Cr.asn1.cms.ContentType,Cr.asn1.cms.Attribute),Cr.asn1.cms.MessageDigest=function(e){if(Cr.asn1.cms.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4","undefined"!=typeof e)if(e.eciObj instanceof Cr.asn1.cms.EncapsulatedContentInfo&&"string"==typeof e.hashAlg){var t=e.eciObj.eContentValueHex,n=e.hashAlg,r=Cr.crypto.Util.hashHex(t,n),i=new Cr.asn1.DEROctetString({hex:r});i.getEncodedHex(),this.valueList=[i]}else{var i=new Cr.asn1.DEROctetString(e);i.getEncodedHex(),this.valueList=[i]}},ar.lang.extend(Cr.asn1.cms.MessageDigest,Cr.asn1.cms.Attribute),Cr.asn1.cms.SigningTime=function(e){if(Cr.asn1.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5","undefined"!=typeof e){var t=new Cr.asn1.x509.Time(e);try{t.getEncodedHex()}catch(e){throw"SigningTime.getEncodedHex() failed/"+e}this.valueList=[t]}},ar.lang.extend(Cr.asn1.cms.SigningTime,Cr.asn1.cms.Attribute),Cr.asn1.cms.SigningCertificate=function(e){Cr.asn1.cms.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12";var t=Cr.asn1,n=Cr.asn1.cms,r=Cr.crypto;this.setCerts=function(e){for(var i=[],a=0;a<e.length;a++){var s=kr.getHexFromPEM(e[a]),o=r.Util.hashHex(s,"sha1"),u=new t.DEROctetString({hex:o});u.getEncodedHex();var l=new n.IssuerAndSerialNumber({cert:e[a]});l.getEncodedHex();var c=new t.DERSequence({array:[u,l]});c.getEncodedHex(),i.push(c)}var d=new t.DERSequence({array:i});d.getEncodedHex(),this.valueList=[d]},"undefined"!=typeof e&&"object"==typeof e.array&&this.setCerts(e.array)},ar.lang.extend(Cr.asn1.cms.SigningCertificate,Cr.asn1.cms.Attribute),Cr.asn1.cms.SigningCertificateV2=function(e){Cr.asn1.cms.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47";var t=Cr.asn1,n=Cr.asn1.x509,r=Cr.asn1.cms,i=Cr.crypto;if(this.setCerts=function(e,a){for(var s=[],o=0;o<e.length;o++){var u=kr.getHexFromPEM(e[o]),l=[];"sha256"!=a&&l.push(new n.AlgorithmIdentifier({name:a}));var c=i.Util.hashHex(u,a),d=new t.DEROctetString({hex:c});d.getEncodedHex(),l.push(d);var f=new r.IssuerAndSerialNumber({cert:e[o]});f.getEncodedHex(),l.push(f);var h=new t.DERSequence({array:l});h.getEncodedHex(),s.push(h)}var g=new t.DERSequence({array:s});g.getEncodedHex(),this.valueList=[g]},"undefined"!=typeof e&&"object"==typeof e.array){var a="sha256";"string"==typeof e.hashAlg&&(a=e.hashAlg),this.setCerts(e.array,a)}},ar.lang.extend(Cr.asn1.cms.SigningCertificateV2,Cr.asn1.cms.Attribute),Cr.asn1.cms.IssuerAndSerialNumber=function(e){Cr.asn1.cms.IssuerAndSerialNumber.superclass.constructor.call(this);var t=Cr.asn1,n=t.x509;this.setByCertPEM=function(e){var r=kr.getHexFromPEM(e),i=new $n;i.hex=r;var a=i.getIssuerHex();this.dIssuer=new n.X500Name,this.dIssuer.hTLV=a;var s=i.getSerialNumberHex();this.dSerial=new t.DERInteger({hex:s})},this.getEncodedHex=function(){var e=new Cr.asn1.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&("string"==typeof e&&e.indexOf("-----BEGIN ")!=-1&&this.setByCertPEM(e),e.issuer&&e.serial&&(e.issuer instanceof Cr.asn1.x509.X500Name?this.dIssuer=e.issuer:this.dIssuer=new Cr.asn1.x509.X500Name(e.issuer),e.serial instanceof Cr.asn1.DERInteger?this.dSerial=e.serial:this.dSerial=new Cr.asn1.DERInteger(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},ar.lang.extend(Cr.asn1.cms.IssuerAndSerialNumber,Cr.asn1.ASN1Object),Cr.asn1.cms.AttributeList=function(e){Cr.asn1.cms.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(e){e instanceof Cr.asn1.cms.Attribute&&this.list.push(e)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new Cr.asn1.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&"undefined"!=typeof e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},ar.lang.extend(Cr.asn1.cms.AttributeList,Cr.asn1.ASN1Object),Cr.asn1.cms.SignerInfo=function(e){Cr.asn1.cms.SignerInfo.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.cms,r=Cr.asn1.x509;this.dCMSVersion=new t.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new n.AttributeList,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new n.AttributeList,this.setSignerIdentifier=function(e){if("string"==typeof e&&e.indexOf("CERTIFICATE")!=-1&&e.indexOf("BEGIN")!=-1&&e.indexOf("END")!=-1){this.dSignerIdentifier=new n.IssuerAndSerialNumber({cert:e})}},this.setForContentAndHash=function(e){"undefined"!=typeof e&&(e.eciObj instanceof Cr.asn1.cms.EncapsulatedContentInfo&&(this.dSignedAttrs.add(new n.ContentType({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new n.MessageDigest({eciObj:e.eciObj,hashAlg:e.hashAlg}))),"undefined"!=typeof e.sdObj&&e.sdObj instanceof Cr.asn1.cms.SignedData&&e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)==-1&&e.sdObj.digestAlgNameList.push(e.hashAlg),"string"==typeof e.hashAlg&&(this.dDigestAlgorithm=new r.AlgorithmIdentifier({name:e.hashAlg})))},this.sign=function(e,n){this.dSigAlg=new r.AlgorithmIdentifier({name:n});var i=this.dSignedAttrs.getEncodedHex(),a=kr.getKey(e),s=new Cr.crypto.Signature({alg:n});s.init(a),s.updateHex(i);var o=s.sign();this.dSig=new t.DEROctetString({hex:o})},this.addUnsigned=function(e){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(e)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof Cr.asn1.cms.AttributeList&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var e=new t.DERTaggedObject({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),n=null;this.dUnsignedAttrs.length()>0&&(n=new t.DERTaggedObject({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var r=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];null!=n&&r.push(n);var i=new t.DERSequence({array:r});return this.hTLV=i.getEncodedHex(),this.hTLV}},ar.lang.extend(Cr.asn1.cms.SignerInfo,Cr.asn1.ASN1Object),Cr.asn1.cms.EncapsulatedContentInfo=function(e){Cr.asn1.cms.EncapsulatedContentInfo.superclass.constructor.call(this);var t=Cr.asn1;Cr.asn1.cms,Cr.asn1.x509;this.dEContentType=new t.DERObjectIdentifier({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(e){e.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new t.DERObjectIdentifier({oid:e}):this.dEContentType=new t.DERObjectIdentifier({name:e})},this.setContentValue=function(e){"undefined"!=typeof e&&("string"==typeof e.hex?this.eContentValueHex=e.hex:"string"==typeof e.str&&(this.eContentValueHex=vn(e.str)))},this.setContentValueHex=function(e){this.eContentValueHex=e},this.setContentValueStr=function(e){this.eContentValueHex=vn(e)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var e=new t.DEROctetString({hex:this.eContentValueHex});this.dEContent=new t.DERTaggedObject({obj:e,tag:"a0",explicit:!0});var n=[this.dEContentType];this.isDetached||n.push(this.dEContent);var r=new t.DERSequence({array:n});return this.hTLV=r.getEncodedHex(),this.hTLV}},ar.lang.extend(Cr.asn1.cms.EncapsulatedContentInfo,Cr.asn1.ASN1Object),Cr.asn1.cms.ContentInfo=function(e){Cr.asn1.cms.ContentInfo.superclass.constructor.call(this);var t=Cr.asn1,n=(Cr.asn1.cms,Cr.asn1.x509);this.dContentType=null,this.dContent=null,this.setContentType=function(e){"string"==typeof e&&(this.dContentType=n.OID.name2obj(e))},this.getEncodedHex=function(){var e=new t.DERTaggedObject({obj:this.dContent,tag:"a0",explicit:!0}),n=new t.DERSequence({array:[this.dContentType,e]});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&(e.type&&this.setContentType(e.type),e.obj&&e.obj instanceof t.ASN1Object&&(this.dContent=e.obj))},ar.lang.extend(Cr.asn1.cms.ContentInfo,Cr.asn1.ASN1Object),Cr.asn1.cms.SignedData=function(e){Cr.asn1.cms.SignedData.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.cms,r=Cr.asn1.x509;this.dCMSVersion=new t.DERInteger({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new n.EncapsulatedContentInfo,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new n.SignerInfo],this.addCertificatesByPEM=function(e){var n=kr.getHexFromPEM(e),r=new t.ASN1Object;r.hTLV=n,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var e=[],n=0;n<this.digestAlgNameList.length;n++){var i=this.digestAlgNameList[n],a=new r.AlgorithmIdentifier({name:i});e.push(a)}this.dDigestAlgs=new t.DERSet({array:e})}var s=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var o=new t.DERSet({array:this.certificateList});this.dCerts=new t.DERTaggedObject({obj:o,tag:"a0",explicit:!1})}null!=this.dCerts&&s.push(this.dCerts);var u=new t.DERSet({array:this.signerInfoList});s.push(u);var l=new t.DERSequence({array:s});return this.hTLV=l.getEncodedHex(),this.hTLV},this.getContentInfo=function(){this.getEncodedHex();var e=new n.ContentInfo({type:"signed-data",obj:this});return e},this.getContentInfoEncodedHex=function(){var e=this.getContentInfo(),t=e.getEncodedHex();return t},this.getPEM=function(){var e=this.getContentInfoEncodedHex(),n=t.ASN1Util.getPEMStringFromHex(e,"CMS");return n}},ar.lang.extend(Cr.asn1.cms.SignedData,Cr.asn1.ASN1Object),Cr.asn1.cms.CMSUtil=new function(){},Cr.asn1.cms.CMSUtil.newSignedData=function(e){var t=Cr.asn1.cms,n=Cr.asn1.cades,r=new t.SignedData;if(r.dEncapContentInfo.setContentValue(e.content),"object"==typeof e.certs)for(var i=0;i<e.certs.length;i++)r.addCertificatesByPEM(e.certs[i]);r.signerInfoList=[];for(var i=0;i<e.signerInfos.length;i++){var a=e.signerInfos[i],s=new t.SignerInfo;s.setSignerIdentifier(a.signerCert),s.setForContentAndHash({sdObj:r,eciObj:r.dEncapContentInfo,hashAlg:a.hashAlg});for(attrName in a.sAttr){var o=a.sAttr[attrName];if("SigningTime"==attrName){var u=new t.SigningTime(o);s.dSignedAttrs.add(u)}if("SigningCertificate"==attrName){var u=new t.SigningCertificate(o);s.dSignedAttrs.add(u)}if("SigningCertificateV2"==attrName){var u=new t.SigningCertificateV2(o);s.dSignedAttrs.add(u)}if("SignaturePolicyIdentifier"==attrName){var u=new n.SignaturePolicyIdentifier(o);s.dSignedAttrs.add(u)}}s.sign(a.signerPrvKey,a.sigAlg),r.signerInfoList.push(s)}return r},/*! asn1tsp-1.0.1.js (c) 2014 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.asn1&&Cr.asn1||(Cr.asn1={}),"undefined"!=typeof Cr.asn1.tsp&&Cr.asn1.tsp||(Cr.asn1.tsp={}),Cr.asn1.tsp.Accuracy=function(e){Cr.asn1.tsp.Accuracy.superclass.constructor.call(this);var t=Cr.asn1;this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var e=null,n=null,r=null,i=[];if(null!=this.seconds&&(e=new t.DERInteger({int:this.seconds}),i.push(e)),null!=this.millis){var a=new t.DERInteger({int:this.millis});n=new t.DERTaggedObject({obj:a,tag:"80",explicit:!1}),i.push(n)}if(null!=this.micros){var s=new t.DERInteger({int:this.micros});r=new t.DERTaggedObject({obj:s,tag:"81",explicit:!1}),i.push(r)}var o=new t.DERSequence({array:i});return this.hTLV=o.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&("number"==typeof e.seconds&&(this.seconds=e.seconds),"number"==typeof e.millis&&(this.millis=e.millis),"number"==typeof e.micros&&(this.micros=e.micros))},ar.lang.extend(Cr.asn1.tsp.Accuracy,Cr.asn1.ASN1Object),Cr.asn1.tsp.MessageImprint=function(e){Cr.asn1.tsp.MessageImprint.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.x509;this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSequence({array:[this.dHashAlg,this.dHashValue]});return e.getEncodedHex()},"undefined"!=typeof e&&("string"==typeof e.hashAlg&&(this.dHashAlg=new n.AlgorithmIdentifier({name:e.hashAlg})),"string"==typeof e.hashValue&&(this.dHashValue=new t.DEROctetString({hex:e.hashValue})))},ar.lang.extend(Cr.asn1.tsp.MessageImprint,Cr.asn1.ASN1Object),Cr.asn1.tsp.TimeStampReq=function(e){Cr.asn1.tsp.TimeStampReq.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.tsp;this.dVersion=new t.DERInteger({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(e){return e instanceof Cr.asn1.tsp.MessageImprint?void(this.dMessageImprint=e):void("object"==typeof e&&(this.dMessageImprint=new n.MessageImprint(e)))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var e=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&e.push(this.dPolicy),null!=this.dNonce&&e.push(this.dNonce),this.certReq&&e.push(new t.DERBoolean);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&("object"==typeof e.mi&&this.setMessageImprint(e.mi),"object"==typeof e.policy&&(this.dPolicy=new t.DERObjectIdentifier(e.policy)),"object"==typeof e.nonce&&(this.dNonce=new t.DERInteger(e.nonce)),"boolean"==typeof e.certreq&&(this.certReq=e.certreq))},ar.lang.extend(Cr.asn1.tsp.TimeStampReq,Cr.asn1.ASN1Object),Cr.asn1.tsp.TSTInfo=function(e){Cr.asn1.tsp.TSTInfo.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.x509,r=Cr.asn1.tsp;if(this.dVersion=new t.DERInteger({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(e.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(e.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(e.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new t.DERObjectIdentifier({oid:e.policy})}"undefined"!=typeof e.messageImprint&&(this.dMessageImprint=new r.MessageImprint(e.messageImprint)),"undefined"!=typeof e.serialNumber&&(this.dSerialNumber=new t.DERInteger(e.serialNumber)),"undefined"!=typeof e.genTime&&(this.dGenTime=new t.DERGeneralizedTime(e.genTime)),"undefind"!=typeof e.accuracy&&(this.dAccuracy=new r.Accuracy(e.accuracy)),"undefined"!=typeof e.ordering&&1==e.ordering&&(this.dOrdering=new t.DERBoolean),"undefined"!=typeof e.nonce&&(this.dNonce=new t.DERInteger(e.nonce)),"undefined"!=typeof e.tsa&&(this.dTsa=new n.X500Name(e.tsa))}},ar.lang.extend(Cr.asn1.tsp.TSTInfo,Cr.asn1.ASN1Object),Cr.asn1.tsp.TimeStampResp=function(e){Cr.asn1.tsp.TimeStampResp.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.tsp;this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dTST&&e.push(this.dTST);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&("object"==typeof e.status&&(this.dStatus=new n.PKIStatusInfo(e.status)),"undefined"!=typeof e.tst&&e.tst instanceof Cr.asn1.ASN1Object&&(this.dTST=e.tst.getContentInfo()))},ar.lang.extend(Cr.asn1.tsp.TimeStampResp,Cr.asn1.ASN1Object),Cr.asn1.tsp.PKIStatusInfo=function(e){Cr.asn1.tsp.PKIStatusInfo.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.tsp;this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dStatusString&&e.push(this.dStatusString),null!=this.dFailureInfo&&e.push(this.dFailureInfo);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&("object"==typeof e.status&&(this.dStatus=new n.PKIStatus(e.status)),"object"==typeof e.statstr&&(this.dStatusString=new n.PKIFreeText({array:e.statstr})),"object"==typeof e.failinfo&&(this.dFailureInfo=new n.PKIFailureInfo(e.failinfo)))},ar.lang.extend(Cr.asn1.tsp.PKIStatusInfo,Cr.asn1.ASN1Object),Cr.asn1.tsp.PKIStatus=function(e){Cr.asn1.tsp.PKIStatus.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.tsp;if(this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},"undefined"!=typeof e)if("undefined"!=typeof e.name){var r=n.PKIStatus.valueList;if("undefined"==typeof r[e.name])throw"name undefined: "+e.name;this.dStatus=new t.DERInteger({int:r[e.name]})}else this.dStatus=new t.DERInteger(e)},ar.lang.extend(Cr.asn1.tsp.PKIStatus,Cr.asn1.ASN1Object),Cr.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},Cr.asn1.tsp.PKIFreeText=function(e){Cr.asn1.tsp.PKIFreeText.superclass.constructor.call(this);var t=Cr.asn1;this.textList=[],this.getEncodedHex=function(){for(var e=[],n=0;n<this.textList.length;n++)e.push(new t.DERUTF8String({str:this.textList[n]}));var r=new t.DERSequence({array:e});return this.hTLV=r.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&"object"==typeof e.array&&(this.textList=e.array)},ar.lang.extend(Cr.asn1.tsp.PKIFreeText,Cr.asn1.ASN1Object),Cr.asn1.tsp.PKIFailureInfo=function(e){Cr.asn1.tsp.PKIFailureInfo.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.tsp;if(this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var e=new Number(this.value).toString(2),n=new t.DERBitString;return n.setByBinaryString(e),this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof e)if("string"==typeof e.name){var r=n.PKIFailureInfo.valueList;if("undefined"==typeof r[e.name])throw"name undefined: "+e.name;this.value=r[e.name]}else"number"==typeof e.int&&(this.value=e.int)},ar.lang.extend(Cr.asn1.tsp.PKIFailureInfo,Cr.asn1.ASN1Object),Cr.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},Cr.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},Cr.asn1.tsp.SimpleTSAAdapter=function(e){Cr.asn1.tsp.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,t){var n=Cr.crypto.Util.hashHex(e,t);this.params.tstInfo.messageImprint={hashAlg:t,hashValue:n},this.params.tstInfo.serialNumber={int:this.serial++};var r=Math.floor(1e9*Math.random());this.params.tstInfo.nonce={int:r};var i=Cr.asn1.tsp.TSPUtil.newTimeStampToken(this.params);return i.getContentInfoEncodedHex()},"undefined"!=typeof e&&(this.params=e)},ar.lang.extend(Cr.asn1.tsp.SimpleTSAAdapter,Cr.asn1.tsp.AbstractTSAAdapter),Cr.asn1.tsp.FixedTSAAdapter=function(e){Cr.asn1.tsp.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,t){var n=Cr.crypto.Util.hashHex(e,t);this.params.tstInfo.messageImprint={hashAlg:t,hashValue:n};var r=Cr.asn1.tsp.TSPUtil.newTimeStampToken(this.params);return r.getContentInfoEncodedHex()},"undefined"!=typeof e&&(this.params=e)},ar.lang.extend(Cr.asn1.tsp.FixedTSAAdapter,Cr.asn1.tsp.AbstractTSAAdapter),Cr.asn1.tsp.TSPUtil=new function(){},Cr.asn1.tsp.TSPUtil.newTimeStampToken=function(e){var t=Cr.asn1.cms,n=Cr.asn1.tsp,r=new t.SignedData,i=new n.TSTInfo(e.tstInfo),a=i.getEncodedHex();if(r.dEncapContentInfo.setContentValue({hex:a}),r.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof e.certs)for(var s=0;s<e.certs.length;s++)r.addCertificatesByPEM(e.certs[s]);var o=r.signerInfoList[0];o.setSignerIdentifier(e.signerCert),o.setForContentAndHash({sdObj:r,eciObj:r.dEncapContentInfo,hashAlg:e.hashAlg});var u=new t.SigningCertificate({array:[e.signerCert]});return o.dSignedAttrs.add(u),o.sign(e.signerPrvKey,e.sigAlg),r},Cr.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t={};t.certreq=!1;var n=Fr.getPosArrayOfChildren_AtObj(e,0);if(n.length<2)throw"TimeStampReq must have at least 2 items";var r=Fr.getHexOfTLV_AtObj(e,n[1]);t.mi=Cr.asn1.tsp.TSPUtil.parseMessageImprint(r);for(var i=2;i<n.length;i++){var a=n[i],s=e.substr(a,2);if("06"==s){var o=Fr.getHexOfV_AtObj(e,a);t.policy=Fr.hextooidstr(o)}"02"==s&&(t.nonce=Fr.getHexOfV_AtObj(e,a)),"01"==s&&(t.certreq=!0)}return t},Cr.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";var n=(Fr.getPosArrayOfChildren_AtObj(e,0),Fr.getDecendantIndexByNthList(e,0,[0,0])),r=Fr.getHexOfV_AtObj(e,n),i=Fr.hextooidstr(r),a=Cr.asn1.x509.OID.oid2name(i);if(""==a)throw"hashAlg name undefined: "+i;var s=a,o=Fr.getDecendantIndexByNthList(e,0,[1]);return t.hashAlg=s,t.hashValue=Fr.getHexOfV_AtObj(e,o),t},/*! asn1cades-1.0.0.js (c) 2013-2014 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.asn1&&Cr.asn1||(Cr.asn1={}),"undefined"!=typeof Cr.asn1.cades&&Cr.asn1.cades||(Cr.asn1.cades={}),Cr.asn1.cades.SignaturePolicyIdentifier=function(e){Cr.asn1.cades.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15";var t=Cr.asn1,n=Cr.asn1.cades;if("undefined"!=typeof e&&"string"==typeof e.oid&&"object"==typeof e.hash){var r=new t.DERObjectIdentifier({oid:e.oid}),i=new n.OtherHashAlgAndValue(e.hash),a=new t.DERSequence({array:[r,i]});this.valueList=[a]}},ar.lang.extend(Cr.asn1.cades.SignaturePolicyIdentifier,Cr.asn1.cms.Attribute),Cr.asn1.cades.OtherHashAlgAndValue=function(e){Cr.asn1.cades.OtherHashAlgAndValue.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.x509;this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.dAlg,this.dHash]});return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&"string"==typeof e.alg&&"string"==typeof e.hash&&(this.dAlg=new n.AlgorithmIdentifier({name:e.alg}),this.dHash=new t.DEROctetString({hex:e.hash}))},ar.lang.extend(Cr.asn1.cades.OtherHashAlgAndValue,Cr.asn1.ASN1Object),Cr.asn1.cades.SignatureTimeStamp=function(e){Cr.asn1.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null;var t=Cr.asn1;if("undefined"!=typeof e){if("undefined"!=typeof e.res)if("string"==typeof e.res&&e.res.match(/^[0-9A-Fa-f]+$/));else if(!(e.res instanceof Cr.asn1.ASN1Object))throw"res param shall be ASN1Object or hex string";if("undefined"!=typeof e.tst)if("string"==typeof e.tst&&e.tst.match(/^[0-9A-Fa-f]+$/)){var n=new t.ASN1Object;this.tstHex=e.tst,n.hTLV=this.tstHex,n.getEncodedHex(),this.valueList=[n]}else if(!(e.tst instanceof Cr.asn1.ASN1Object))throw"tst param shall be ASN1Object or hex string"}},ar.lang.extend(Cr.asn1.cades.SignatureTimeStamp,Cr.asn1.cms.Attribute),Cr.asn1.cades.CompleteCertificateRefs=function(e){Cr.asn1.cades.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21";var t=(Cr.asn1,Cr.asn1.cades);this.setByArray=function(e){this.valueList=[];for(var n=0;n<e.length;n++){var r=new t.OtherCertID(e[n]);this.valueList.push(r)}},"undefined"!=typeof e&&"object"==typeof e&&"number"==typeof e.length&&this.setByArray(e)},ar.lang.extend(Cr.asn1.cades.CompleteCertificateRefs,Cr.asn1.cms.Attribute),Cr.asn1.cades.OtherCertID=function(e){Cr.asn1.cades.OtherCertID.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.cms,r=Cr.asn1.cades;this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(e){this.dOtherCertHash=new r.OtherHash(e),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(e))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var e=[this.dOtherCertHash];null!=this.dIssuerSerial&&e.push(this.dIssuerSerial);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof e&&("string"==typeof e&&e.indexOf("-----BEGIN ")!=-1&&this.setByCertPEM(e),"object"==typeof e&&(e.hasis===!1&&(this.hasIssuerSerial=!1),"string"==typeof e.cert&&this.setByCertPEM(e.cert)))},ar.lang.extend(Cr.asn1.cades.OtherCertID,Cr.asn1.ASN1Object),Cr.asn1.cades.OtherHash=function(e){Cr.asn1.cades.OtherHash.superclass.constructor.call(this);var t=Cr.asn1,n=Cr.asn1.cades;if(this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(e){if(e.indexOf("-----BEGIN ")==-1)throw"certPEM not to seem PEM format";var t=$n.pemToHex(e),r=Cr.crypto.Util.hashHex(t,this.alg);this.dOtherHash=new n.OtherHashAlgAndValue({alg:this.alg,hash:r})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},"undefined"!=typeof e)if("string"==typeof e)if(e.indexOf("-----BEGIN ")!=-1)this.setByCertPEM(e);else{if(!e.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new t.DEROctetString({hex:e})}else"object"==typeof e&&("string"==typeof e.cert?("string"==typeof e.alg&&(this.alg=e.alg),this.setByCertPEM(e.cert)):this.dOtherHash=new n.OtherHashAlgAndValue(e))},ar.lang.extend(Cr.asn1.cades.OtherHash,Cr.asn1.ASN1Object),Cr.asn1.cades.CAdESUtil=new function(){},Cr.asn1.cades.CAdESUtil.addSigTS=function(e,t,n){},Cr.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=Cr.asn1,n=Cr.asn1.cms,r=Cr.asn1.cades.CAdESUtil,i={};if("06092a864886f70d010702"!=Fr.getDecendantHexTLVByNthList(e,0,[0]))throw"hex is not CMS SignedData";var a=Fr.getDecendantIndexByNthList(e,0,[1,0]),s=Fr.getPosArrayOfChildren_AtObj(e,a);if(s.length<4)throw"num of SignedData elem shall be 4 at least";var o=s.shift();i.version=Fr.getHexOfTLV_AtObj(e,o);var u=s.shift();i.algs=Fr.getHexOfTLV_AtObj(e,u);var l=s.shift();i.encapcontent=Fr.getHexOfTLV_AtObj(e,l),i.certs=null,i.revs=null,i.si=[];var c=s.shift();"a0"==e.substr(c,2)&&(i.certs=Fr.getHexOfTLV_AtObj(e,c),c=s.shift()),"a1"==e.substr(c,2)&&(i.revs=Fr.getHexOfTLV_AtObj(e,c),c=s.shift());var d=c;if("31"!=e.substr(d,2))throw"Can't find signerInfos";for(var f=Fr.getPosArrayOfChildren_AtObj(e,d),h=0;h<f.length;h++){var g=f[h],p=r.parseSignerInfoForAddingUnsigned(e,g,h);i.si[h]=p}var m=null;i.obj=new n.SignedData,m=new t.ASN1Object,m.hTLV=i.version,i.obj.dCMSVersion=m,m=new t.ASN1Object,m.hTLV=i.algs,i.obj.dDigestAlgs=m,m=new t.ASN1Object,m.hTLV=i.encapcontent,i.obj.dEncapContentInfo=m,m=new t.ASN1Object,m.hTLV=i.certs,i.obj.dCerts=m,i.obj.signerInfoList=[];for(var h=0;h<i.si.length;h++)i.obj.signerInfoList.push(i.si[h].obj);return i},Cr.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,n){var r=Cr.asn1,i=Cr.asn1.cms,a={},s=Fr.getPosArrayOfChildren_AtObj(e,t);if(6!=s.length)throw"not supported items for SignerInfo (!=6)";var o=s.shift();a.version=Fr.getHexOfTLV_AtObj(e,o);var u=s.shift();a.si=Fr.getHexOfTLV_AtObj(e,u);var l=s.shift();a.digalg=Fr.getHexOfTLV_AtObj(e,l);var c=s.shift();a.sattrs=Fr.getHexOfTLV_AtObj(e,c);var d=s.shift();a.sigalg=Fr.getHexOfTLV_AtObj(e,d);var f=s.shift();a.sig=Fr.getHexOfTLV_AtObj(e,f),a.sigval=Fr.getHexOfV_AtObj(e,f);var h=null;return a.obj=new i.SignerInfo,h=new r.ASN1Object,h.hTLV=a.version,a.obj.dCMSVersion=h,h=new r.ASN1Object,h.hTLV=a.si,a.obj.dSignerIdentifier=h,h=new r.ASN1Object,h.hTLV=a.digalg,a.obj.dDigestAlgorithm=h,h=new r.ASN1Object,h.hTLV=a.sattrs,a.obj.dSignedAttrs=h,h=new r.ASN1Object,h.hTLV=a.sigalg,a.obj.dSigAlg=h,h=new r.ASN1Object,h.hTLV=a.sig,a.obj.dSig=h,a.obj.dUnsignedAttrs=new i.AttributeList,a},/*! asn1csr-1.0.0.js (c) 2015 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr.asn1.csr&&Cr.asn1.csr||(Cr.asn1.csr={}),Cr.asn1.csr.CertificationRequest=function(e){Cr.asn1.csr.CertificationRequest.superclass.constructor.call(this);this.sign=function(e,t){null==this.prvKey&&(this.prvKey=t),this.asn1SignatureAlg=new Cr.asn1.x509.AlgorithmIdentifier({name:e}),sig=new Cr.crypto.Signature({alg:e}),sig.initSign(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new Cr.asn1.DERBitString({hex:"00"+this.hexSig});var n=new Cr.asn1.DERSequence({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=n.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){var e=Cr.asn1.ASN1Util.getPEMStringFromHex(this.getEncodedHex(),"CERTIFICATE REQUEST");return e},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},"undefined"!=typeof e&&"undefined"!=typeof e.csrinfo&&(this.asn1CSRInfo=e.csrinfo)},ar.lang.extend(Cr.asn1.csr.CertificationRequest,Cr.asn1.ASN1Object),Cr.asn1.csr.CertificationRequestInfo=function(e){Cr.asn1.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new Cr.asn1.DERInteger({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(e){this.asn1Subject=new Cr.asn1.x509.X500Name(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=kr.getKey(e);this.asn1SubjPKey=new Cr.asn1.x509.SubjectPublicKeyInfo(t)},this.getEncodedHex=function(){this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey);var e=new Cr.asn1.DERSequence({array:this.extensionsArray}),t=new Cr.asn1.DERTaggedObject({explicit:!1,tag:"a0",obj:e});this.asn1Array.push(t);var n=new Cr.asn1.DERSequence({array:this.asn1Array});return this.hTLV=n.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},ar.lang.extend(Cr.asn1.csr.CertificationRequestInfo,Cr.asn1.ASN1Object),Cr.asn1.csr.CSRUtil=new function(){},Cr.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=Cr.asn1.csr;if(void 0===e.subject)throw"parameter subject undefined";if(void 0===e.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===e.sigalg)throw"parameter sigalg undefined";if(void 0===e.sbjprvkey)throw"parameter sbjpubkey undefined";var n=new t.CertificationRequestInfo;n.setSubjectByParam(e.subject),n.setSubjectPublicKeyByGetKey(e.sbjpubkey);var r=new t.CertificationRequest({csrinfo:n}),i=kr.getKey(e.sbjprvkey);r.sign(e.sigalg,i);var a=r.getPEMString();return a};/*! base64x-1.1.7 (c) 2012-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
var Cr;"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.lang&&Cr.lang||(Cr.lang={}),Cr.lang.String=function(){};var Rr,Ir;"function"==typeof e?(Rr=function(t){return fn(new e(t,"utf8").toString("base64"))},Ir=function(t){return new e(hn(t),"base64").toString("utf8")}):(Rr=function(e){return gn(An(xn(e)))},Ir=function(e){return decodeURIComponent(wn(pn(e)))}),Cr.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},Cr.lang.String.isHex=function(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))},Cr.lang.String.isBase64=function(e){return e=e.replace(/\s+/g,""),!(!e.match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},Cr.lang.String.isBase64URL=function(e){return!e.match(/[+\/=]/)&&(e=hn(e),Cr.lang.String.isBase64(e))},Cr.lang.String.isIntegerArray=function(e){return e=e.replace(/\s+/g,""),!!e.match(/^\[[0-9,]+\]$/)};var Dr=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1};/*! crypto-1.1.8.js (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.crypto&&Cr.crypto||(Cr.crypto={}),Cr.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:sr.algo.MD5,sha1:sr.algo.SHA1,sha224:sr.algo.SHA224,sha256:sr.algo.SHA256,sha384:sr.algo.SHA384,sha512:sr.algo.SHA512,ripemd160:sr.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if("undefined"==typeof this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var a="0001",s="00"+r,o="",u=i-a.length-s.length,l=0;l<u;l+=2)o+="ff";var c=a+o+s;return c},this.hashString=function(e,t){var n=new Cr.crypto.MessageDigest({alg:t});return n.digestString(e)},this.hashHex=function(e,t){var n=new Cr.crypto.MessageDigest({alg:t});return n.digestHex(e)},this.sha1=function(e){var t=new Cr.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"});return t.digestString(e)},this.sha256=function(e){var t=new Cr.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return t.digestString(e)},this.sha256Hex=function(e){var t=new Cr.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return t.digestHex(e)},this.sha512=function(e){var t=new Cr.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return t.digestString(e)},this.sha512Hex=function(e){var t=new Cr.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return t.digestHex(e)},this.md5=function(e){var t=new Cr.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return t.digestString(e)},this.ripemd160=function(e){var t=new Cr.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return t.digestString(e)},this.getCryptoJSMDByName=function(e){}},Cr.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!=e&&void 0===t&&(t=Cr.crypto.Util.DEFAULTPROVIDER[e]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)!=-1&&"cryptojs"==t){try{this.md=Cr.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sr.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return e.toString(sr.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(":sha256:".indexOf(e)!=-1&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=Cr.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Cr.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(e=e.toLowerCase(),null==e&&(e="hmacsha1"),e=e.toLowerCase(),"hmac"!=e.substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=Cr.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)!=-1&&"cryptojs"==t){try{var r=Cr.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=sr.algo.HMAC.create(r,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=sr.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){var e=this.mac.finalize();return e.toString(sr.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=bn(e)),void(this.pass=sr.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;var t=null;if(void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=vn(e.utf8)),void 0!==e.rstr&&(t=bn(e.rstr)),void 0!==e.b64&&(t=i(e.b64)),void 0!==e.b64u&&(t=pn(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=sr.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=Cr.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Cr.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){this.algName.match(/^(.+)with(.+)$/)&&(this.mdAlgName=RegExp.$1.toLowerCase(),this.pubkeyAlgName=RegExp.$2.toLowerCase())},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw"provider not supported: "+t;if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new Cr.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e}this.init=function(e,t){var n=null;try{n=void 0===t?kr.getKey(e):kr.getKey(e,t)}catch(e){throw"init failed:"+e}if(n.isPrivate===!0)this.prvKey=n,this.state="SIGN";else{if(n.isPublic!==!0)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.initSign=function(e){"string"==typeof e.ecprvhex&&"string"==typeof e.eccurvename?(this.ecprvhex=e.ecprvhex,this.eccurvename=e.eccurvename):this.prvKey=e,this.state="SIGN"},this.initVerifyByPublicKey=function(e){"string"==typeof e.ecpubhex&&"string"==typeof e.eccurvename?(this.ecpubhex=e.ecpubhex,this.eccurvename=e.eccurvename):e instanceof Cr.crypto.ECDSA?this.pubKey=e:e instanceof yt&&(this.pubKey=e),this.state="VERIFY"},this.initVerifyByCertificatePEM=function(e){var t=new $n;t.readCertPEM(e),this.pubKey=t.subjectPublicKeyRSA,this.state="VERIFY"},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),"undefined"!=typeof this.ecprvhex&&"undefined"!=typeof this.eccurvename){var e=new Cr.crypto.ECDSA({curve:this.eccurvename});this.hSign=e.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof yt&&"rsaandmgf1"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof yt&&"rsa"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Cr.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Cr.crypto.DSA))throw"Signature: unsupported public key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),"undefined"!=typeof this.ecpubhex&&"undefined"!=typeof this.eccurvename){var t=new Cr.crypto.ECDSA({curve:this.eccurvename});return t.verifyHex(this.sHashHex,e,this.ecpubhex)}if(this.pubKey instanceof yt&&"rsaandmgf1"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof yt&&"rsa"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(this.pubKey instanceof Cr.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(this.pubKey instanceof Cr.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.initVerifyByPublicKey=function(e){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.algProvName},this.initVerifyByCertificatePEM=function(e){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.algProvName},this.initSign=function(e){throw"initSign(prvKey) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=Cr.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=new yt;t.readPrivateKeyFromPEMString(e.prvkeypem),this.initSign(t)}catch(e){throw"fatal error to load pem private key: "+e}}},Cr.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},/*! ecdsa-modified-1.0.5.js (c) Stephan Thomas, Kenji Urushima | github.com/bitcoinjs/bitcoinjs-lib/blob/master/LICENSE
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.crypto&&Cr.crypto||(Cr.crypto={}),Cr.crypto.ECDSA=function(e){var t="secp256r1",n=new ft;this.type="EC",this.getBigRandom=function(e){return new s(e.bitLength(),n).mod(e.subtract(s.ONE)).add(s.ONE)},this.setNamedCurve=function(e){this.ecparams=Cr.crypto.ECParameterDB.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),n=this.ecparams.G.multiply(t),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),a=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-a),o=("0000000000"+r.toString(16)).slice(-a),u=("0000000000"+i.toString(16)).slice(-a),l="04"+o+u;return this.setPrivateKeyHex(s),this.setPublicKeyHex(l),{ecprvhex:s,ecpubhex:l}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new s(t,16),r=this.ecparams.n,i=new s(e,16);do var a=this.getBigRandom(r),o=this.ecparams.G,u=o.multiply(a),l=u.getX().toBigInteger().mod(r);while(l.compareTo(s.ZERO)<=0);var c=a.modInverse(r).multiply(i.add(n.multiply(l))).mod(r);return Cr.crypto.ECDSA.biRSSigToASN1Sig(l,c)},this.sign=function(e,t){var n=t,r=this.ecparams.n,i=s.fromByteArrayUnsigned(e);do var a=this.getBigRandom(r),o=this.ecparams.G,u=o.multiply(a),l=u.getX().toBigInteger().mod(r);while(l.compareTo(s.ZERO)<=0);var c=a.modInverse(r).multiply(i.add(n.multiply(l))).mod(r);return this.serializeSig(l,c)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,n){var r,i,a=Cr.crypto.ECDSA.parseSigHex(t);r=a.r,i=a.s;var o;o=Lt.decodeFromHex(this.ecparams.curve,n);var u=new s(e,16);return this.verifyRaw(u,r,i,o)},this.verify=function(e,t,n){var r,i;if(Bitcoin.Util.isArray(t)){var a=this.parseSig(t);r=a.r,i=a.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";r=t.r,i=t.s}var o;if(n instanceof Lt)o=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";o=Lt.decodeFrom(this.ecparams.curve,n)}var u=s.fromByteArrayUnsigned(e);return this.verifyRaw(u,r,i,o)},this.verifyRaw=function(e,t,n,r){var i=this.ecparams.n,a=this.ecparams.G;if(t.compareTo(s.ONE)<0||t.compareTo(i)>=0)return!1;if(n.compareTo(s.ONE)<0||n.compareTo(i)>=0)return!1;var o=n.modInverse(i),u=e.multiply(o).mod(i),l=t.multiply(o).mod(i),c=a.multiply(u).add(r.multiply(l)),d=c.getX().toBigInteger().mod(i);return d.equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),i=i.concat(n),i.push(2),i.push(r.length),i=i.concat(r),i.unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(t=2,2!=e[t])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(t+=2+e[t+1],2!=e[t])throw new Error("Second element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);t+=2+e[t+1];var i=s.fromByteArrayUnsigned(n),a=s.fromByteArrayUnsigned(r);return{r:i,s:a}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n,r=s.fromByteArrayUnsigned(e.slice(1,33)).mod(n),i=s.fromByteArrayUnsigned(e.slice(33,65)).mod(n);return{r:r,s:i,i:t}},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName=t),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},Cr.crypto.ECDSA.parseSigHex=function(e){var t=Cr.crypto.ECDSA.parseSigHexInHexRS(e),n=new s(t.r,16),r=new s(t.s,16);return{r:n,s:r}},Cr.crypto.ECDSA.parseSigHexInHexRS=function(e){if("30"!=e.substr(0,2))throw"signature is not a ASN.1 sequence";var t=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=t.length)throw"number of signature ASN.1 sequence elements seem wrong";var n=t[0],r=t[1];if("02"!=e.substr(n,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=e.substr(r,2))throw"2nd item of sequene of signature is not ASN.1 integer";var i=Fr.getHexOfV_AtObj(e,n),a=Fr.getHexOfV_AtObj(e,r);return{r:i,s:a}},Cr.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=Cr.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if("00"==n.substr(0,2)&&n.length/2*8%128==8&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length/2*8%128==8&&(r=r.substr(2)),n.length/2*8%128!=0)throw"unknown ECDSA sig r length error";if(r.length/2*8%128!=0)throw"unknown ECDSA sig s length error";return n+r},Cr.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return Cr.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},Cr.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new s(e,16),r=new s(t,16);return Cr.crypto.ECDSA.biRSSigToASN1Sig(n,r)},Cr.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=new Cr.asn1.DERInteger({bigint:e}),r=new Cr.asn1.DERInteger({bigint:t}),i=new Cr.asn1.DERSequence({array:[n,r]});return i.getEncodedHex()},/*! ecparam-1.0.0.js (c) 2013 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.crypto&&Cr.crypto||(Cr.crypto={}),Cr.crypto.ECParameterDB=new function(){function e(e){return new s(e,16)}var t={},n={};this.getByName=function(e){var r=e;if("undefined"!=typeof n[r]&&(r=n[e]),"undefined"!=typeof t[r])return t[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,a,s,o,u,l,c,d,f,h,g){t[r]={};var p=e(a),m=e(s),y=e(o),v=e(u),S=e(l),_=new Xt(p,m,y),b=_.decodePointHex("04"+c+d);t[r].name=r,t[r].keylen=i,t[r].curve=_,t[r].G=b,t[r].n=v,t[r].h=S,t[r].oid=h,t[r].info=g;for(var E=0;E<f.length;E++)n[f[E]]=r}},Cr.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Cr.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Cr.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Cr.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Cr.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Cr.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Cr.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Cr.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Cr.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Cr.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),/*! dsa-modified-1.0.1.js (c) Recurity Labs GmbH, Kenji Urushimma | github.com/openpgpjs/openpgpjs/blob/master/LICENSE
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.crypto&&Cr.crypto||(Cr.crypto={}),Cr.crypto.DSA=function(){function e(e,t,n,i,a,o){var u=Cr.crypto.Util.hashString(t,e.toLowerCase()),u=u.substr(0,a.bitLength()/4),l=new s(u,16),c=r(s.ONE.add(s.ONE),a.subtract(s.ONE)),d=n.modPow(c,i).mod(a),f=c.modInverse(a).multiply(l.add(o.multiply(d))).mod(a),h=new Array;return h[0]=d,h[1]=f,h}function t(e){var t=openpgp.config.config.prefer_hash_algorithm;switch(Math.round(e.bitLength()/8)){case 20:return 2!=t&&t>11&&10!=t&&t<8?2:t;case 28:return t>11&&t<8?11:t;case 32:return t>10&&t<8?8:t;default:return util.print_debug("DSA select hash algorithm: returning null for an unknown length of q"),null}}function n(e,t,n,r,i,a,o,u){var l=Cr.crypto.Util.hashString(r,e.toLowerCase()),l=l.substr(0,a.bitLength()/4),c=new s(l,16);if(s.ZERO.compareTo(t)>0||t.compareTo(a)>0||s.ZERO.compareTo(n)>0||n.compareTo(a)>0)return util.print_error("invalid DSA Signature"),null;var d=n.modInverse(a),f=c.multiply(d).mod(a),h=t.multiply(d).mod(a),g=o.modPow(f,i).multiply(u.modPow(h,i)).mod(i).mod(a);return 0==g.compareTo(t)}function r(e,t){if(!(t.compareTo(e)<=0)){for(var n=t.subtract(e),r=i(n.bitLength());r>n;)r=i(n.bitLength());return e.add(r)}}function i(e){if(e<0)return null;var t=Math.floor((e+7)/8),n=a(t);return e%8>0&&(n=String.fromCharCode(Math.pow(2,e%8)-1&n.charCodeAt(0))+n.substring(1)),new s(u(n),16)}function a(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(o());return t}function o(){var e=new Uint32Array(1);return ir.crypto.getRandomValues(e),255&e[0]}function u(e){if(null==e)return"";for(var t,n=[],r=e.length,i=0;i<r;){for(t=e[i++].charCodeAt().toString(16);t.length<2;)t="0"+t;n.push(""+t)}return n.join("")}this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.setPrivate=function(e,t,n,r,i){this.isPrivate=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=i},this.setPublic=function(e,t,n,r){this.isPublic=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=null},this.signWithMessageHash=function(e){var t=this.p,n=this.q,i=this.g,a=(this.y,this.x),o=(e.substr(0,n.bitLength()/4),new s(e,16)),u=r(s.ONE.add(s.ONE),n.subtract(s.ONE)),l=i.modPow(u,t).mod(n),c=u.modInverse(n).multiply(o.add(a.multiply(l))).mod(n),d=Cr.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:l}},{int:{bigint:c}}]});return d},this.verifyWithMessageHash=function(e,t){var n=this.p,r=this.q,i=this.g,a=this.y,o=this.parseASN1Signature(t),u=o[0],l=o[1],e=e.substr(0,r.bitLength()/4),c=new s(e,16);if(s.ZERO.compareTo(u)>0||u.compareTo(r)>0||s.ZERO.compareTo(l)>0||l.compareTo(r)>0)throw"invalid DSA signature";var d=l.modInverse(r),f=c.multiply(d).mod(r),h=u.multiply(d).mod(r),g=i.modPow(f,n).multiply(a.modPow(h,n)).mod(n).mod(r);return 0==g.compareTo(u)},this.parseASN1Signature=function(e){try{var t=new s(Fr.getVbyList(e,0,[0],"02"),16),n=new s(Fr.getVbyList(e,0,[1],"02"),16);return[t,n]}catch(e){throw"malformed DSA signature"}},this.select_hash_algorithm=t,this.sign=e,this.verify=n,this.getRandomBigIntegerInRange=r,this.getRandomBigInteger=i,this.getRandomBytes=a};/*! pkcs5pkey-1.0.6.js (c) 2013-2014 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
var Or=function(){var e=function(e,t,r){return n(sr.AES,e,t,r)},t=function(e,t,r){return n(sr.TripleDES,e,t,r)},n=function(e,t,n,r){var i=sr.enc.Hex.parse(t),a=sr.enc.Hex.parse(n),s=sr.enc.Hex.parse(r),o={};o.key=a,o.iv=s,o.ciphertext=i;var u=e.decrypt(o,a,{iv:s});return sr.enc.Hex.stringify(u)},r=function(e,t,n){return s(sr.AES,e,t,n)},a=function(e,t,n){return s(sr.TripleDES,e,t,n)},s=function(e,t,n,r){var i=sr.enc.Hex.parse(t),a=sr.enc.Hex.parse(n),s=sr.enc.Hex.parse(r),o=e.encrypt(i,a,{iv:s}),u=sr.enc.Hex.parse(o.toString()),l=sr.enc.Base64.stringify(u);return l},o={"AES-256-CBC":{proc:e,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:t,eproc:a,keylen:24,ivlen:8}},u=function(e){return o[e].proc},l=function(e){var t=sr.lib.WordArray.random(e),n=sr.enc.Hex.stringify(t);return n},c=function(e){var t={};e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"))&&(t.cipher=RegExp.$1,t.ivsalt=RegExp.$2),e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"))&&(t.type=RegExp.$1);var n=-1,r=0;e.indexOf("\r\n\r\n")!=-1&&(n=e.indexOf("\r\n\r\n"),r=2),e.indexOf("\n\n")!=-1&&(n=e.indexOf("\n\n"),r=1);var i=e.indexOf("-----END");if(n!=-1&&i!=-1){var a=e.substring(n+2*r,i-r);a=a.replace(/\s+/g,""),t.data=a}return t},d=function(e,t,n){for(var r=n.substring(0,16),i=sr.enc.Hex.parse(r),a=sr.enc.Utf8.parse(t),s=o[e].keylen+o[e].ivlen,u="",l=null;;){var c=sr.algo.MD5.create();if(null!=l&&c.update(l),c.update(a),c.update(i),l=c.finalize(),u+=sr.enc.Hex.stringify(l),u.length>=2*s)break}var d={};return d.keyhex=u.substr(0,2*o[e].keylen),d.ivhex=u.substr(2*o[e].keylen,2*o[e].ivlen),d},f=function(e,t,n,r){var i=sr.enc.Base64.parse(e),a=sr.enc.Hex.stringify(i),s=o[t].proc,u=s(a,n,r);return u},h=function(e,t,n,r){var i=o[t].eproc,a=i(e,n,r);return a};return{version:"1.0.5",getHexFromPEM:function(e,t){var n=e;if(n.indexOf("BEGIN "+t)==-1)throw"can't find PEM header: "+t;n=n.replace("-----BEGIN "+t+"-----",""),n=n.replace("-----END "+t+"-----","");var r=n.replace(/\s+/g,""),a=i(r);return a},getDecryptedKeyHexByKeyIV:function(e,t,n,r){var i=u(t);return i(e,n,r)},parsePKCS5PEM:function(e){return c(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return d(e,t,n)},decryptKeyB64:function(e,t,n,r){return f(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=c(e),r=(n.type,n.cipher),i=n.ivsalt,a=n.data,s=d(r,t,i),o=s.keyhex,u=f(a,r,o,i);return u},getRSAKeyFromEncryptedPKCS5PEM:function(e,t){var n=this.getDecryptedKeyHex(e,t),r=new yt;return r.readPrivateKeyFromASN1HexString(n),r},getEryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r){var i="";if("undefined"!=typeof n&&null!=n||(n="AES-256-CBC"),"undefined"==typeof o[n])throw"PKCS5PKEY unsupported algorithm: "+n;if("undefined"==typeof r||null==r){var a=o[n].ivlen,s=l(a);r=s.toUpperCase()}var u=d(n,t,r),c=u.keyhex,f=h(e,n,c,r),g=f.replace(/(.{64})/g,"$1\r\n"),i="-----BEGIN RSA PRIVATE KEY-----\r\n";return i+="Proc-Type: 4,ENCRYPTED\r\n",i+="DEK-Info: "+n+","+r+"\r\n",i+="\r\n",i+=g,i+="\r\n-----END RSA PRIVATE KEY-----\r\n"},getEryptedPKCS5PEMFromRSAKey:function(e,t,n,r){var i=new Cr.asn1.DERInteger({int:0}),a=new Cr.asn1.DERInteger({bigint:e.n}),s=new Cr.asn1.DERInteger({int:e.e}),o=new Cr.asn1.DERInteger({bigint:e.d}),u=new Cr.asn1.DERInteger({bigint:e.p}),l=new Cr.asn1.DERInteger({bigint:e.q}),c=new Cr.asn1.DERInteger({bigint:e.dmp1}),d=new Cr.asn1.DERInteger({bigint:e.dmq1}),f=new Cr.asn1.DERInteger({bigint:e.coeff}),h=new Cr.asn1.DERSequence({array:[i,a,s,o,u,l,c,d,f]}),g=h.getEncodedHex();return this.getEryptedPKCS5PEMFromPrvKeyHex(g,t,n,r)},newEncryptedPKCS5PEM:function(e,t,n,r){"undefined"!=typeof t&&null!=t||(t=1024),"undefined"!=typeof n&&null!=n||(n="10001");var i=new yt;i.generate(t,n);var a=null;return a="undefined"==typeof r||null==r?this.getEncryptedPKCS5PEMFromRSAKey(pkey,e):this.getEncryptedPKCS5PEMFromRSAKey(pkey,e,r)},getRSAKeyFromPlainPKCS8PEM:function(e){if(e.match(/ENCRYPTED/))throw"pem shall be not ENCRYPTED";var t=this.getHexFromPEM(e,"PRIVATE KEY"),n=this.getRSAKeyFromPlainPKCS8Hex(t);return n},getRSAKeyFromPlainPKCS8Hex:function(e){var t=Fr.getPosArrayOfChildren_AtObj(e,0);if(3!=t.length)throw"outer DERSequence shall have 3 elements: "+t.length;var n=Fr.getHexOfTLV_AtObj(e,t[1]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+n;var n=Fr.getHexOfTLV_AtObj(e,t[1]),r=Fr.getHexOfTLV_AtObj(e,t[2]),i=Fr.getHexOfV_AtObj(r,0),a=new yt;return a.readPrivateKeyFromASN1HexString(i),a},parseHexOfEncryptedPKCS8:function(e){var t={},n=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=n.length)throw"malformed format: SEQUENCE(0).items != 2: "+n.length;t.ciphertext=Fr.getHexOfV_AtObj(e,n[1]);var r=Fr.getPosArrayOfChildren_AtObj(e,n[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=Fr.getHexOfV_AtObj(e,r[0]))throw"this only supports pkcs5PBES2";var i=Fr.getPosArrayOfChildren_AtObj(e,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+i.length;var a=Fr.getPosArrayOfChildren_AtObj(e,i[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length;if("2a864886f70d0307"!=Fr.getHexOfV_AtObj(e,a[0]))throw"this only supports TripleDES";t.encryptionSchemeAlg="TripleDES",t.encryptionSchemeIV=Fr.getHexOfV_AtObj(e,a[1]);var s=Fr.getPosArrayOfChildren_AtObj(e,i[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+s.length;if("2a864886f70d01050c"!=Fr.getHexOfV_AtObj(e,s[0]))throw"this only supports pkcs5PBKDF2";var o=Fr.getPosArrayOfChildren_AtObj(e,s[1]);if(o.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+o.length;t.pbkdf2Salt=Fr.getHexOfV_AtObj(e,o[0]);var u=Fr.getHexOfV_AtObj(e,o[1]);try{t.pbkdf2Iter=parseInt(u,16)}catch(e){throw"malformed format pbkdf2Iter: "+u}return t},getPBKDF2KeyHexFromParam:function(e,t){var n=sr.enc.Hex.parse(e.pbkdf2Salt),r=e.pbkdf2Iter,i=sr.PBKDF2(t,n,{keySize:6,iterations:r}),a=sr.enc.Hex.stringify(i);return a},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=this.getHexFromPEM(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Or.getPBKDF2KeyHexFromParam(r,t),a={};a.ciphertext=sr.enc.Hex.parse(r.ciphertext);var s=sr.enc.Hex.parse(i),o=sr.enc.Hex.parse(r.encryptionSchemeIV),u=sr.TripleDES.decrypt(a,s,{iv:o}),l=sr.enc.Hex.stringify(u);return l},getRSAKeyFromEncryptedPKCS8PEM:function(e,t){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t),r=this.getRSAKeyFromPlainPKCS8Hex(n);return r},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t),r=this.getKeyFromPlainPrivatePKCS8Hex(n);return r},parsePlainPrivatePKCS8Hex:function(e){var t={};if(t.algparam=null,"30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var n=Fr.getPosArrayOfChildren_AtObj(e,0);if(3!=n.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(n[1],2))throw"malformed PKCS8 private key(code:003)";var r=Fr.getPosArrayOfChildren_AtObj(e,n[1]);if(2!=r.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(r[0],2))throw"malformed PKCS8 private key(code:005)";if(t.algoid=Fr.getHexOfV_AtObj(e,r[0]),"06"==e.substr(r[1],2)&&(t.algparam=Fr.getHexOfV_AtObj(e,r[1])),"04"!=e.substr(n[2],2))throw"malformed PKCS8 private key(code:006)";return t.keyidx=Fr.getStartPosOfV_AtObj(e,n[2]),t},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=this.getHexFromPEM(e,"PRIVATE KEY"),n=this.getKeyFromPlainPrivatePKCS8Hex(t);return n},getKeyFromPlainPrivatePKCS8Hex:function(e){var t=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==t.algoid){this.parsePrivateRawRSAKeyHexAtObj(e,t);var n=t.key,r=new yt;return r.setPrivateEx(n.n,n.e,n.d,n.p,n.q,n.dp,n.dq,n.co),r}if("2a8648ce3d0201"==t.algoid){if(this.parsePrivateRawECKeyHexAtObj(e,t),void 0===Cr.crypto.OID.oidhex2name[t.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+t.algparam;var i=Cr.crypto.OID.oidhex2name[t.algparam],r=new Cr.crypto.ECDSA({curve:i,prv:t.key});return r}throw"unsupported private key algorithm"},getRSAKeyFromPublicPKCS8PEM:function(e){var t=this.getHexFromPEM(e,"PUBLIC KEY"),n=this.getRSAKeyFromPublicPKCS8Hex(t);return n},getKeyFromPublicPKCS8PEM:function(e){var t=this.getHexFromPEM(e,"PUBLIC KEY"),n=this.getKeyFromPublicPKCS8Hex(t);return n},getKeyFromPublicPKCS8Hex:function(e){var t=this.parsePublicPKCS8Hex(e);if("2a864886f70d010101"==t.algoid){var n=this.parsePublicRawRSAKeyHex(t.key),r=new yt;return r.setPublic(n.n,n.e),r}if("2a8648ce3d0201"==t.algoid){if(void 0===Cr.crypto.OID.oidhex2name[t.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+t.algparam;var i=Cr.crypto.OID.oidhex2name[t.algparam],r=new Cr.crypto.ECDSA({curve:i,pub:t.key});return r}throw"unsupported public key algorithm"},parsePublicRawRSAKeyHex:function(e){var t={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var n=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=n.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(n[0],2))throw"malformed RSA key(code:003)";if(t.n=Fr.getHexOfV_AtObj(e,n[0]),"02"!=e.substr(n[1],2))throw"malformed RSA key(code:004)";return t.e=Fr.getHexOfV_AtObj(e,n[1]),t},parsePrivateRawRSAKeyHexAtObj:function(e,t){var n=t.keyidx;if("30"!=e.substr(n,2))throw"malformed RSA private key(code:001)";var r=Fr.getPosArrayOfChildren_AtObj(e,n);if(9!=r.length)throw"malformed RSA private key(code:002)";t.key={},t.key.n=Fr.getHexOfV_AtObj(e,r[1]),t.key.e=Fr.getHexOfV_AtObj(e,r[2]),t.key.d=Fr.getHexOfV_AtObj(e,r[3]),t.key.p=Fr.getHexOfV_AtObj(e,r[4]),t.key.q=Fr.getHexOfV_AtObj(e,r[5]),t.key.dp=Fr.getHexOfV_AtObj(e,r[6]),t.key.dq=Fr.getHexOfV_AtObj(e,r[7]),t.key.co=Fr.getHexOfV_AtObj(e,r[8])},parsePrivateRawECKeyHexAtObj:function(e,t){var n=t.keyidx;if("30"!=e.substr(n,2))throw"malformed ECC private key(code:001)";var r=Fr.getPosArrayOfChildren_AtObj(e,n);if(3!=r.length)throw"malformed ECC private key(code:002)";if("04"!=e.substr(r[1],2))throw"malformed ECC private key(code:003)";t.key=Fr.getHexOfV_AtObj(e,r[1])},parsePublicPKCS8Hex:function(e){var t={};t.algparam=null;var n=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=n.length)throw"outer DERSequence shall have 2 elements: "+n.length;var r=n[0];if("30"!=e.substr(r,2))throw"malformed PKCS8 public key(code:001)";var i=Fr.getPosArrayOfChildren_AtObj(e,r);if(2!=i.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(i[0],2))throw"malformed PKCS8 public key(code:003)";if(t.algoid=Fr.getHexOfV_AtObj(e,i[0]),"06"==e.substr(i[1],2)&&(t.algparam=Fr.getHexOfV_AtObj(e,i[1])),"03"!=e.substr(n[1],2))throw"malformed PKCS8 public key(code:004)";return t.key=Fr.getHexOfV_AtObj(e,n[1]).substr(2),t},getRSAKeyFromPublicPKCS8Hex:function(e){var t=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=t.length)throw"outer DERSequence shall have 2 elements: "+t.length;var n=Fr.getHexOfTLV_AtObj(e,t[0]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmId is not rsaEncryption";if("03"!=e.substr(t[1],2))throw"PKCS8 Public Key is not BITSTRING encapslated.";var r=Fr.getStartPosOfV_AtObj(e,t[1])+2;if("30"!=e.substr(r,2))throw"PKCS8 Public Key is not SEQUENCE.";var i=Fr.getPosArrayOfChildren_AtObj(e,r);if(2!=i.length)throw"inner DERSequence shall have 2 elements: "+i.length;if("02"!=e.substr(i[0],2))throw"N is not ASN.1 INTEGER";if("02"!=e.substr(i[1],2))throw"E is not ASN.1 INTEGER";var a=Fr.getHexOfV_AtObj(e,i[0]),s=Fr.getHexOfV_AtObj(e,i[1]),o=new yt;return o.setPublic(a,s),o}}}(),kr=function(){var e=function(e,t,n){return r(sr.AES,e,t,n)},t=function(e,t,n){return r(sr.TripleDES,e,t,n)},n=function(e,t,n){return r(sr.DES,e,t,n)},r=function(e,t,n,r){var i=sr.enc.Hex.parse(t),a=sr.enc.Hex.parse(n),s=sr.enc.Hex.parse(r),o={};o.key=a,o.iv=s,o.ciphertext=i;var u=e.decrypt(o,a,{iv:s});return sr.enc.Hex.stringify(u)},a=function(e,t,n){return l(sr.AES,e,t,n)},o=function(e,t,n){return l(sr.TripleDES,e,t,n)},u=function(e,t,n){return l(sr.DES,e,t,n)},l=function(e,t,n,r){var i=sr.enc.Hex.parse(t),a=sr.enc.Hex.parse(n),s=sr.enc.Hex.parse(r),o=e.encrypt(i,a,{iv:s}),u=sr.enc.Hex.parse(o.toString()),l=sr.enc.Base64.stringify(u);return l},c={"AES-256-CBC":{proc:e,eproc:a,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:a,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:a,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:t,eproc:o,keylen:24,ivlen:8},"DES-CBC":{proc:n,eproc:u,keylen:8,ivlen:8}},d=function(e){return c[e].proc},f=function(e){var t=sr.lib.WordArray.random(e),n=sr.enc.Hex.stringify(t);return n},h=function(e){var t={};e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"))&&(t.cipher=RegExp.$1,t.ivsalt=RegExp.$2),e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"))&&(t.type=RegExp.$1);var n=-1,r=0;e.indexOf("\r\n\r\n")!=-1&&(n=e.indexOf("\r\n\r\n"),r=2),e.indexOf("\n\n")!=-1&&(n=e.indexOf("\n\n"),r=1);var i=e.indexOf("-----END");if(n!=-1&&i!=-1){var a=e.substring(n+2*r,i-r);a=a.replace(/\s+/g,""),t.data=a}return t},g=function(e,t,n){for(var r=n.substring(0,16),i=sr.enc.Hex.parse(r),a=sr.enc.Utf8.parse(t),s=c[e].keylen+c[e].ivlen,o="",u=null;;){var l=sr.algo.MD5.create();if(null!=u&&l.update(u),l.update(a),l.update(i),u=l.finalize(),o+=sr.enc.Hex.stringify(u),o.length>=2*s)break}var d={};return d.keyhex=o.substr(0,2*c[e].keylen),d.ivhex=o.substr(2*c[e].keylen,2*c[e].ivlen),d},p=function(e,t,n,r){var i=sr.enc.Base64.parse(e),a=sr.enc.Hex.stringify(i),s=c[t].proc,o=s(a,n,r);return o},m=function(e,t,n,r){var i=c[t].eproc,a=i(e,n,r);return a};return{version:"1.0.0",getHexFromPEM:function(e,t){var n=e;if(n.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+t;"string"==typeof t&&""!=t?(n=n.replace("-----BEGIN "+t+"-----",""),n=n.replace("-----END "+t+"-----","")):(n=n.replace(/-----BEGIN [^-]+-----/,""),n=n.replace(/-----END [^-]+-----/,""));var r=n.replace(/\s+/g,""),a=i(r);return a},getDecryptedKeyHexByKeyIV:function(e,t,n,r){var i=d(t);return i(e,n,r)},parsePKCS5PEM:function(e){return h(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return g(e,t,n)},decryptKeyB64:function(e,t,n,r){return p(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=h(e),r=(n.type,n.cipher),i=n.ivsalt,a=n.data,s=g(r,t,i),o=s.keyhex,u=p(a,r,o,i);return u},getRSAKeyFromEncryptedPKCS5PEM:function(e,t){var n=this.getDecryptedKeyHex(e,t),r=new yt;return r.readPrivateKeyFromASN1HexString(n),r},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,i){var a="";if("undefined"!=typeof r&&null!=r||(r="AES-256-CBC"),"undefined"==typeof c[r])throw"KEYUTIL unsupported algorithm: "+r;if("undefined"==typeof i||null==i){var s=c[r].ivlen,o=f(s);i=o.toUpperCase()}var u=g(r,n,i),l=u.keyhex,d=m(t,r,l,i),h=d.replace(/(.{64})/g,"$1\r\n"),a="-----BEGIN "+e+" PRIVATE KEY-----\r\n";return a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+i+"\r\n",a+="\r\n",a+=h,a+="\r\n-----END "+e+" PRIVATE KEY-----\r\n"},getEncryptedPKCS5PEMFromRSAKey:function(e,t,n,r){var i=new Cr.asn1.DERInteger({int:0}),a=new Cr.asn1.DERInteger({bigint:e.n}),s=new Cr.asn1.DERInteger({int:e.e}),o=new Cr.asn1.DERInteger({bigint:e.d}),u=new Cr.asn1.DERInteger({bigint:e.p}),l=new Cr.asn1.DERInteger({bigint:e.q}),c=new Cr.asn1.DERInteger({bigint:e.dmp1}),d=new Cr.asn1.DERInteger({bigint:e.dmq1}),f=new Cr.asn1.DERInteger({bigint:e.coeff}),h=new Cr.asn1.DERSequence({array:[i,a,s,o,u,l,c,d,f]}),g=h.getEncodedHex();return this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",g,t,n,r)},newEncryptedPKCS5PEM:function(e,t,n,r){"undefined"!=typeof t&&null!=t||(t=1024),"undefined"!=typeof n&&null!=n||(n="10001");var i=new yt;i.generate(t,n);var a=null;return a="undefined"==typeof r||null==r?this.getEncryptedPKCS5PEMFromRSAKey(i,e):this.getEncryptedPKCS5PEMFromRSAKey(i,e,r)},getRSAKeyFromPlainPKCS8PEM:function(e){if(e.match(/ENCRYPTED/))throw"pem shall be not ENCRYPTED";var t=this.getHexFromPEM(e,"PRIVATE KEY"),n=this.getRSAKeyFromPlainPKCS8Hex(t);return n},getRSAKeyFromPlainPKCS8Hex:function(e){var t=Fr.getPosArrayOfChildren_AtObj(e,0);if(3!=t.length)throw"outer DERSequence shall have 3 elements: "+t.length;var n=Fr.getHexOfTLV_AtObj(e,t[1]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+n;var n=Fr.getHexOfTLV_AtObj(e,t[1]),r=Fr.getHexOfTLV_AtObj(e,t[2]),i=Fr.getHexOfV_AtObj(r,0),a=new yt;return a.readPrivateKeyFromASN1HexString(i),a},parseHexOfEncryptedPKCS8:function(e){var t={},n=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=n.length)throw"malformed format: SEQUENCE(0).items != 2: "+n.length;t.ciphertext=Fr.getHexOfV_AtObj(e,n[1]);var r=Fr.getPosArrayOfChildren_AtObj(e,n[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=Fr.getHexOfV_AtObj(e,r[0]))throw"this only supports pkcs5PBES2";var i=Fr.getPosArrayOfChildren_AtObj(e,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+i.length;var a=Fr.getPosArrayOfChildren_AtObj(e,i[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length;if("2a864886f70d0307"!=Fr.getHexOfV_AtObj(e,a[0]))throw"this only supports TripleDES";t.encryptionSchemeAlg="TripleDES",t.encryptionSchemeIV=Fr.getHexOfV_AtObj(e,a[1]);var s=Fr.getPosArrayOfChildren_AtObj(e,i[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+s.length;if("2a864886f70d01050c"!=Fr.getHexOfV_AtObj(e,s[0]))throw"this only supports pkcs5PBKDF2";var o=Fr.getPosArrayOfChildren_AtObj(e,s[1]);if(o.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+o.length;t.pbkdf2Salt=Fr.getHexOfV_AtObj(e,o[0]);var u=Fr.getHexOfV_AtObj(e,o[1]);try{t.pbkdf2Iter=parseInt(u,16)}catch(e){throw"malformed format pbkdf2Iter: "+u}return t},getPBKDF2KeyHexFromParam:function(e,t){var n=sr.enc.Hex.parse(e.pbkdf2Salt),r=e.pbkdf2Iter,i=sr.PBKDF2(t,n,{keySize:6,iterations:r}),a=sr.enc.Hex.stringify(i);return a},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=this.getHexFromPEM(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=kr.getPBKDF2KeyHexFromParam(r,t),a={};a.ciphertext=sr.enc.Hex.parse(r.ciphertext);var s=sr.enc.Hex.parse(i),o=sr.enc.Hex.parse(r.encryptionSchemeIV),u=sr.TripleDES.decrypt(a,s,{iv:o}),l=sr.enc.Hex.stringify(u);return l},getRSAKeyFromEncryptedPKCS8PEM:function(e,t){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t),r=this.getRSAKeyFromPlainPKCS8Hex(n);return r},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t),r=this.getKeyFromPlainPrivatePKCS8Hex(n);return r},parsePlainPrivatePKCS8Hex:function(e){var t={};if(t.algparam=null,"30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var n=Fr.getPosArrayOfChildren_AtObj(e,0);if(3!=n.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(n[1],2))throw"malformed PKCS8 private key(code:003)";var r=Fr.getPosArrayOfChildren_AtObj(e,n[1]);if(2!=r.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(r[0],2))throw"malformed PKCS8 private key(code:005)";if(t.algoid=Fr.getHexOfV_AtObj(e,r[0]),"06"==e.substr(r[1],2)&&(t.algparam=Fr.getHexOfV_AtObj(e,r[1])),"04"!=e.substr(n[2],2))throw"malformed PKCS8 private key(code:006)";return t.keyidx=Fr.getStartPosOfV_AtObj(e,n[2]),t},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=this.getHexFromPEM(e,"PRIVATE KEY"),n=this.getKeyFromPlainPrivatePKCS8Hex(t);return n},getKeyFromPlainPrivatePKCS8Hex:function(e){var t=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==t.algoid){this.parsePrivateRawRSAKeyHexAtObj(e,t);var n=t.key,r=new yt;return r.setPrivateEx(n.n,n.e,n.d,n.p,n.q,n.dp,n.dq,n.co),r}if("2a8648ce3d0201"==t.algoid){if(this.parsePrivateRawECKeyHexAtObj(e,t),void 0===Cr.crypto.OID.oidhex2name[t.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+t.algparam;var i=Cr.crypto.OID.oidhex2name[t.algparam],r=new Cr.crypto.ECDSA({curve:i});return r.setPublicKeyHex(t.pubkey),r.setPrivateKeyHex(t.key),r.isPublic=!1,r}if("2a8648ce380401"==t.algoid){var a=Fr.getVbyList(e,0,[1,1,0],"02"),o=Fr.getVbyList(e,0,[1,1,1],"02"),u=Fr.getVbyList(e,0,[1,1,2],"02"),l=Fr.getVbyList(e,0,[2,0],"02"),c=new s(a,16),d=new s(o,16),f=new s(u,16),h=new s(l,16),r=new Cr.crypto.DSA;return r.setPrivate(c,d,f,null,h),r}throw"unsupported private key algorithm"},getRSAKeyFromPublicPKCS8PEM:function(e){var t=this.getHexFromPEM(e,"PUBLIC KEY"),n=this.getRSAKeyFromPublicPKCS8Hex(t);return n},getKeyFromPublicPKCS8PEM:function(e){var t=this.getHexFromPEM(e,"PUBLIC KEY"),n=this.getKeyFromPublicPKCS8Hex(t);return n},getKeyFromPublicPKCS8Hex:function(e){var t=this.parsePublicPKCS8Hex(e);if("2a864886f70d010101"==t.algoid){var n=this.parsePublicRawRSAKeyHex(t.key),r=new yt;return r.setPublic(n.n,n.e),r}if("2a8648ce3d0201"==t.algoid){if(void 0===Cr.crypto.OID.oidhex2name[t.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+t.algparam;var i=Cr.crypto.OID.oidhex2name[t.algparam],r=new Cr.crypto.ECDSA({curve:i,pub:t.key});return r}if("2a8648ce380401"==t.algoid){var a=t.algparam,o=Fr.getHexOfV_AtObj(t.key,0),r=new Cr.crypto.DSA;return r.setPublic(new s(a.p,16),new s(a.q,16),new s(a.g,16),new s(o,16)),r}throw"unsupported public key algorithm"},parsePublicRawRSAKeyHex:function(e){var t={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var n=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=n.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(n[0],2))throw"malformed RSA key(code:003)";if(t.n=Fr.getHexOfV_AtObj(e,n[0]),"02"!=e.substr(n[1],2))throw"malformed RSA key(code:004)";return t.e=Fr.getHexOfV_AtObj(e,n[1]),t},parsePrivateRawRSAKeyHexAtObj:function(e,t){var n=t.keyidx;if("30"!=e.substr(n,2))throw"malformed RSA private key(code:001)";var r=Fr.getPosArrayOfChildren_AtObj(e,n);if(9!=r.length)throw"malformed RSA private key(code:002)";t.key={},t.key.n=Fr.getHexOfV_AtObj(e,r[1]),t.key.e=Fr.getHexOfV_AtObj(e,r[2]),t.key.d=Fr.getHexOfV_AtObj(e,r[3]),t.key.p=Fr.getHexOfV_AtObj(e,r[4]),t.key.q=Fr.getHexOfV_AtObj(e,r[5]),t.key.dp=Fr.getHexOfV_AtObj(e,r[6]),t.key.dq=Fr.getHexOfV_AtObj(e,r[7]),t.key.co=Fr.getHexOfV_AtObj(e,r[8])},parsePrivateRawECKeyHexAtObj:function(e,t){var n=t.keyidx,r=Fr.getVbyList(e,n,[1],"04"),i=Fr.getVbyList(e,n,[2,0],"03").substr(2);t.key=r,t.pubkey=i},parsePublicPKCS8Hex:function(e){var t={};t.algparam=null;var n=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=n.length)throw"outer DERSequence shall have 2 elements: "+n.length;var r=n[0];if("30"!=e.substr(r,2))throw"malformed PKCS8 public key(code:001)";var i=Fr.getPosArrayOfChildren_AtObj(e,r);if(2!=i.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(i[0],2))throw"malformed PKCS8 public key(code:003)";if(t.algoid=Fr.getHexOfV_AtObj(e,i[0]),"06"==e.substr(i[1],2)?t.algparam=Fr.getHexOfV_AtObj(e,i[1]):"30"==e.substr(i[1],2)&&(t.algparam={},t.algparam.p=Fr.getVbyList(e,i[1],[0],"02"),t.algparam.q=Fr.getVbyList(e,i[1],[1],"02"),t.algparam.g=Fr.getVbyList(e,i[1],[2],"02")),"03"!=e.substr(n[1],2))throw"malformed PKCS8 public key(code:004)";return t.key=Fr.getHexOfV_AtObj(e,n[1]).substr(2),t},getRSAKeyFromPublicPKCS8Hex:function(e){var t=Fr.getPosArrayOfChildren_AtObj(e,0);if(2!=t.length)throw"outer DERSequence shall have 2 elements: "+t.length;var n=Fr.getHexOfTLV_AtObj(e,t[0]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmId is not rsaEncryption";if("03"!=e.substr(t[1],2))throw"PKCS8 Public Key is not BITSTRING encapslated.";var r=Fr.getStartPosOfV_AtObj(e,t[1])+2;if("30"!=e.substr(r,2))throw"PKCS8 Public Key is not SEQUENCE.";var i=Fr.getPosArrayOfChildren_AtObj(e,r);if(2!=i.length)throw"inner DERSequence shall have 2 elements: "+i.length;if("02"!=e.substr(i[0],2))throw"N is not ASN.1 INTEGER";if("02"!=e.substr(i[1],2))throw"E is not ASN.1 INTEGER";var a=Fr.getHexOfV_AtObj(e,i[0]),s=Fr.getHexOfV_AtObj(e,i[1]),o=new yt;return o.setPublic(a,s),o}}}();kr.getKey=function(e,t,n){if("undefined"!=typeof yt&&e instanceof yt)return e;if("undefined"!=typeof Cr.crypto.ECDSA&&e instanceof Cr.crypto.ECDSA)return e;if("undefined"!=typeof Cr.crypto.DSA&&e instanceof Cr.crypto.DSA)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new Cr.crypto.ECDSA({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new Cr.crypto.ECDSA({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d){var r=new yt;return r.setPublic(e.n,e.e),r}if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi){var r=new yt;return r.setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),r}if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p){var r=new yt;return r.setPrivate(e.n,e.e,e.d),r}if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x){var r=new Cr.crypto.DSA;return r.setPublic(e.p,e.q,e.g,e.y),r}if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x){var r=new Cr.crypto.DSA;return r.setPrivate(e.p,e.q,e.g,e.y,e.x),r}if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d){var r=new yt;return r.setPublic(pn(e.n),pn(e.e)),r}if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi){var r=new yt;return r.setPrivateEx(pn(e.n),pn(e.e),pn(e.d),pn(e.p),pn(e.q),pn(e.dp),pn(e.dq),pn(e.qi)),r}if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d){var r=new yt;return r.setPrivate(pn(e.n),pn(e.e),pn(e.d)),r}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var i=new Cr.crypto.ECDSA({curve:e.crv}),a=i.ecparams.keylen/4,o=("0000000000"+pn(e.x)).slice(-a),u=("0000000000"+pn(e.y)).slice(-a),l="04"+o+u;return i.setPublicKeyHex(l),i}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){var i=new Cr.crypto.ECDSA({curve:e.crv}),a=i.ecparams.keylen/4,o=("0000000000"+pn(e.x)).slice(-a),u=("0000000000"+pn(e.y)).slice(-a),l="04"+o+u,c=("0000000000"+pn(e.d)).slice(-a);return i.setPublicKeyHex(l),i.setPrivateKeyHex(c),i}if(e.indexOf("-END CERTIFICATE-",0)!=-1||e.indexOf("-END X509 CERTIFICATE-",0)!=-1||e.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return $n.getPublicKeyFromCertPEM(e);if("pkcs8pub"===n)return kr.getKeyFromPublicPKCS8Hex(e);if(e.indexOf("-END PUBLIC KEY-")!=-1)return kr.getKeyFromPublicPKCS8PEM(e);if("pkcs5prv"===n){var r=new yt;return r.readPrivateKeyFromASN1HexString(e),r}if("pkcs5prv"===n){var r=new yt;return r.readPrivateKeyFromASN1HexString(e),r}if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var d=kr.getHexFromPEM(e,"RSA PRIVATE KEY");return kr.getKey(d,null,"pkcs5prv")}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var f=this.getHexFromPEM(e,"DSA PRIVATE KEY"),h=Fr.getVbyList(f,0,[1],"02"),g=Fr.getVbyList(f,0,[2],"02"),p=Fr.getVbyList(f,0,[3],"02"),m=Fr.getVbyList(f,0,[4],"02"),y=Fr.getVbyList(f,0,[5],"02"),r=new Cr.crypto.DSA;return r.setPrivate(new s(h,16),new s(g,16),new s(p,16),new s(m,16),new s(y,16)),r}if(e.indexOf("-END PRIVATE KEY-")!=-1)return kr.getKeyFromPlainPrivatePKCS8PEM(e);if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1)return kr.getRSAKeyFromEncryptedPKCS5PEM(e,t);if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var f=kr.getDecryptedKeyHex(e,t),r=Fr.getVbyList(f,0,[1],"04"),v=Fr.getVbyList(f,0,[2,0],"06"),S=Fr.getVbyList(f,0,[3,0],"03").substr(2),_="";if(void 0===Cr.crypto.OID.oidhex2name[v])throw"undefined OID(hex) in KJUR.crypto.OID: "+v;_=Cr.crypto.OID.oidhex2name[v];var i=new Cr.crypto.ECDSA({name:_});return i.setPublicKeyHex(S),i.setPrivateKeyHex(r),i.isPublic=!1,i}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var f=kr.getDecryptedKeyHex(e,t),h=Fr.getVbyList(f,0,[1],"02"),g=Fr.getVbyList(f,0,[2],"02"),p=Fr.getVbyList(f,0,[3],"02"),m=Fr.getVbyList(f,0,[4],"02"),y=Fr.getVbyList(f,0,[5],"02"),r=new Cr.crypto.DSA;return r.setPrivate(new s(h,16),new s(g,16),new s(p,16),new s(m,16),new s(y,16)),r}if(e.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return kr.getKeyFromEncryptedPKCS8PEM(e,t);throw"not supported argument"},kr.generateKeypair=function(e,t){if("RSA"==e){var n=t,r=new yt;r.generate(n,"10001"),r.isPrivate=!0,r.isPublic=!0;var i=new yt,a=r.n.toString(16),s=r.e.toString(16);i.setPublic(a,s),i.isPrivate=!1,i.isPublic=!0;var o={};return o.prvKeyObj=r,o.pubKeyObj=i,o}if("EC"==e){var u=t,l=new Cr.crypto.ECDSA({curve:u}),c=l.generateKeyPairHex(),r=new Cr.crypto.ECDSA({curve:u});r.setPublicKeyHex(c.ecpubhex),r.setPrivateKeyHex(c.ecprvhex),r.isPrivate=!0,r.isPublic=!1;var i=new Cr.crypto.ECDSA({curve:u});i.setPublicKeyHex(c.ecpubhex),i.isPrivate=!1,i.isPublic=!0;var o={};return o.prvKeyObj=r,o.pubKeyObj=i,o}throw"unknown algorithm: "+e},kr.getPEM=function(e,t,n,r,i){function a(e){var t=Cr.asn1.ASN1Util.newObject({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]});return t}function s(e){var t=Cr.asn1.ASN1Util.newObject({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]});return t}function o(e){var t=Cr.asn1.ASN1Util.newObject({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]});return t}var u=Cr.asn1,l=Cr.crypto;if(("undefined"!=typeof yt&&e instanceof yt||"undefined"!=typeof l.DSA&&e instanceof l.DSA||"undefined"!=typeof l.ECDSA&&e instanceof l.ECDSA)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t)){var c=new Cr.asn1.x509.SubjectPublicKeyInfo(e),d=c.getEncodedHex();return u.ASN1Util.getPEMStringFromHex(d,"PUBLIC KEY")}if("PKCS1PRV"==t&&"undefined"!=typeof yt&&e instanceof yt&&(void 0===n||null==n)&&1==e.isPrivate){var c=a(e),d=c.getEncodedHex();return u.ASN1Util.getPEMStringFromHex(d,"RSA PRIVATE KEY")}if("PKCS1PRV"==t&&"undefined"!=typeof yt&&e instanceof Cr.crypto.ECDSA&&(void 0===n||null==n)&&1==e.isPrivate){var f=new Cr.asn1.DERObjectIdentifier({name:e.curveName}),h=f.getEncodedHex(),g=s(e),p=g.getEncodedHex(),m="";return m+=u.ASN1Util.getPEMStringFromHex(h,"EC PARAMETERS"),m+=u.ASN1Util.getPEMStringFromHex(p,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&"undefined"!=typeof Cr.crypto.DSA&&e instanceof Cr.crypto.DSA&&(void 0===n||null==n)&&1==e.isPrivate){var c=o(e),d=c.getEncodedHex();return u.ASN1Util.getPEMStringFromHex(d,"DSA PRIVATE KEY")}if("PKCS5PRV"==t&&"undefined"!=typeof yt&&e instanceof yt&&void 0!==n&&null!=n&&1==e.isPrivate){var c=a(e),d=c.getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",d,n,r)}if("PKCS5PRV"==t&&"undefined"!=typeof Cr.crypto.ECDSA&&e instanceof Cr.crypto.ECDSA&&void 0!==n&&null!=n&&1==e.isPrivate){var c=s(e),d=c.getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",d,n,r)}if("PKCS5PRV"==t&&"undefined"!=typeof Cr.crypto.DSA&&e instanceof Cr.crypto.DSA&&void 0!==n&&null!=n&&1==e.isPrivate){var c=o(e),d=c.getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",d,n,r)}var y=function(e,t){var n=v(e,t),r=new Cr.asn1.ASN1Util.newObject({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]});return r.getEncodedHex()},v=function(e,t){var n=100,r=sr.lib.WordArray.random(8),i="DES-EDE3-CBC",a=sr.lib.WordArray.random(8),s=sr.PBKDF2(t,r,{keySize:6,iterations:n}),o=sr.enc.Hex.parse(e),u=sr.TripleDES.encrypt(o,s,{iv:a})+"",l={};return l.ciphertext=u,l.pbkdf2Salt=sr.enc.Hex.stringify(r),l.pbkdf2Iter=n,l.encryptionSchemeAlg=i,l.encryptionSchemeIV=sr.enc.Hex.stringify(a),l};if("PKCS8PRV"==t&&"undefined"!=typeof yt&&e instanceof yt&&1==e.isPrivate){var S=a(e),_=S.getEncodedHex(),c=Cr.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:_}}]}),d=c.getEncodedHex();if(void 0===n||null==n)return u.ASN1Util.getPEMStringFromHex(d,"PRIVATE KEY");var p=y(d,n);return u.ASN1Util.getPEMStringFromHex(p,"ENCRYPTED PRIVATE KEY");
}if("PKCS8PRV"==t&&"undefined"!=typeof Cr.crypto.ECDSA&&e instanceof Cr.crypto.ECDSA&&1==e.isPrivate){var S=new Cr.asn1.ASN1Util.newObject({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}),_=S.getEncodedHex(),c=Cr.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:_}}]}),d=c.getEncodedHex();if(void 0===n||null==n)return u.ASN1Util.getPEMStringFromHex(d,"PRIVATE KEY");var p=y(d,n);return u.ASN1Util.getPEMStringFromHex(p,"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&"undefined"!=typeof Cr.crypto.DSA&&e instanceof Cr.crypto.DSA&&1==e.isPrivate){var S=new Cr.asn1.DERInteger({bigint:e.x}),_=S.getEncodedHex(),c=Cr.asn1.ASN1Util.newObject({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:_}}]}),d=c.getEncodedHex();if(void 0===n||null==n)return u.ASN1Util.getPEMStringFromHex(d,"PRIVATE KEY");var p=y(d,n);return u.ASN1Util.getPEMStringFromHex(p,"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},kr.getKeyFromCSRPEM=function(e){var t=kr.getHexFromPEM(e,"CERTIFICATE REQUEST"),n=kr.getKeyFromCSRHex(t);return n},kr.getKeyFromCSRHex=function(e){var t=kr.parseCSRHex(e),n=kr.getKey(t.p8pubkeyhex,null,"pkcs8pub");return n},kr.parseCSRHex=function(e){var t={},n=e;if("30"!=n.substr(0,2))throw"malformed CSR(code:001)";var r=Fr.getPosArrayOfChildren_AtObj(n,0);if(r.length<1)throw"malformed CSR(code:002)";if("30"!=n.substr(r[0],2))throw"malformed CSR(code:003)";var i=Fr.getPosArrayOfChildren_AtObj(n,r[0]);if(i.length<3)throw"malformed CSR(code:004)";return t.p8pubkeyhex=Fr.getHexOfTLV_AtObj(n,i[2]),t},kr.getJWKFromKey=function(e){var t={};if(e instanceof yt&&e.isPrivate)return t.kty="RSA",t.n=gn(e.n.toString(16)),t.e=gn(e.e.toString(16)),t.d=gn(e.d.toString(16)),t.p=gn(e.p.toString(16)),t.q=gn(e.q.toString(16)),t.dp=gn(e.dmp1.toString(16)),t.dq=gn(e.dmq1.toString(16)),t.qi=gn(e.coeff.toString(16)),t;if(e instanceof yt&&e.isPublic)return t.kty="RSA",t.n=gn(e.n.toString(16)),t.e=gn(e.e.toString(16)),t;if(e instanceof Cr.crypto.ECDSA&&e.isPrivate){var n=e.getShortNISTPCurveName();if("P-256"!==n&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=e.getPublicKeyXYHex();return t.kty="EC",t.crv=n,t.x=gn(r.x),t.y=gn(r.y),t.d=gn(e.prvKeyHex),t}if(e instanceof Cr.crypto.ECDSA&&e.isPublic){var n=e.getShortNISTPCurveName();if("P-256"!==n&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=e.getPublicKeyXYHex();return t.kty="EC",t.crv=n,t.x=gn(r.x),t.y=gn(r.y),t}throw"not supported key object"},yt.prototype.readPrivateKeyFromPEMString=On,yt.prototype.readPrivateKeyFromASN1HexString=Dn;/*! rsasign-1.2.7.js (c) 2012 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
var Nr=new RegExp("");Nr.compile("[^0-9a-f]","gi"),yt.prototype.signWithMessageHash=Hn,yt.prototype.signString=Nn,yt.prototype.signStringWithSHA1=jn,yt.prototype.signStringWithSHA256=Mn,yt.prototype.sign=Nn,yt.prototype.signWithSHA1=jn,yt.prototype.signWithSHA256=Mn,yt.prototype.signWithMessageHashPSS=Vn,yt.prototype.signStringPSS=Ln,yt.prototype.signPSS=Ln,yt.SALT_LEN_HLEN=-1,yt.SALT_LEN_MAX=-2,yt.prototype.verifyWithMessageHash=Jn,yt.prototype.verifyString=zn,yt.prototype.verifyHexSignatureForMessage=Wn,yt.prototype.verify=zn,yt.prototype.verifyHexSignatureForByteArrayMessage=Wn,yt.prototype.verifyWithMessageHashPSS=Xn,yt.prototype.verifyStringPSS=Yn,yt.prototype.verifyPSS=Yn,yt.SALT_LEN_RECOVER=-2,$n.pemToBase64=function(e){var t=e;return t=t.replace("-----BEGIN CERTIFICATE-----",""),t=t.replace("-----END CERTIFICATE-----",""),t=t.replace(/[ \n]+/g,"")},$n.pemToHex=function(e){var t=$n.pemToBase64(e),n=i(t);return n},$n.getSubjectPublicKeyPosFromCertHex=function(e){var t=$n.getSubjectPublicKeyInfoPosFromCertHex(e);if(t==-1)return-1;var n=Fr.getPosArrayOfChildren_AtObj(e,t);if(2!=n.length)return-1;var r=n[1];if("03"!=e.substring(r,r+2))return-1;var i=Fr.getStartPosOfV_AtObj(e,r);return"00"!=e.substring(i,i+2)?-1:i+2},$n.getSubjectPublicKeyInfoPosFromCertHex=function(e){var t=Fr.getStartPosOfV_AtObj(e,0),n=Fr.getPosArrayOfChildren_AtObj(e,t);return n.length<1?-1:"a003020102"==e.substring(n[0],n[0]+10)?n.length<6?-1:n[6]:n.length<5?-1:n[5]},$n.getPublicKeyHexArrayFromCertHex=function(e){var t=$n.getSubjectPublicKeyPosFromCertHex(e),n=Fr.getPosArrayOfChildren_AtObj(e,t);if(2!=n.length)return[];var r=Fr.getHexOfV_AtObj(e,n[0]),i=Fr.getHexOfV_AtObj(e,n[1]);return null!=r&&null!=i?[r,i]:[]},$n.getHexTbsCertificateFromCert=function(e){var t=Fr.getStartPosOfV_AtObj(e,0);return t},$n.getPublicKeyHexArrayFromCertPEM=function(e){var t=$n.pemToHex(e),n=$n.getPublicKeyHexArrayFromCertHex(t);return n},$n.hex2dn=function(e){for(var t="",n=Fr.getPosArrayOfChildren_AtObj(e,0),r=0;r<n.length;r++){var i=Fr.getHexOfTLV_AtObj(e,n[r]);t=t+"/"+$n.hex2rdn(i)}return t},$n.hex2rdn=function(e){var t=Fr.getDecendantHexTLVByNthList(e,0,[0,0]),n=Fr.getDecendantHexVByNthList(e,0,[0,1]),r="";try{r=$n.DN_ATTRHEX[t]}catch(e){r=t}n=n.replace(/(..)/g,"%$1");var i=decodeURIComponent(n);return r+"="+i},$n.DN_ATTRHEX={"0603550406":"C","060355040a":"O","060355040b":"OU","0603550403":"CN","0603550405":"SN","0603550408":"ST","0603550407":"L","0603550409":"streetAddress","060355040f":"businessCategory","0603550411":"postalCode","060b2b0601040182373c020102":"jurisdictionOfIncorporationSP","060b2b0601040182373c020103":"jurisdictionOfIncorporationC"},$n.getPublicKeyFromCertPEM=function(e){var t=$n.getPublicKeyInfoPropOfCertPEM(e);if("2a864886f70d010101"==t.algoid){var n=kr.parsePublicRawRSAKeyHex(t.keyhex),r=new yt;return r.setPublic(n.n,n.e),r}if("2a8648ce3d0201"==t.algoid){var i=Cr.crypto.OID.oidhex2name[t.algparam],r=new Cr.crypto.ECDSA({curve:i,info:t.keyhex});return r.setPublicKeyHex(t.keyhex),r}if("2a8648ce380401"==t.algoid){var a=Fr.getVbyList(t.algparam,0,[0],"02"),o=Fr.getVbyList(t.algparam,0,[1],"02"),u=Fr.getVbyList(t.algparam,0,[2],"02"),l=Fr.getHexOfV_AtObj(t.keyhex,0);l=l.substr(2);var r=new Cr.crypto.DSA;return r.setPublic(new s(a,16),new s(o,16),new s(u,16),new s(l,16)),r}throw"unsupported key"},$n.getPublicKeyInfoPropOfCertPEM=function(e){var t={};t.algparam=null;var n=$n.pemToHex(e),r=Fr.getPosArrayOfChildren_AtObj(n,0);if(3!=r.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=n.substr(r[0],2))throw"malformed X.509 certificate PEM (code:002)";var i=Fr.getPosArrayOfChildren_AtObj(n,r[0]),a=6;if("a0"!==n.substr(i[0],2)&&(a=5),i.length<a+1)throw"malformed X.509 certificate PEM (code:003)";var s=Fr.getPosArrayOfChildren_AtObj(n,i[a]);if(2!=s.length)throw"malformed X.509 certificate PEM (code:004)";var o=Fr.getPosArrayOfChildren_AtObj(n,s[0]);if(2!=o.length)throw"malformed X.509 certificate PEM (code:005)";if(t.algoid=Fr.getHexOfV_AtObj(n,o[0]),"06"==n.substr(o[1],2)?t.algparam=Fr.getHexOfV_AtObj(n,o[1]):"30"==n.substr(o[1],2)&&(t.algparam=Fr.getHexOfTLV_AtObj(n,o[1])),"03"!=n.substr(s[1],2))throw"malformed X.509 certificate PEM (code:006)";var u=Fr.getHexOfV_AtObj(n,s[1]);return t.keyhex=u.substr(2),t},$n.getPublicKeyInfoPosOfCertHEX=function(e){var t=Fr.getPosArrayOfChildren_AtObj(e,0);if(3!=t.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=e.substr(t[0],2))throw"malformed X.509 certificate PEM (code:002)";var n=Fr.getPosArrayOfChildren_AtObj(e,t[0]);if(n.length<7)throw"malformed X.509 certificate PEM (code:003)";return n[6]},$n.getV3ExtInfoListOfCertHex=function(e){var t=Fr.getPosArrayOfChildren_AtObj(e,0);if(3!=t.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=e.substr(t[0],2))throw"malformed X.509 certificate PEM (code:002)";var n=Fr.getPosArrayOfChildren_AtObj(e,t[0]);if(n.length<8)throw"malformed X.509 certificate PEM (code:003)";if("a3"!=e.substr(n[7],2))throw"malformed X.509 certificate PEM (code:004)";var r=Fr.getPosArrayOfChildren_AtObj(e,n[7]);if(1!=r.length)throw"malformed X.509 certificate PEM (code:005)";if("30"!=e.substr(r[0],2))throw"malformed X.509 certificate PEM (code:006)";for(var i=Fr.getPosArrayOfChildren_AtObj(e,r[0]),a=i.length,s=new Array(a),o=0;o<a;o++)s[o]=$n.getV3ExtItemInfo_AtObj(e,i[o]);return s},$n.getV3ExtItemInfo_AtObj=function(e,t){var n={};n.posTLV=t;var r=Fr.getPosArrayOfChildren_AtObj(e,t);if(2!=r.length&&3!=r.length)throw"malformed X.509v3 Ext (code:001)";if("06"!=e.substr(r[0],2))throw"malformed X.509v3 Ext (code:002)";var i=Fr.getHexOfV_AtObj(e,r[0]);n.oid=Fr.hextooidstr(i),n.critical=!1,3==r.length&&(n.critical=!0);var a=r[r.length-1];if("04"!=e.substr(a,2))throw"malformed X.509v3 Ext (code:003)";return n.posV=Fr.getStartPosOfV_AtObj(e,a),n},$n.getHexOfTLV_V3ExtValue=function(e,t){var n=$n.getPosOfTLV_V3ExtValue(e,t);return n==-1?null:Fr.getHexOfTLV_AtObj(e,n)},$n.getHexOfV_V3ExtValue=function(e,t){var n=$n.getPosOfTLV_V3ExtValue(e,t);return n==-1?null:Fr.getHexOfV_AtObj(e,n)},$n.getPosOfTLV_V3ExtValue=function(e,t){var n=t;if(t.match(/^[0-9.]+$/)||(n=Cr.asn1.x509.OID.name2oid(t)),""==n)return-1;for(var r=$n.getV3ExtInfoListOfCertHex(e),i=0;i<r.length;i++){var a=r[i];if(a.oid==n)return a.posV}return-1},$n.getExtBasicConstraints=function(e){var t=$n.getHexOfV_V3ExtValue(e,"basicConstraints");if(null===t)return null;if(""===t)return{};if("0101ff"===t)return{cA:!0};if("0101ff02"===t.substr(0,8)){var n=Fr.getHexOfV_AtObj(t,6),r=parseInt(n,16);return{cA:!0,pathLen:r}}throw"unknown error"},$n.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],$n.getExtKeyUsageBin=function(e){var t=$n.getHexOfV_V3ExtValue(e,"keyUsage");if(""==t)return"";if(t.length%2!=0||t.length<=2)throw"malformed key usage value";var n=parseInt(t.substr(0,2)),r=parseInt(t.substr(2),16).toString(2);return r.substr(0,r.length-n)},$n.getExtKeyUsageString=function(e){for(var t=$n.getExtKeyUsageBin(e),n=new Array,r=0;r<t.length;r++)"1"==t.substr(r,1)&&n.push($n.KEYUSAGE_NAME[r]);return n.join(",")},$n.getExtSubjectKeyIdentifier=function(e){var t=$n.getHexOfV_V3ExtValue(e,"subjectKeyIdentifier");return t},$n.getExtAuthorityKeyIdentifier=function(e){var t={},n=$n.getHexOfTLV_V3ExtValue(e,"authorityKeyIdentifier");if(null===n)return null;for(var r=Fr.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)"80"===n.substr(r[i],2)&&(t.kid=Fr.getHexOfV_AtObj(n,r[i]));return t},$n.getExtExtKeyUsageName=function(e){var t=new Array,n=$n.getHexOfTLV_V3ExtValue(e,"extKeyUsage");if(null===n)return null;for(var r=Fr.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++){var a=Fr.getHexOfV_AtObj(n,r[i]),s=Cr.asn1.ASN1Util.oidHexToInt(a),o=Cr.asn1.x509.OID.oid2name(s);t.push(o)}return t},$n.getExtSubjectAltName=function(e){for(var t=new Array,n=$n.getHexOfTLV_V3ExtValue(e,"subjectAltName"),r=Fr.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)if("82"===n.substr(r[i],2)){var a=Sn(Fr.getHexOfV_AtObj(n,r[i]));t.push(a)}return t},$n.getExtCRLDistributionPointsURI=function(e){for(var t=new Array,n=$n.getHexOfTLV_V3ExtValue(e,"cRLDistributionPoints"),r=Fr.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)for(var a=Fr.getHexOfTLV_AtObj(n,r[i]),s=Fr.getPosArrayOfChildren_AtObj(a,0),o=0;o<s.length;o++)if("a0"===a.substr(s[o],2)){var u=Fr.getHexOfV_AtObj(a,s[o]);if("a0"===u.substr(0,2)){var l=Fr.getHexOfV_AtObj(u,0);if("86"===l.substr(0,2)){var c=Fr.getHexOfV_AtObj(l,0),d=Sn(c);t.push(d)}}}return t},$n.getExtAIAInfo=function(e){var t={};t.ocsp=[],t.caissuer=[];var n=$n.getPosOfTLV_V3ExtValue(e,"authorityInfoAccess");if(n==-1)return null;if("30"!=e.substr(n,2))throw"malformed AIA Extn Value";for(var r=Fr.getPosArrayOfChildren_AtObj(e,n),i=0;i<r.length;i++){var a=r[i],s=Fr.getPosArrayOfChildren_AtObj(e,a);if(2!=s.length)throw"malformed AccessDescription of AIA Extn";var o=s[0],u=s[1];"2b06010505073001"==Fr.getHexOfV_AtObj(e,o)&&"86"==e.substr(u,2)&&t.ocsp.push(Sn(Fr.getHexOfV_AtObj(e,u))),"2b06010505073002"==Fr.getHexOfV_AtObj(e,o)&&"86"==e.substr(u,2)&&t.caissuer.push(Sn(Fr.getHexOfV_AtObj(e,u)))}return t},$n.getSignatureAlgorithmName=function(e){var t=Fr.getDecendantHexVByNthList(e,0,[1,0]),n=Cr.asn1.ASN1Util.oidHexToInt(t),r=Cr.asn1.x509.OID.oid2name(n);return r},$n.getSignatureValueHex=function(e){var t=Fr.getDecendantHexVByNthList(e,0,[2]);if("00"!==t.substr(0,2))throw"can't get signature value";return t.substr(2)},$n.getSerialNumberHex=function(e){return Fr.getDecendantHexVByNthList(e,0,[0,1])},/*! jws-3.3.4 (c) 2013-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.jws&&Cr.jws||(Cr.jws={}),Cr.jws.JWS=function(){var e=Cr.jws.JWS;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){if(null==t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/))throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var r=RegExp.$1,i=RegExp.$2,a=RegExp.$3,s=r+"."+i;if(this.parsedJWS={},this.parsedJWS.headB64U=r,this.parsedJWS.payloadB64U=i,this.parsedJWS.sigvalB64U=a,this.parsedJWS.si=s,!n){var o=pn(a),u=ht(o,16);this.parsedJWS.sigvalH=o,this.parsedJWS.sigvalBI=u}var l=Ir(r),c=Ir(i);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=c,!e.isSafeJSONString(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},Cr.jws.JWS.sign=function(e,t,n,r,i){var a,s,o,u=Cr.jws.JWS;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(s=t,a=JSON.stringify(s)),"string"==typeof t){if(a=t,!u.isSafeJSONString(a))throw"JWS Head is not safe JSON string: "+a;s=u.readSafeJSONString(a)}if(o=n,"object"==typeof n&&(o=JSON.stringify(n)),""!=e&&null!=e||void 0===s.alg||(e=s.alg),""!=e&&null!=e&&void 0===s.alg&&(s.alg=e,a=JSON.stringify(s)),e!==s.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+s.alg;var l=null;if(void 0===u.jwsalg2sigalg[e])throw"unsupported alg name: "+e;l=u.jwsalg2sigalg[e];var c=Rr(a),d=Rr(o),f=c+"."+d,h="";if("Hmac"==l.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var g=new Cr.crypto.Mac({alg:l,prov:"cryptojs",pass:r});g.updateString(f),h=g.doFinal()}else if(l.indexOf("withECDSA")!=-1){var p=new Cr.crypto.Signature({alg:l});p.init(r,i),p.updateString(f),hASN1Sig=p.sign(),h=Cr.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)}else if("none"!=l){var p=new Cr.crypto.Signature({alg:l});p.init(r,i),p.updateString(f),h=p.sign()}var m=gn(h);return f+"."+m},Cr.jws.JWS.verify=function(e,t,n){var r=Cr.jws.JWS,i=e.split("."),a=i[0],s=i[1],o=a+"."+s,u=pn(i[2]),l=r.readSafeJSONString(Ir(i[0])),c=null,d=null;if(void 0===l.alg)throw"algorithm not specified in header";if(c=l.alg,d=c.substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0){var f=":"+n.join(":")+":";if(f.indexOf(":"+c+":")==-1)throw"algorithm '"+c+"' not accepted in the list"}if("none"!=c&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&t.indexOf("-----BEGIN ")!=-1&&(t=kr.getKey(t)),!("RS"!=d&&"PS"!=d||t instanceof yt))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==d&&!(t instanceof Cr.crypto.ECDSA))throw"key shall be a ECDSA obj for ES* algs";var h=null;if(void 0===r.jwsalg2sigalg[l.alg])throw"unsupported alg name: "+c;if(h=r.jwsalg2sigalg[c],"none"==h)throw"not supported";if("Hmac"==h.substr(0,4)){var g=null;if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var p=new Cr.crypto.Mac({alg:h,pass:t});return p.updateString(o),g=p.doFinal(),u==g}if(h.indexOf("withECDSA")!=-1){var m=null;try{m=Cr.crypto.ECDSA.concatSigToASN1Sig(u)}catch(e){return!1}var y=new Cr.crypto.Signature({alg:h});return y.init(t),y.updateString(o),y.verify(m)}var y=new Cr.crypto.Signature({alg:h});return y.init(t),y.updateString(o),y.verify(u)},Cr.jws.JWS.parse=function(e){var t,n,r,i=e.split("."),a={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],n=i[1],3==i.length&&(r=i[2]),a.headerObj=Cr.jws.JWS.readSafeJSONString(Ir(t)),a.payloadObj=Cr.jws.JWS.readSafeJSONString(Ir(n)),a.headerPP=JSON.stringify(a.headerObj,null,"  "),null==a.payloadObj?a.payloadPP=Ir(n):a.payloadPP=JSON.stringify(a.payloadObj,null,"  "),void 0!==r&&(a.sigHex=pn(r)),a},Cr.jws.JWS.verifyJWT=function(e,t,n){var r=Cr.jws.JWS,i=e.split("."),a=i[0],s=i[1],o=(pn(i[2]),r.readSafeJSONString(Ir(a))),u=r.readSafeJSONString(Ir(s));if(void 0===o.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!r.inArray(o.alg,n.alg))return!1;if(void 0!==u.iss&&"object"==typeof n.iss&&!r.inArray(u.iss,n.iss))return!1;if(void 0!==u.sub&&"object"==typeof n.sub&&!r.inArray(u.sub,n.sub))return!1;if(void 0!==u.aud&&"object"==typeof n.aud)if("string"==typeof u.aud){if(!r.inArray(u.aud,n.aud))return!1}else if("object"==typeof u.aud&&!r.includedArray(u.aud,n.aud))return!1;var l=Cr.jws.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(l=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==u.exp&&"number"==typeof u.exp&&u.exp+n.gracePeriod<l)&&(!(void 0!==u.nbf&&"number"==typeof u.nbf&&l<u.nbf-n.gracePeriod)&&(!(void 0!==u.iat&&"number"==typeof u.iat&&l<u.iat-n.gracePeriod)&&((void 0===u.jti||void 0===n.jti||u.jti===n.jti)&&!!Cr.jws.JWS.verify(e,t,n.alg))))},Cr.jws.JWS.includedArray=function(e,t){var n=Cr.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t))return!1;return!0},Cr.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},Cr.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Cr.jws.JWS.isSafeJSONString=function(e,t,n){var r=null;try{return r=Tr(e),"object"!=typeof r?0:r.constructor===Array?0:(t&&(t[n]=r),1)}catch(e){return 0}},Cr.jws.JWS.readSafeJSONString=function(e){var t=null;try{return t=Tr(e),"object"!=typeof t?null:t.constructor===Array?null:t}catch(e){return null}},Cr.jws.JWS.getEncodedSignatureValueFromJWS=function(e){if(null==e.match(/^[^.]+\.[^.]+\.([^.]+)$/))throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return RegExp.$1},Cr.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=bn(t),r=Cr.crypto.Util.hashHex(n,"sha256"),i=gn(r);return i},Cr.jws.IntDate={},Cr.jws.IntDate.get=function(e){if("now"==e)return Cr.jws.IntDate.getNow();if("now + 1hour"==e)return Cr.jws.IntDate.getNow()+3600;if("now + 1day"==e)return Cr.jws.IntDate.getNow()+86400;if("now + 1month"==e)return Cr.jws.IntDate.getNow()+2592e3;if("now + 1year"==e)return Cr.jws.IntDate.getNow()+31536e3;if(e.match(/Z$/))return Cr.jws.IntDate.getZulu(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},Cr.jws.IntDate.getZulu=function(e){var t;if(t=e.match(/(\d+)(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)Z/)){var n=RegExp.$1,r=parseInt(n);if(4==n.length);else{if(2!=n.length)throw"malformed year string";if(50<=r&&r<100)r=1900+r;else{if(!(0<=r&&r<50))throw"malformed year string for UTCTime";r=2e3+r}}var i=parseInt(RegExp.$2)-1,a=parseInt(RegExp.$3),s=parseInt(RegExp.$4),o=parseInt(RegExp.$5),u=parseInt(RegExp.$6),l=new Date(Date.UTC(r,i,a,s,o,u));return~~(l/1e3)}throw"unsupported format: "+e},Cr.jws.IntDate.getNow=function(){var e=~~(new Date/1e3);return e},Cr.jws.IntDate.intDate2UTCString=function(e){var t=new Date(1e3*e);return t.toUTCString()},Cr.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e),n=("0000"+t.getUTCFullYear()).slice(-4),r=("00"+(t.getUTCMonth()+1)).slice(-2),i=("00"+t.getUTCDate()).slice(-2),a=("00"+t.getUTCHours()).slice(-2),s=("00"+t.getUTCMinutes()).slice(-2),o=("00"+t.getUTCSeconds()).slice(-2);return n+r+i+a+s+o+"Z"},/*! jwsjs-2.1.0 (c) 2010-2016 Kenji Urushima | kjur.github.com/jsrsasign/license
	 */
"undefined"!=typeof Cr&&Cr||(Cr={}),"undefined"!=typeof Cr.jws&&Cr.jws||(Cr.jws={}),Cr.jws.JWSJS=function(){var e=Cr.jws.JWS,t=Cr.jws.JWS;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,n,r){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var a=Cr.jws.JWS.sign(e,t,this.sPayload,n,r),s=a.split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(e){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+e}},this.addSignatureByHeaderKey=function(e,t){var n=Ir(this.sPayload),r=new Cr.jws.JWS;r.generateJWSByP1PrvKey(e,n,t);this.aHeader.push(r.parsedJWS.headB64U),this.aSignature.push(r.parsedJWS.sigvalB64U)},this.addSignatureByHeaderPayloadKey=function(e,t,n){var r=new Cr.jws.JWS;r.generateJWSByP1PrvKey(e,t,n);this.aHeader.push(r.parsedJWS.headB64U),this.sPayload=r.parsedJWS.payloadB64U,this.aSignature.push(r.parsedJWS.sigvalB64U)},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(2!==n.length)return!1;var r=this.verifyNth(t,n[0],n[1]);if(r===!1)return!1}return!0},this.verifyNth=function(e,n,r){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var i=this.aHeader[e],a=this.aSignature[e],s=i+"."+this.sPayload+"."+a,o=!1;try{o=t.verify(s,n,r)}catch(e){return!1}return o},this.verifyWithCerts=function(e){if(this.aHeader.length!=e.length)throw"num headers does not match with num certs";if(this.aSignature.length!=e.length)throw"num signatures does not match with num certs";for(var t=this.sPayload,n="",r=0;r<e.length;r++){var i=e[r],a=this.aHeader[r],s=this.aSignature[r],o=a+"."+t+"."+s,u=new Cr.jws.JWS;try{var l=u.verifyJWSByPemX509Cert(o,i);1!=l&&(n+=r+1+"th signature unmatch. ")}catch(e){n+=r+1+"th signature fail("+e+"). "}}if(""==n)return 1;throw n},this.readJWSJS=function(t){if("string"==typeof t){var n=e.readSafeJSONString(t);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.signatures=t.signatures}catch(e){throw"malformed JWS-JS JSON object: "+e}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},t.SecureRandom=ft,t.rng_seed_time=lt,t.BigInteger=s,t.RSAKey=yt,t.ECDSA=Cr.crypto.ECDSA,t.DSA=Cr.crypto.DSA,t.Signature=Cr.crypto.Signature,t.MessageDigest=Cr.crypto.MessageDigest,t.Mac=Cr.crypto.Mac,t.KEYUTIL=kr,t.ASN1HEX=Fr,t.X509=$n,t.CryptoJS=sr,t.b64tohex=i,t.b64toBA=a,t.stoBA=an,t.BAtos=sn,t.BAtohex=on,t.stohex=un,t.stob64=ln,t.stob64u=cn,t.b64utos=dn,t.b64tob64u=fn,t.b64utob64=hn,t.hex2b64=r,t.hextob64u=gn,t.b64utohex=pn,t.b64tohex=i,t.utf8tob64u=Rr,t.b64utoutf8=Ir,t.utf8tob64=mn,t.b64toutf8=yn,t.utf8tohex=vn,t.hextoutf8=Sn,t.hextorstr=_n,t.rstrtohex=bn,t.newline_toUnix=Pn,t.newline_toDos=Tn,t.intarystrtohex=Fn,t.strdiffidx=Dr,t.KJUR=Cr,t.crypto=Cr.crypto,t.asn1=Cr.asn1,t.jws=Cr.jws,t.lang=Cr.lang,t.readFileUTF8=Qn,t.readFileHexByBin=Zn,t.readFile=er,t.saveFile=tr,t.saveFileBinByHex=nr}).call(t,n(5382).Buffer)},1316:function(e,t){"use strict";function n(e,t){return e===t}function r(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i=null,a=null;return function(){return r(t,i,arguments)||(a=e.apply(null,arguments)),i=arguments,a}}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];var o=0,u=r.pop(),l=a(r),c=e.apply(void 0,[function(){return o++,u.apply(null,arguments)}].concat(n)),d=i(function(){for(var e=[],t=l.length,n=0;n<t;n++)e.push(l[n].apply(null,arguments));return c.apply(null,e)});return d.resultFunc=u,d.recomputations=function(){return o},d.resetRecomputations=function(){return o=0},d}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=i,t.createSelectorCreator=s,t.createStructuredSelector=o;var u=t.createSelector=s(i)},1454:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=r(i),s=n(6),o=r(s),u=n(14),l=r(u),c=n(13),d=r(c),f=n(78),h=r(f),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.error,r=e.error_description,i=e.error_uri,s=e.state;if((0,o.default)(this,t),!n)throw h.default.error("No error passed to ErrorResponse"),new Error("error");var u=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r||n));return u.name="ErrorResponse",u.error=n,u.error_description=r,u.error_uri=i,u.state=s,u}return(0,d.default)(t,e),t}(Error);t.default=g},1455:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(244),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=function(){function e(t){(0,o.default)(this,e),this._name=t,this._callbacks=[]}return(0,l.default)(e,[{key:"addHandler",value:function(e){this._callbacks.push(e)}},{key:"removeHandler",value:function(e){var t=this._callbacks.findIndex(function(t){return t===e});t>=0&&this._callbacks.splice(t,1)}},{key:"raise",value:function(){d.default.debug("Raising event: "+this._name);var e=!0,t=!1,n=void 0;try{for(var r,i=(0,a.default)(this._callbacks);!(e=(r=i.next()).done);e=!0){var s=r.value;s.apply(void 0,arguments)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}}]),e}();t.default=f},1456:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(424),h=r(f),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.default.XMLHttpRequest;(0,o.default)(this,e),this._XMLHttpRequest=t}return(0,l.default)(e,[{key:"getJson",value:function(e,t){var n=this;if(d.default.debug("JsonService.getJson",e),!e)throw d.default.error("No url passed"),new Error("url");return new a.default(function(r,i){var a=new n._XMLHttpRequest;a.open("GET",e),a.onload=function(){d.default.debug("HTTP response received, status",a.status),200===a.status?r(JSON.parse(a.responseText)):i(Error(a.statusText+" ("+a.status+")"))},a.onerror=function(){d.default.error("network error"),i(Error("Network Error"))},t&&(d.default.debug("token passed, setting Authorization header"),a.setRequestHeader("Authorization","Bearer "+t)),a.send()})}}]),e}();t.default=g},1457:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(78),l=r(u),c=n(1459),d=r(c),f=n(2734),h=r(f),g=n(628),p=r(g),m=".well-known/openid-configuration",y="id_token",v="openid",S=60,_=300,b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.authority,r=t.metadataUrl,i=t.metadata,s=t.signingKeys,o=t.client_id,u=t.client_secret,l=t.response_type,c=void 0===l?y:l,f=t.scope,g=void 0===f?v:f,m=t.redirect_uri,b=t.post_logout_redirect_uri,E=t.prompt,A=t.display,w=t.max_age,x=t.ui_locales,P=t.acr_values,T=t.resource,F=t.filterProtocolClaims,C=void 0===F||F,R=t.loadUserInfo,I=void 0===R||R,D=t.staleStateAge,O=void 0===D?S:D,k=t.clockSkew,N=void 0===k?_:k,H=t.stateStore,j=void 0===H?new d.default:H,M=t.ResponseValidatorCtor,B=void 0===M?h.default:M,L=t.MetadataServiceCtor,V=void 0===L?p.default:L;(0,a.default)(this,e),this._authority=n,this._metadataUrl=r,this._metadata=i,this._signingKeys=s,this._client_id=o,this._client_secret=u,this._response_type=c,this._scope=g,this._redirect_uri=m,this._post_logout_redirect_uri=b,this._prompt=E,this._display=A,this._max_age=w,this._ui_locales=x,this._acr_values=P,this._resource=T,this._filterProtocolClaims=!!C,this._loadUserInfo=!!I,this._staleStateAge=O,this._clockSkew=N,this._stateStore=j,this._validator=new B(this),this._metadataService=new V(this)}return(0,o.default)(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw l.default.error("client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw l.default.error("authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(m)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=m)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}}]),e}();t.default=b},1458:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),a=r(i),s=n(12),o=r(s),u=n(6),l=r(u),c=n(7),d=r(c),f=n(14),h=r(f),g=n(13),p=r(g),m=n(78),y=r(m),v=n(865),S=r(v),_=n(1460),b=r(_),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.nonce,r=e.authority,i=e.client_id;(0,l.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,o.default)(t)).call(this,arguments[0]));return n===!0?a._nonce=(0,b.default)():n&&(a._nonce=n),a._authority=r,a._client_id=i,a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"toStorageString",value:function(){return y.default.debug("SigninState.toStorageString"),(0,a.default)({id:this.id,data:this.data,created:this.created,nonce:this.nonce,authority:this.authority,client_id:this.client_id})}},{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}}],[{key:"fromStorageString",value:function(e){y.default.debug("SigninState.fromStorageString");var n=JSON.parse(e);return new t(n)}}]),t}(S.default);t.default=E},1459:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(424),h=r(f),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefix,r=void 0===n?"oidc.":n,i=t.store,a=void 0===i?h.default.localStorage:i;(0,o.default)(this,e),this._store=a,this._prefix=r}return(0,l.default)(e,[{key:"set",value:function(e,t){return d.default.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),a.default.resolve()}},{key:"get",value:function(e){d.default.debug("WebStorageStateStore.get",e),e=this._prefix+e;var t=this._store.getItem(e);return a.default.resolve(t)}},{key:"remove",value:function(e){d.default.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),a.default.resolve(t)}},{key:"getAllKeys",value:function(){d.default.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);0===n.indexOf(this._prefix)&&e.push(n.substr(this._prefix.length))}return a.default.resolve(e)}}]),e}();t.default=g},1460:function(e,t){"use strict";
// @preserve Copyright (c) Microsoft Open Technologies, Inc.
function n(){for(var e="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx",t="0123456789abcdef",n=0,r="",i=0;i<e.length;i++)"-"!==e[i]&&"4"!==e[i]&&(n=16*Math.random()|0),"x"===e[i]?r+=t[n]:"y"===e[i]?(n&=3,n|=8,r+=t[n]):r+=e[i];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},2725:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(78),l=r(u),c=n(2741),d=r(c),f=60,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.accessTokenExpiringNotificationTime,r=void 0===n?f:n,i=t.accessTokenExpiringTimer,s=void 0===i?new d.default("Access token expiring"):i,o=t.accessTokenExpiredTimer,u=void 0===o?new d.default("Access token expired"):o;(0,a.default)(this,e),this._accessTokenExpiringNotificationTime=r,this._accessTokenExpiring=s,this._accessTokenExpired=u}return(0,o.default)(e,[{key:"load",value:function(e){if(l.default.debug("AccessTokenEvents.load"),this._cancelTimers(),e.access_token){var t=e.expires_in;if(l.default.debug("access token present, remaining duration:",t),t>0){var n=t-this._accessTokenExpiringNotificationTime;n<=0&&(n=1),l.default.debug("registering expiring timer in:",n),this._accessTokenExpiring.init(n)}var r=t+1;l.default.debug("registering expired timer in:",r),this._accessTokenExpired.init(r)}}},{key:"unload",value:function(){l.default.debug("AccessTokenEvents.unload"),this._cancelTimers()}},{key:"_cancelTimers",value:function(){l.default.debug("canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()}},{key:"addAccessTokenExpiring",value:function(e){this._accessTokenExpiring.addHandler(e)}},{key:"removeAccessTokenExpiring",value:function(e){this._accessTokenExpiring.removeHandler(e)}},{key:"addAccessTokenExpired",value:function(e){this._accessTokenExpired.addHandler(e)}},{key:"removeAccessTokenExpired",value:function(e){this._accessTokenExpired.removeHandler(e)}}]),e}();t.default=h},2726:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(78),l=r(u),c=2e3,d=function(){function e(t,n,r,i){(0,a.default)(this,e),this._callback=t,this._client_id=n,this._url=r,this._interval=i||c;var s=r.indexOf("/",r.indexOf("//")+2);this._frame_origin=r.substr(0,s),this._frame=window.document.createElement("iframe"),this._frame.style.display="none",this._frame.src=r,window.document.body.appendChild(this._frame),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1)}return(0,o.default)(e,[{key:"_message",value:function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(l.default.error("error message from check session op iframe"),this.stop()):"changed"===e.data?(l.default.debug("changed message from check session op iframe"),this.stop(),this._callback()):l.default.debug(e.data+" message from check session op iframe"))}},{key:"start",value:function(e){var t=this;this._session_state!==e&&(l.default.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e,this._timer=window.setInterval(function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)},this._interval))}},{key:"stop",value:function(){l.default.debug("CheckSessionIFrame.stop"),this._session_state=null,this._timer&&(window.clearInterval(this._timer),this._timer=null)}}]),e}();t.default=d},2727:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(2728),h=r(f),g=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,[{key:"prepare",value:function(e){var t=new h.default(e);return a.default.resolve(t)}},{key:"callback",value:function(e){d.default.debug("IFrameNavigator.callback");try{return h.default.notifyParent(e),a.default.resolve()}catch(e){return a.default.reject(e)}}}]),e}();t.default=g},2728:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=5e3,h=function(){function e(t){var n=this;(0,o.default)(this,e),d.default.debug("IFrameWindow.ctor"),this._promise=new a.default(function(e,t){n._resolve=e,n._reject=t}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.display="none",window.document.body.appendChild(this._frame)}return(0,l.default)(e,[{key:"navigate",value:function(e){if(d.default.debug("IFrameWindow.navigate"),e&&e.url){var t=e.silentRequestTimeout||f;d.default.debug("Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise}},{key:"_success",value:function(e){this._cleanup(),d.default.debug("Successful response from frame window"),this._resolve(e)}},{key:"_error",value:function(e){this._cleanup(),d.default.error(e),this._reject(new Error(e))}},{key:"_cleanup",value:function(){d.default.debug("IFrameWindow._cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null}},{key:"_timeout",value:function(){d.default.debug("IFrameWindow._timeout"),this._error("Frame window timed out")}},{key:"_message",value:function(e){if(d.default.debug("IFrameWindow._message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}}},{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}],[{key:"notifyParent",value:function(e){d.default.debug("IFrameWindow.notifyParent"),window.parent&&window!==window.parent&&(e=e||window.location.href,e&&(d.default.debug("posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host)))}}]),e}();t.default=h},2729:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(1289),d=n(78),f=r(d),h=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],g=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,null,[{key:"parseJwt",value:function(e){f.default.debug("JoseUtil.parseJwt");try{var t=c.jws.JWS.parse(e);return{header:t.headerObj,payload:t.payloadObj}}catch(e){f.default.error(e)}}},{key:"validateJwt",value:function(t,n,r,i,s,o){f.default.debug("JoseUtil.validateJwt");try{if("RSA"===n.kty)if(n.e&&n.n)n=c.KEYUTIL.getKey(n);else{if(!n.x5c||!n.x5c.length)return f.default.error("RSA key missing key material",n),a.default.reject(new Error("RSA key missing key material"));n=c.KEYUTIL.getKey(c.X509.getPublicKeyFromCertPEM(n.x5c[0]))}else{if("EC"!==n.kty)return f.default.error("Unsupported key type",n&&n.kty),a.default.reject(new Error("Unsupported key type: "+n&&n.kty));if(!(n.crv&&n.x&&n.y))return f.default.error("EC key missing key material",n),a.default.reject(new Error("EC key missing key material"));n=c.KEYUTIL.getKey(n)}return e._validateJwt(t,n,r,i,s,o)}catch(e){return f.default.error(e&&e.message||e),a.default.reject("JWT validation failed")}}},{key:"_validateJwt",value:function(t,n,r,i,s,o){f.default.debug("JoseUtil._validateJwt"),s||(s=0),o||(o=parseInt(Date.now()/1e3));var u=e.parseJwt(t).payload;if(!u.iss)return f.default.error("issuer was not provided"),a.default.reject(new Error("issuer was not provided"));if(u.iss!==r)return f.default.error("Invalid issuer in token",u.iss),a.default.reject(new Error("Invalid issuer in token: "+u.iss));if(!u.aud)return f.default.error("aud was not provided"),a.default.reject(new Error("aud was not provided"));var l=u.aud===i||Array.isArray(u.aud)&&u.aud.indexOf(i)>=0;if(!l)return f.default.error("Invalid audience in token",u.aud),a.default.reject(new Error("Invalid audience in token: "+u.aud));var d=o+s,g=o-s;if(!u.iat)return f.default.error("iat was not provided"),a.default.reject(new Error("iat was not provided"));if(d<u.iat)return f.default.error("iat is in the future",u.iat),a.default.reject(new Error("iat is in the future: "+u.iat));if(u.nbf&&d<u.nbf)return f.default.error("nbf is in the future",u.nbf),a.default.reject(new Error("nbf is in the future: "+u.nbf));if(!u.exp)return f.default.error("exp was not provided"),a.default.reject(new Error("exp was not provided"));if(u.exp<g)return f.default.error("exp is in the past",u.exp),a.default.reject(new Error("exp is in the past:"+u.exp));try{if(!c.jws.JWS.verify(t,n,h))return f.default.error("signature validation failed"),a.default.reject(new Error("signature validation failed"))}catch(e){return f.default.error(e&&e.message||e),a.default.reject(new Error("signature validation failed"))}return a.default.resolve()}},{key:"hashString",value:function(e,t){f.default.debug("JoseUtil.hashString",e,t);try{return c.crypto.Util.hashString(e,t)}catch(e){f.default.error(e)}}},{key:"hexToBase64Url",value:function(e){f.default.debug("JoseUtil.hexToBase64Url",e);try{return(0,c.hextob64u)(e)}catch(e){f.default.error(e)}}}]),e}();t.default=g},2730:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(1457),h=r(f),g=n(1454),p=r(g),m=n(2736),y=r(m),v=n(2737),S=r(v),_=n(2738),b=r(_),E=n(2739),A=r(E),w=n(1458),x=r(w),P=n(865),T=r(P),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),t instanceof h.default?this._settings=t:this._settings=new h.default(t)}return(0,l.default)(e,[{key:"createSigninRequest",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.response_type,r=t.scope,i=t.redirect_uri,a=t.data,s=t.state,o=t.prompt,u=t.display,l=t.max_age,c=t.ui_locales,f=t.id_token_hint,h=t.login_hint,g=t.acr_values,p=t.resource,m=t.request,v=t.request_uri,S=arguments[1];d.default.debug("OidcClient.createSigninRequest");var _=this._settings.client_id;n=n||this._settings.response_type,r=r||this._settings.scope,i=i||this._settings.redirect_uri,o=o||this._settings.prompt,u=u||this._settings.display,l=l||this._settings.max_age,c=c||this._settings.ui_locales,g=g||this._settings.acr_values,p=p||this._settings.resource;var b=this._settings.authority;return this._metadataService.getAuthorizationEndpoint().then(function(t){d.default.debug("Received authorization endpoint",t);var E=new y.default({url:t,client_id:_,redirect_uri:i,response_type:n,scope:r,data:a||s,authority:b,prompt:o,display:u,max_age:l,ui_locales:c,id_token_hint:f,login_hint:h,acr_values:g,resource:p,request:m,request_uri:v}),A=E.state;return S=S||e._stateStore,S.set(A.id,A.toStorageString()).then(function(){return E})})}},{key:"processSigninResponse",value:function(e,t){var n=this;d.default.debug("OidcClient.processSigninResponse");var r=new S.default(e);return r.state?(t=t||this._stateStore,t.remove(r.state).then(function(e){if(!e)throw d.default.error("No matching state found in storage"),new Error("No matching state found in storage");var t=x.default.fromStorageString(e);return d.default.debug("Received state from storage; validating response"),n._validator.validateSigninResponse(t,r)})):(d.default.error("No state in response"),a.default.reject(new Error("No state in response")))}},{key:"createSignoutRequest",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id_token_hint,r=t.data,i=t.state,a=t.post_logout_redirect_uri,s=arguments[1];return d.default.debug("OidcClient.createSignoutRequest"),a=a||this._settings.post_logout_redirect_uri,this._metadataService.getEndSessionEndpoint().then(function(t){if(!t)throw d.default.error("No end session endpoint url returned"),new Error("no end session endpoint");d.default.debug("Received end session endpoint",t);var o=new b.default({url:t,id_token_hint:n,post_logout_redirect_uri:a,data:r||i}),u=o.state;return u&&(d.default.debug("Signout request has state to persist"),s=s||e._stateStore,s.set(u.id,u.toStorageString())),o})}},{key:"processSignoutResponse",value:function(e,t){var n=this;d.default.debug("OidcClient.processSignoutResponse");var r=new A.default(e);if(!r.state)return d.default.debug("No state in response"),r.error?(d.default.warn("Response was error",r.error),a.default.reject(new p.default(r))):a.default.resolve(r);var i=r.state;return t=t||this._stateStore,t.remove(i).then(function(e){if(!e)throw d.default.error("No matching state found in storage"),new Error("No matching state found in storage");var t=T.default.fromStorageString(e);return d.default.debug("Received state from storage; validating response"),n._validator.validateSignoutResponse(t,r)})}},{key:"clearStaleState",value:function(e){return d.default.debug("OidcClient.clearStaleState"),e=e||this._stateStore,T.default.clearStaleState(e,this.settings.staleStateAge)}},{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}();t.default=F},2731:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(2732),h=r(f),g=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,[{key:"prepare",value:function(e){var t=new h.default(e);return a.default.resolve(t)}},{key:"callback",value:function(e,t,n){d.default.debug("PopupNavigator.callback");try{return h.default.notifyOpener(e,t,n),a.default.resolve()}catch(e){return a.default.reject(e)}}}]),e}();t.default=g},2732:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(506),h=r(f),g=500,p="location=no,toolbar=no,width=500,height=500,left=100,top=100;",m="_blank",y=function(){function e(t){var n=this;(0,o.default)(this,e),d.default.debug("PopupWindow.ctor"),this._promise=new a.default(function(e,t){n._resolve=e,n._reject=t});var r=t.popupWindowTarget||m,i=t.popupWindowFeatures||p;this._popup=window.open("",r,i),this._popup&&(d.default.debug("popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),g))}return(0,l.default)(e,[{key:"navigate",value:function(e){return d.default.debug("PopupWindow.navigate"),this._popup?e&&e.url?(d.default.debug("Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):this._error("No url provided"):this._error("Error opening popup window"),this.promise}},{key:"_success",value:function(e){this._cleanup(),d.default.debug("Successful response from popup window"),this._resolve(e)}},{key:"_error",value:function(e){this._cleanup(),d.default.error(e),this._reject(new Error(e))}},{key:"_cleanup",value:function(e){d.default.debug("PopupWindow._cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null}},{key:"_checkForPopupClosed",value:function(){d.default.debug("PopupWindow._checkForPopupClosed"),this._popup&&!this._popup.closed||this._error("Popup window closed")}},{key:"_callback",value:function(e,t){d.default.debug("PopupWindow._callback"),this._cleanup(t),e?this._success({url:e}):this._error("Invalid response from popup")}},{key:"promise",get:function(){return this._promise}}],[{key:"notifyOpener",value:function(e,t,n){if(d.default.debug("PopupWindow.notifyOpener"),window.opener&&(e=e||window.location.href)){var r=h.default.parseUrlFragment(e,n);if(r.state){var i="popupCallback_"+r.state,a=window.opener[i];a?(d.default.debug("passing url message to opener"),a(e,t)):d.default.warn("no matching callback found on opener")}else d.default.warn("no state found in response url")}}}]),e}();t.default=y},2733:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,[{key:"prepare",value:function(){return a.default.resolve(this)}},{key:"navigate",value:function(e){return d.default.debug("RedirectNavigator.navigate"),e&&e.url?(window.location=e.url,a.default.resolve()):(d.default.error("No url provided"),a.default.reject(new Error("No url provided")))}},{key:"url",get:function(){return d.default.debug("RedirectNavigator.url"),window.location.href}}]),e}();t.default=f},2734:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(244),a=r(i),s=n(245),o=r(s),u=n(45),l=r(u),c=n(6),d=r(c),f=n(7),h=r(f),g=n(78),p=r(g),m=n(628),y=r(m),v=n(2744),S=r(v),_=n(1454),b=r(_),E=n(2729),A=r(E),w=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"],x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.default,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.default,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A.default;if((0,d.default)(this,e),!t)throw p.default.error("No settings passed to ResponseValidator"),new Error("settings");this._settings=t,this._metadataService=new n(this._settings),this._userInfoService=new r(this._settings),this._joseUtil=i}return(0,h.default)(e,[{key:"validateSigninResponse",value:function(e,t){var n=this;return p.default.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then(function(t){return p.default.debug("state processed"),n._validateTokens(e,t).then(function(e){return p.default.debug("tokens validated"),n._processClaims(e).then(function(e){return p.default.debug("claims processed"),e})})})}},{key:"validateSignoutResponse",value:function(e,t){return p.default.debug("ResponseValidator.validateSignoutResponse"),e.id!==t.state?(p.default.error("State does not match"),l.default.reject(new Error("State does not match"))):(p.default.debug("state validated"),t.state=e.data,t.error?(p.default.warn("Response was error",t.error),l.default.reject(new b.default(t))):l.default.resolve(t))}},{key:"_processSigninParams",value:function(e,t){if(p.default.debug("ResponseValidator._processSigninParams"),e.id!==t.state)return p.default.error("State does not match"),l.default.reject(new Error("State does not match"));if(!e.client_id)return p.default.error("No client_id on state"),l.default.reject(new Error("No client_id on state"));if(!e.authority)return p.default.error("No authority on state"),l.default.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return p.default.error("authority mismatch on settings vs. signin state"),l.default.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return p.default.error("client_id mismatch on settings vs. signin state"),l.default.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return p.default.debug("state validated"),t.state=e.data,t.error?(p.default.warn("Response was error",t.error),l.default.reject(new b.default(t))):e.nonce&&!t.id_token?(p.default.error("Expecting id_token in response"),l.default.reject(new Error("No id_token in response"))):!e.nonce&&t.id_token?(p.default.error("Not expecting id_token in response"),l.default.reject(new Error("Unexpected id_token in response"))):l.default.resolve(t)}},{key:"_processClaims",value:function(e){var t=this;if(p.default.debug("ResponseValidator._processClaims"),e.isOpenIdConnect){if(p.default.debug("response is OIDC, processing claims"),e.profile=this._filterProtocolClaims(e.profile),this._settings.loadUserInfo&&e.access_token)return p.default.debug("loading user info"),this._userInfoService.getClaims(e.access_token).then(function(n){return p.default.debug("user info claims received from user info endpoint"),n.sub!==e.profile.sub?(p.default.error("sub from user info endpoint does not match sub in id_token"),l.default.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(e.profile=t._mergeClaims(e.profile,n),p.default.debug("user info claims received, updated profile:",e.profile),e)});p.default.debug("not loading user info")}else p.default.debug("response is not OIDC, not processing claims");return l.default.resolve(e)}},{key:"_mergeClaims",value:function(e,t){var n=(0,o.default)({},e);for(var r in t){var i=t[r];Array.isArray(i)||(i=[i]);var s=!0,u=!1,l=void 0;try{for(var c,d=(0,a.default)(i);!(s=(c=d.next()).done);s=!0){var f=c.value;n[r]?Array.isArray(n[r])?n[r].indexOf(f)<0&&n[r].push(f):n[r]!==f&&(n[r]=[n[r],f]):n[r]=f}}catch(e){u=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw l}}}return n}},{key:"_filterProtocolClaims",value:function(e){p.default.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=(0,o.default)({},e);return this._settings._filterProtocolClaims?(w.forEach(function(e){delete t[e]}),p.default.debug("protocol claims filtered",t)):p.default.debug("protocol claims not filtered"),t}},{key:"_validateTokens",value:function(e,t){return p.default.debug("ResponseValidator._validateTokens"),t.id_token?t.access_token?(p.default.debug("Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(p.default.debug("Validating id_token"),this._validateIdToken(e,t)):(p.default.debug("No id_token to validate"),l.default.resolve(t))}},{key:"_validateIdTokenAndAccessToken",value:function(e,t){var n=this;return p.default.debug("ResponseValidator._validateIdTokenAndAccessToken"),this._validateIdToken(e,t).then(function(e){return n._validateAccessToken(e)})}},{key:"_validateIdToken",value:function(e,t){var n=this;if(p.default.debug("ResponseValidator._validateIdToken"),!e.nonce)return p.default.error("No nonce on state"),l.default.reject(new Error("No nonce on state"));var r=this._joseUtil.parseJwt(t.id_token);if(!r||!r.header||!r.payload)return p.default.error("Failed to parse id_token",r),l.default.reject(new Error("Failed to parse id_token"));if(e.nonce!==r.payload.nonce)return p.default.error("Invalid nonce in id_token"),l.default.reject(new Error("Invalid nonce in id_token"));var i=r.header.kid;return this._metadataService.getIssuer().then(function(a){return p.default.debug("Received issuer"),n._metadataService.getSigningKeys().then(function(s){if(!s)return p.default.error("No signing keys from metadata"),l.default.reject(new Error("No signing keys from metadata"));p.default.debug("Received signing keys");var o=void 0;if(i)o=s.filter(function(e){return e.kid===i})[0];else{if(s=n._filterByAlg(s,r.header.alg),s.length>1)return p.default.error("No kid found in id_token and more than one key found in metadata"),l.default.reject(new Error("No kid found in id_token and more than one key found in metadata"));o=s[0]}if(!o)return p.default.error("No key matching kid or alg found in signing keys"),l.default.reject(new Error("No key matching kid or alg found in signing keys"));var u=e.client_id,c=n._settings.clockSkew;return p.default.debug("Validaing JWT; using clock skew (in seconds) of: ",c),n._joseUtil.validateJwt(t.id_token,o,a,u,c).then(function(){return p.default.debug("JWT validation successful"),r.payload.sub?(t.profile=r.payload,t):(p.default.error("No sub present in id_token"),l.default.reject(new Error("No sub present in id_token")))})})})}},{key:"_filterByAlg",value:function(e,t){p.default.debug("ResponseValidator._filterByAlg",t);var n=null;if(t.startsWith("RS"))n="RSA";else if(t.startsWith("PS"))n="PS";else{if(!t.startsWith("ES"))return p.default.debug("alg not supported: ",t),[];n="EC"}return p.default.debug("Looking for keys that match kty: ",n),e=e.filter(function(e){return e.kty===n}),p.default.debug("Number of keys that match kty: ",n,e.length),e}},{key:"_validateAccessToken",value:function(e){if(p.default.debug("ResponseValidator._validateAccessToken"),!e.profile)return p.default.error("No profile loaded from id_token"),l.default.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return p.default.error("No at_hash in id_token"),l.default.reject(new Error("No at_hash in id_token"));if(!e.id_token)return p.default.error("No id_token"),l.default.reject(new Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return p.default.error("Failed to parse id_token",t),l.default.reject(new Error("Failed to parse id_token"));var n=t.header.alg;if(!n||5!==n.length)return p.default.error("Unsupported alg:",n),l.default.reject(new Error("Unsupported alg: "+n));var r=n.substr(2,3);if(!r)return p.default.error("Unsupported alg:",n,r),l.default.reject(new Error("Unsupported alg: "+n));if(r=parseInt(r),256!==r&&384!==r&&512!==r)return p.default.error("Unsupported alg:",n,r),l.default.reject(new Error("Unsupported alg: "+n));var i="sha"+r,a=this._joseUtil.hashString(e.access_token,i);if(!a)return p.default.error("access_token hash failed:",i),l.default.reject(new Error("Failed to validate at_hash"));var s=a.substr(0,a.length/2),o=this._joseUtil.hexToBase64Url(s);return o!==e.profile.at_hash?(p.default.error("Failed to validate at_hash",o,e.profile.at_hash),l.default.reject(new Error("Failed to validate at_hash"))):l.default.resolve(e)}}]),e}();t.default=x},2735:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(78),l=r(u),c=n(2726),d=r(c),f=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default;if((0,a.default)(this,e),!t)throw l.default.error("No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=r,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),this._userManager.getUser().then(function(e){e&&n._start(e)}).catch(function(e){l.default.error("SessionMonitor ctor; error from getUser:",e.message)})}return(0,o.default)(e,[{key:"_start",value:function(e){var t=this,n=e.session_state;n&&(this._sub=e.profile.sub,this._sid=e.profile.sid,l.default.debug("SessionMonitor._start; session_state:",n,", sub:",this._sub),this._checkSessionIFrame?this._checkSessionIFrame.start(n):this._metadataService.getCheckSessionIframe().then(function(e){if(e){l.default.debug("Initializing check session iframe");var r=t._client_id,i=t._checkSessionInterval;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),r,e,i),t._checkSessionIFrame.start(n)}else l.default.warn("No check session iframe found in the metadata")}).catch(function(e){l.default.error("Error from getCheckSessionIframe:",e.message)}))}},{key:"_stop",value:function(){l.default.debug("SessionMonitor._stop"),this._sub=null,this._sid=null,this._checkSessionIFrame&&this._checkSessionIFrame.stop()}},{key:"_callback",value:function(){var e=this;l.default.debug("SessionMonitor._callback"),this._userManager.querySessionStatus().then(function(t){var n=!0;t?t.sub===e._sub?(n=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?l.default.debug("Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(l.default.debug("Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):l.default.debug("Different subject signed into OP:",t.sub):l.default.debug("Subject no longer signed into OP"),n&&(l.default.debug("SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut())}).catch(function(t){l.default.debug("Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut()})}},{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}}]),e}();t.default=f},2736:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(78),l=r(u),c=n(506),d=r(c),f=n(1458),h=r(f),g=function(){function e(t){var n=t.url,r=t.client_id,i=t.redirect_uri,s=t.response_type,o=t.scope,u=t.authority,c=t.data,f=t.prompt,g=t.display,p=t.max_age,m=t.ui_locales,y=t.id_token_hint,v=t.login_hint,S=t.acr_values,_=t.resource,b=t.request,E=t.request_uri;if((0,a.default)(this,e),!n)throw l.default.error("No url passed to SigninRequest"),new Error("url");if(!r)throw l.default.error("No client_id passed to SigninRequest"),new Error("client_id");if(!i)throw l.default.error("No redirect_uri passed to SigninRequest"),new Error("redirect_uri");if(!s)throw l.default.error("No response_type passed to SigninRequest"),new Error("response_type");if(!o)throw l.default.error("No scope passed to SigninRequest"),new Error("scope");if(!u)throw l.default.error("No authority passed to SigninRequest"),new Error("authority");var A=e.isOidc(s);this.state=new h.default({nonce:A,data:c,client_id:r,authority:u}),n=d.default.addQueryParam(n,"client_id",r),n=d.default.addQueryParam(n,"redirect_uri",i),n=d.default.addQueryParam(n,"response_type",s),n=d.default.addQueryParam(n,"scope",o),n=d.default.addQueryParam(n,"state",this.state.id),A&&(n=d.default.addQueryParam(n,"nonce",this.state.nonce));var w={prompt:f,display:g,max_age:p,ui_locales:m,id_token_hint:y,login_hint:v,acr_values:S,resource:_,request:b,request_uri:E};for(var x in w)w[x]&&(n=d.default.addQueryParam(n,x,w[x]));this.url=n}return(0,o.default)(e,null,[{key:"isOidc",value:function(e){var t=e.split(/\s+/g).filter(function(e){return"id_token"===e});return!!t[0]}},{key:"isOAuth",value:function(e){var t=e.split(/\s+/g).filter(function(e){return"token"===e});return!!t[0]}}]),e}();t.default=g},2737:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(506),l=r(u),c="openid",d=function(){function e(t){(0,a.default)(this,e);var n=l.default.parseUrlFragment(t,"#");this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.state=n.state,this.id_token=n.id_token,this.session_state=n.session_state,this.access_token=n.access_token,this.token_type=n.token_type,this.scope=n.scope,this.profile=void 0;var r=parseInt(n.expires_in);if("number"==typeof r&&r>0){var i=parseInt(Date.now()/1e3);this.expires_at=i+r}}return(0,o.default)(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ");
}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf(c)>=0||!!this.id_token}}]),e}();t.default=d},2738:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(78),o=r(s),u=n(506),l=r(u),c=n(865),d=r(c),f=function e(t){var n=t.url,r=t.id_token_hint,i=t.post_logout_redirect_uri,s=t.data;if((0,a.default)(this,e),!n)throw o.default.error("No url passed to SignoutRequest"),new Error("url");r&&(n=l.default.addQueryParam(n,"id_token_hint",r)),i&&(n=l.default.addQueryParam(n,"post_logout_redirect_uri",i),s&&(this.state=new d.default({data:s}),n=l.default.addQueryParam(n,"state",this.state.id))),this.url=n};t.default=f},2739:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(506),o=r(s),u=function e(t){(0,a.default)(this,e);var n=o.default.parseUrlFragment(t,"?");this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.state=n.state};t.default=u},2740:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(78),l=r(u),c=function(){function e(t){(0,a.default)(this,e),this._userManager=t,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring.bind(this)),this._userManager.getUser().then(function(e){}).catch(function(e){l.default.error("Error from getUser:",e.message)})}return(0,o.default)(e,[{key:"_tokenExpiring",value:function(){var e=this;l.default.debug("SilentRenewService automatically renewing access token"),this._userManager.signinSilent().then(function(e){l.default.debug("Silent token renewal successful")},function(t){l.default.error("Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)})}}]),e}();t.default=c},2741:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(288),h=r(f),g=n(13),p=r(g),m=n(78),y=r(m),v=n(424),S=r(v),_=n(1455),b=r(_),E=5,A=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.default.timer;(0,o.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r._timer=n,r._nowFunc=function(){return Date.now()/1e3},r}return(0,p.default)(t,e),(0,l.default)(t,[{key:"init",value:function(e){this.cancel(),e<=0&&(e=1),e=parseInt(e),y.default.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=this.now+e;var t=E;e<t&&(t=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*t)}},{key:"cancel",value:function(){this._timerHandle&&(y.default.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)}},{key:"_callback",value:function(){var e=this._expiration-this.now;y.default.debug("Timer._callback; "+this._name+" timer expires in:",e),this._expiration<=this.now&&(this.cancel(),(0,h.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"raise",this).call(this))}},{key:"now",get:function(){return parseInt(this._nowFunc())}}]),t}(b.default);t.default=A},2742:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=n(628),h=r(f),g=n(424),p=r(g),m="access_token",y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.default.XMLHttpRequest,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.default;if((0,o.default)(this,e),!t)throw d.default.error("No settings provided"),new Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=n,this._metadataService=new r(this._settings)}return(0,l.default)(e,[{key:"revoke",value:function(e,t){var n=this;if(d.default.debug("TokenRevocationClient.revoke"),!e)throw d.default.error("No accessToken provided"),new Error("No accessToken provided.");return this._metadataService.getRevocationEndpoint().then(function(r){if(r){var i=n._settings.client_id,a=n._settings.client_secret;return n._revoke(r,i,a,e)}if(t)throw d.default.error("Revocation not supported"),new Error("Revocation not supported")})}},{key:"_revoke",value:function(e,t,n,r){var i=this;return d.default.debug("Calling revocation endpoint"),new a.default(function(a,s){var o=new i._XMLHttpRequestCtor;o.open("POST",e),o.onload=function(){d.default.debug("HTTP response received, status",o.status),200===o.status?a():s(Error(o.statusText+" ("+o.status+")"))};var u="client_id="+encodeURIComponent(t);n&&(u+="&client_secret="+encodeURIComponent(n)),u+="&token_type_hint="+encodeURIComponent(m),u+="&token="+encodeURIComponent(r),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(u)})}}]),e}();t.default=y},2743:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(78),d=r(c),f=function(){function e(t){var n=t.id_token,r=t.session_state,i=t.access_token,a=t.token_type,s=t.scope,u=t.profile,l=t.expires_at,c=t.state;(0,o.default)(this,e),this.id_token=n,this.session_state=r,this.access_token=i,this.token_type=a,this.scope=s,this.profile=u,this.expires_at=l,this.state=c}return(0,l.default)(e,[{key:"toStorageString",value:function(){return d.default.debug("User.toStorageString"),(0,a.default)({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}},{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}],[{key:"fromStorageString",value:function(t){return d.default.debug("User.fromStorageString"),new e(JSON.parse(t))}}]),e}();t.default=f},2744:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(1456),d=r(c),f=n(628),h=r(f),g=n(78),p=r(g),m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.default;if((0,o.default)(this,e),!t)throw p.default.error("No settings passed to UserInfoService"),new Error("settings");this._settings=t,this._jsonService=new n,this._metadataService=new r(this._settings)}return(0,l.default)(e,[{key:"getClaims",value:function(e){var t=this;return p.default.debug("UserInfoService.getClaims"),e?this._metadataService.getUserInfoEndpoint().then(function(n){return p.default.debug("received userinfo url",n),t._jsonService.getJson(n,e).then(function(e){return p.default.debug("claims received",e),e})}):(p.default.error("No token passed"),a.default.reject(new Error("A token is required")))}}]),e}();t.default=m},2745:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),s=n(12),o=r(s),u=n(6),l=r(u),c=n(7),d=r(c),f=n(14),h=r(f),g=n(13),p=r(g),m=n(78),y=r(m),v=n(2730),S=r(v),_=n(2747),b=r(_),E=n(2743),A=r(E),w=n(2746),x=r(w),P=n(2740),T=r(P),F=n(2735),C=r(F),R=n(2742),I=r(R),D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.default,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.default,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.default;(0,l.default)(this,t),e instanceof b.default||(e=new b.default(e));var a=(0,h.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a._events=new x.default(e),a.settings.automaticSilentRenew&&(y.default.debug("automaticSilentRenew is configured, setting up silent renew"),a._silentRenewService=new n(a)),a.settings.monitorSession&&(y.default.debug("monitorSession is configured, setting up session monitor"),a._sessionMonitor=new r(a)),a._tokenRevocationClient=new i(a._settings),a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"getUser",value:function(){var e=this;return y.default.debug("UserManager.getUser"),this._loadUser().then(function(t){return t?(y.default.info("user loaded"),e._events.load(t,!1),t):(y.default.info("user not found in storage"),null)})}},{key:"removeUser",value:function(){var e=this;return y.default.debug("UserManager.removeUser"),this._storeUser(null).then(function(){y.default.info("user removed from storage"),e._events.unload()})}},{key:"signinPopup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.default.debug("UserManager.signinPopup");var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(e){return e&&(e.profile&&e.profile.sub?y.default.info("signinPopup successful, signed in sub: ",e.profile.sub):y.default.info("signinPopup successful")),e})):(y.default.error("No popup_redirect_uri or redirect_uri configured"),a.default.reject(new Error("No popup_redirect_uri or redirect_uri configured")))}},{key:"signinPopupCallback",value:function(e){return y.default.debug("UserManager.signinPopupCallback"),this._signinCallback(e,this._popupNavigator).then(function(e){return e&&(e.profile&&e.profile.sub?y.default.info("signinPopupCallback successful, signed in sub: ",e.profile.sub):y.default.info("signinPopupCallback successful")),e})}},{key:"signinSilent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.default.debug("UserManager.signinSilent");var n=t.redirect_uri||this.settings.silent_redirect_uri;if(!n)return y.default.error("No silent_redirect_uri configured"),a.default.reject(new Error("No silent_redirect_uri configured"));t.redirect_uri=n,t.prompt="none";var r=void 0;return r=t.id_token_hint?a.default.resolve():this._loadUser().then(function(e){t.id_token_hint=e&&e.id_token}),r.then(function(){return e._signin(t,e._iframeNavigator,{startUrl:n,silentRequestTimeout:t.silentRequestTimeout||e.settings.silentRequestTimeout})}).then(function(e){return e&&(e.profile&&e.profile.sub?y.default.info("signinSilent successful, signed in sub: ",e.profile.sub):y.default.info("signinSilent successful")),e})}},{key:"signinSilentCallback",value:function(e){return y.default.debug("UserManager.signinSilentCallback"),this._signinCallback(e,this._iframeNavigator).then(function(e){return e&&(e.profile&&e.profile.sub?y.default.info("signinSilentCallback successful, signed in sub: ",e.profile.sub):y.default.info("signinSilentCallback successful")),e})}},{key:"querySessionStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.default.debug("UserManager.querySessionStatus");var n=t.redirect_uri||this.settings.silent_redirect_uri;return n?(t.redirect_uri=n,t.prompt="none",t.response_type="id_token",t.scope="openid",this._signinStart(t,this._iframeNavigator,{startUrl:n,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(t){return e.processSigninResponse(t.url).then(function(e){return y.default.debug("got signin response"),e.session_state&&e.profile.sub&&e.profile.sid?(y.default.info("querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid}):void y.default.info("querySessionStatus successful, user not authenticated")})})):(y.default.error("No silent_redirect_uri configured"),a.default.reject(new Error("No silent_redirect_uri configured")))}},{key:"_signin",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.default.debug("_signin"),this._signinStart(e,t,r).then(function(e){return n._signinEnd(e.url)})}},{key:"_signinCallback",value:function(e,t){return y.default.debug("_signinCallback"),t.callback(e)}},{key:"_signout",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.default.debug("_signout"),this._signoutStart(e,t,r).then(function(e){return n._signoutEnd(e.url)})}},{key:"signinRedirect",value:function(e){return y.default.debug("UserManager.signinRedirect"),this._signinStart(e,this._redirectNavigator).then(function(){y.default.info("signinRedirect successful")})}},{key:"signinRedirectCallback",value:function(e){return y.default.debug("UserManager.signinRedirectCallback"),this._signinEnd(e||this._redirectNavigator.url).then(function(e){return e&&(e.profile&&e.profile.sub?y.default.info("signinRedirectCallback successful, signed in sub: ",e.profile.sub):y.default.info("signinRedirectCallback successful")),e})}},{key:"signoutRedirect",value:function(e){return y.default.debug("UserManager.signoutRedirect"),this._signoutStart(e,this._redirectNavigator).then(function(){y.default.info("signoutRedirect successful")})}},{key:"signoutRedirectCallback",value:function(e){return y.default.debug("UserManager.signoutRedirectCallback"),this._signoutEnd(e||this._redirectNavigator.url).then(function(e){y.default.info("signoutRedirectCallback successful")})}},{key:"signoutPopup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.default.debug("UserManager.signinPopup");var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){y.default.info("signoutPopup successful")})}},{key:"signoutPopupCallback",value:function(e,t){"undefined"==typeof t&&"boolean"==typeof e&&(e=null,t=!0),y.default.debug("UserManager.signoutPopupCallback");var n="?";return this._popupNavigator.callback(e,t,n).then(function(){y.default.info("signoutPopupCallback successful")})}},{key:"_signinStart",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.default.debug("_signinStart"),t.prepare(r).then(function(t){return y.default.debug("got navigator window handle"),n.createSigninRequest(e).then(function(e){return y.default.debug("got signin request"),r.url=e.url,r.id=e.state.id,t.navigate(r)})})}},{key:"_signinEnd",value:function(e){var t=this;return y.default.debug("_signinEnd"),this.processSigninResponse(e).then(function(e){y.default.debug("got signin response");var n=new A.default(e);return t._storeUser(n).then(function(){return y.default.debug("user stored"),t._events.load(n),n})})}},{key:"_signoutStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.default.debug("_signoutStart"),n.prepare(r).then(function(n){return y.default.debug("got navigator window handle"),t._loadUser().then(function(i){y.default.debug("loaded current user from storage");var s=t._settings.revokeAccessTokenOnSignout?t._revokeInternal(i):a.default.resolve();return s.then(function(){var a=e.id_token_hint||i&&i.id_token;return a&&(y.default.debug("Setting id_token into signout request"),e.id_token_hint=a),t.removeUser().then(function(){return y.default.debug("user removed, creating signout request"),t.createSignoutRequest(e).then(function(e){return y.default.debug("got signout request"),r.url=e.url,e.state&&(r.id=e.state.id),n.navigate(r)})})})})})}},{key:"_signoutEnd",value:function(e){return y.default.debug("_signoutEnd"),this.processSignoutResponse(e).then(function(e){return y.default.debug("got signout response"),e})}},{key:"revokeAccessToken",value:function(){var e=this;return y.default.debug("UserManager.revokeAccessToken"),this._loadUser().then(function(t){return e._revokeInternal(t,!0).then(function(n){if(n)return y.default.debug("removing token properties from user and re-storing"),t.access_token=null,t.expires_at=null,t.token_type=null,e._storeUser(t).then(function(){y.default.debug("user stored"),e._events.load(t)})})}).then(function(){y.default.info("access token revoked successfully")})}},{key:"_revokeInternal",value:function(e,t){y.default.debug("checking if token revocation is necessary");var n=e&&e.access_token;return!n||n.indexOf(".")>=0?(y.default.debug("no need to revoke due to no user, token, or JWT format"),a.default.resolve(!1)):this._tokenRevocationClient.revoke(n,t).then(function(){return!0})}},{key:"_loadUser",value:function(){return y.default.debug("_loadUser"),this._userStore.get(this._userStoreKey).then(function(e){return e?(y.default.debug("user storageString loaded"),A.default.fromStorageString(e)):(y.default.debug("no user storageString"),null)})}},{key:"_storeUser",value:function(e){if(e){y.default.debug("_storeUser storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return y.default.debug("_storeUser removing user storage"),this._userStore.remove(this._userStoreKey)}},{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(S.default);t.default=D},2746:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(288),h=r(f),g=n(13),p=r(g),m=n(78),y=r(m),v=n(2725),S=r(v),_=n(1455),b=r(_),E=function(e){function t(e){(0,o.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n._userLoaded=new b.default("User loaded"),n._userUnloaded=new b.default("User unloaded"),n._silentRenewError=new b.default("Silent renew error"),n._userSignedOut=new b.default("User signed out"),n._userSessionChanged=new b.default("User session changed"),n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"load",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];y.default.debug("UserManagerEvents.load"),(0,h.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"load",this).call(this,e),n&&this._userLoaded.raise(e)}},{key:"unload",value:function(){y.default.debug("UserManagerEvents.unload"),(0,h.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"unload",this).call(this),this._userUnloaded.raise()}},{key:"addUserLoaded",value:function(e){this._userLoaded.addHandler(e)}},{key:"removeUserLoaded",value:function(e){this._userLoaded.removeHandler(e)}},{key:"addUserUnloaded",value:function(e){this._userUnloaded.addHandler(e)}},{key:"removeUserUnloaded",value:function(e){this._userUnloaded.removeHandler(e)}},{key:"addSilentRenewError",value:function(e){this._silentRenewError.addHandler(e)}},{key:"removeSilentRenewError",value:function(e){this._silentRenewError.removeHandler(e)}},{key:"_raiseSilentRenewError",value:function(e){y.default.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)}},{key:"addUserSignedOut",value:function(e){this._userSignedOut.addHandler(e)}},{key:"removeUserSignedOut",value:function(e){this._userSignedOut.removeHandler(e)}},{key:"_raiseUserSignedOut",value:function(e){y.default.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise(e)}},{key:"addUserSessionChanged",value:function(e){this._userSessionChanged.addHandler(e)}},{key:"removeUserSessionChanged",value:function(e){this._userSessionChanged.removeHandler(e)}},{key:"_raiseUserSessionChanged",value:function(e){y.default.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise(e)}}]),t}(S.default);t.default=E},2747:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=r(i),s=n(6),o=r(s),u=n(7),l=r(u),c=n(14),d=r(c),f=n(13),h=r(f),g=n(78),p=(r(g),n(1457)),m=r(p),y=n(2733),v=r(y),S=n(2731),_=r(S),b=n(2727),E=r(b),A=n(1459),w=r(A),x=n(424),P=r(x),T=60,F=2e3,C=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.popup_redirect_uri,r=e.popup_post_logout_redirect_uri,i=e.popupWindowFeatures,s=e.popupWindowTarget,u=e.silent_redirect_uri,l=e.silentRequestTimeout,c=e.automaticSilentRenew,f=void 0!==c&&c,h=e.monitorSession,g=void 0===h||h,p=e.checkSessionInterval,m=void 0===p?F:p,y=e.revokeAccessTokenOnSignout,S=void 0!==y&&y,b=e.accessTokenExpiringNotificationTime,A=void 0===b?T:b,x=e.redirectNavigator,C=void 0===x?new v.default:x,R=e.popupNavigator,I=void 0===R?new _.default:R,D=e.iframeNavigator,O=void 0===D?new E.default:D,k=e.userStore,N=void 0===k?new w.default({store:P.default.sessionStorage}):k;(0,o.default)(this,t);var H=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,arguments[0]));return H._popup_redirect_uri=n,H._popup_post_logout_redirect_uri=r,H._popupWindowFeatures=i,H._popupWindowTarget=s,H._silent_redirect_uri=u,H._silentRequestTimeout=l,H._automaticSilentRenew=!!f,H._accessTokenExpiringNotificationTime=A,H._monitorSession=g,H._checkSessionInterval=m,H._revokeAccessTokenOnSignout=S,H._redirectNavigator=C,H._popupNavigator=I,H._iframeNavigator=O,H._userStore=N,H}return(0,h.default)(t,e),(0,l.default)(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return!(!this.silent_redirect_uri||!this._automaticSilentRenew)}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(m.default);t.default=C},2750:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.getSystemInfo().authServiceUrl,n=e.getSystemInfo().workspaceId,r=e.getApplicationPath()+"/silentSignInResult.html",i=e.getApplicationPath()+"/api/login/logout",a={authority:t,client_id:n,silent_redirect_uri:r,response_type:"id_token token",scope:"openid email tp"},o=new c.default(a),u=600,l=10,d=(0,h.getAccessToken)();d&&s(o,l).then(function(e){var t=1e3*(e.expiresIn-u);setInterval(function(){s(o,l)},t)},function(){f.ajax({url:i,type:"POST",dataType:"json",contentType:"application/json"})})}function s(e,t){return new u.default(function(n,r){t>0?e.signinSilent().then(function(e){return(0,h.setAccessToken)(e.access_token),n({expiresIn:e.expires_in})},function(){s(e,--t).then(function(e){n(e)},function(e){r()})}):r()})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),u=i(o);t.init=a,t.getNewAccessToken=s;var l=n(2745),c=i(l),d=n(2),f=r(d),h=n(629)},2755:function(e,t,n){var r;r=function(e){function t(e){var t=new l;t._id=o.uniqueId("board_"),t.isBoardEdition=!0,t.setWindow(window),t.setFeaturesService(window.tauFeatures),t.setLoggedUser(window.loggedUser);var n=new h(t,{parameterName:e});return t.registerService("navigator",n),t}function r(){A.isEnabled("viewsMenuMashup")||T.register("tau/api/viewsMenu/v1/menuOperations",function(){return n(869)})}function i(){var e=!u(location.href).hasQueryKey("nomashups"),t=e?b.install():P.resolve({});return t.then(function(){tauLoadProgress.activityEnd("user.mashups")})}function a(e,t){x.set(e);var n={name:"application board",options:{applicationId:t},routes:_.createApplicationRoutes(e),context:{configurator:e},extensions:[p,m,y,v]},r=g.create(n);tauLoadProgress.activity("app.init"),r.initialize(n),w.init(n),E.prefetchCkEditor()}var s=n(2),o=n(1),u=n(188),l=n(93),c=n(25),d=n(507),f=n(2750),h=n(233),g=n(349),p=n(1988),m=n(3294),y=n(3295),v=n(3975),S=n(2756).default,_=n(868).default,b=n(1189).default,E=n(748),A=n(453),w=n(1972),x=n(317).default,P=n(21);n(1461),n(2184);var T=n(62);n.e(11,function(){n(1986)}),c.isBoardEdition=!0;var F=n(1021).default;F.mountSystemSettings(c);var C=s.Deferred();s(C.resolve.bind(C)),C.then(function(){d.addDefaultHeaders();var e="page",n=t(e),o=c.getGlobalBus();n.getFeaturesService().isEnabled("oauth")&&f.init(n);var u={},l=function(){o.removeAllListeners(u),setTimeout(function(){tauLoadProgress.activityEnd("app.init").remove(s)},4)};return o.addEventListener("error",l,u),o.addEventListener("contentRendered",l,u),new S(n,e).process().then(r).then(i).then(function(){return a(n,e)})})}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},2756:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=r(i),s=n(7),o=r(s),u=n(1),l=r(u),c=n(2),d=r(c),f=n(188),h=r(f),g=function(){function e(t,n){(0,a.default)(this,e),this.configurator=t,this.applicationId=n}return(0,o.default)(e,[{key:"process",value:function(){var e=this.configurator.getWindow(),t=(0,h.default)(e.location.href),n="false"!==t.queryKey.firstTime&&!e.appIsInDebugMode,r=n&&e.tauUserInfo.isFirstTimeTp3Login;return r?this.firstTimeLogin():this.notFirstTimeLogin()}},{key:"notFirstTimeLogin",value:function(){var e=this.configurator.getHashService(),t=!e.getHash();if(t&&l.default.has(e.getHrefParsed().queryKey,"start"))this.setHash("start/start");else if(t&&l.default.has(e.getHrefParsed().queryKey,"invite"))this.setHash("invite");else{var n=e.getHashParam(this.applicationId,"board/last");e.setHashParam(this.applicationId,n)}return d.default.Deferred().resolve()}},{key:"firstTimeLogin",value:function(){var e=this.configurator.getLoggedUser().isAdministrator,t=this._isSsoWelcomePage(),n=!0,r=d.default.Deferred();if(e?this.setHash("start/start"):t||this.setHash("invite"),n)if(t)r.resolve();else{var i=this.configurator.getGlobalSettingsService();i.sendRequest("GlobalSettingsService","FirstTimeLoginTP3",null).done(r.resolve).fail(function(){throw new Error("First time login operation is failed")})}else r.reject();return r}},{key:"_isSsoWelcomePage",value:function(){var e=this.configurator.getHashService();return"sso/welcome"===e.getHashParam("page")}},{key:"setHash",value:function(e){this.configurator.getHashService().setHash(this.applicationId+"="+e)}}]),e}();t.default=g},3294:function(e,t,n){var r,i;r=[n(1),n(10)],i=function(e,t){return t.extend({init:function(e){this.globalBus=e.bus.globalBus,this._super(e),this._slice={},this._commands={},this._startLifeCycle=null,this.diagnostics=e.context.configurator.getDiagnosticsService(),this._setPageClientProcessingTime()},_setPageClientProcessingTime:function(){var e=this.diagnostics.page();e&&(e.client=(new Date).getTime()-window.clientStartTime.getTime())},_requestCompleted:function(e,t){this._commands[t.command.method]=parseInt(t.response.getResponseHeader("X-Stopwatch"),10)},_viewReady:function(e){if(this._startLifeCycle.caller.id==e.caller.id){var t=e.date-this._startLifeCycle.date,n=Math.max(0,this._commands.xaxis||0,this._commands.yaxis||0);this._commands.list&&(n+=this._commands.list),this._commands.cells&&(n+=this._commands.cells),this.diagnostics.set("board",{server:n,client:t-n})}},"globalBus start.lifecycle":function(e){this._startLifeCycle=e},"globalBus slice.ready":function(t,n){e.each(n,function(e,t){this._slice[t]!==e&&(this._slice[t]&&(this._slice[t].removeListener("request.completed",this._requestCompleted,this),this._commands={}),this._slice[t]=e,e.on("request.completed",this._requestCompleted,this))},this)},"globalBus model.cells.content.loaded + cardsFullyLoaded":function(e){this._viewReady(e["model.cells.content.loaded"])},"globalBus overview.board.ready":function(e){this._viewReady(e)}})}.apply(t,r),!(void 0!==i&&(e.exports=i))},3295:function(e,t,n){var r;r=function(e){var t=n(10);return t.extend({init:function(e){this._super(e);var t=e.context.configurator;this._listener=t.getViewsMenuCometListener(),this._listener.startListen()},destroy:function(){this._listener.stopListen(),this._super()}})}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},3975:function(e,t,n){"use strict";var r=n(2),i=n(10),a=n(1),s=n(20);n(19),r.widget("ui.tauBubbleTooltip",r.ui.tauBubble,{}),e.exports=i.extend({_initTooltip:function(e,t){var n=s({"tau-bubble-board__inner tau-container":!0,"tau-bubble-board__inner--nowrap":e.data("tooltip-nowrap")});e.tauBubbleTooltip({content:t,zIndex:999,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="'+n+'" role="content"></div>',"</div>"].join(""),className:"tau-bubble-tooltip",showEvent:"tauBubbleTooltip.show",hideEvent:"mouseleave mousedown",mode:"tooltip",stackName:"tooltip",delay:500,onPositionConfig:this._tooltipPositionConfig,onArrowPositionConfig:this._tooltipPositionConfig})},_tooltipPositionConfig:function(e){e.at="center bottom-1",e.my="center top"},_getTooltipContent:function(e){var t=e.data("collapsed-selector")||".tau-collapsed",n=e.data("title");if(e.is(t)){var r=e.data("title-collapsed");r&&(n=r)}var i=e.data("expanded-selector")||".tau-expanded";if(e.is(i)){var s=e.data("title-expanded");s&&(n=s)}return n?"<span>"+a.escape(n)+"</span>":null},"bus afterRender":function(){var e=this,t=function(t){var n=r(t.currentTarget),i=e._getTooltipContent(n);if(i){var a=n.tauBubbleTooltip("instance");if(a){var s=n.tauBubbleTooltip("option","content");s!==i&&n.tauBubbleTooltip("option","content",i)}else e._initTooltip(n,i);n.trigger("tauBubbleTooltip.show")}};r(document).on("mouseenter.tooltip",".i-role-board-tooltip",t),this.on("destroy",function(){r(document).off("mouseenter.tooltip",".i-role-board-tooltip",t)})}})},5381:function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function i(e){var t,r,i,a,s,o,u=e.length;s=n(e),o=new c(3*u/4-s),i=s>0?u-4:u;var d=0;for(t=0,r=0;t<i;t+=4,r+=3)a=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],o[d++]=a>>16&255,o[d++]=a>>8&255,o[d++]=255&a;return 2===s?(a=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,o[d++]=255&a):1===s&&(a=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,o[d++]=a>>8&255,o[d++]=255&a),o}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(a(r));return i.join("")}function o(e){for(var t,n=e.length,r=n%3,i="",a=[],o=16383,l=0,c=n-r;l<c;l+=o)a.push(s(e,l,l+o>c?c:l+o));
return 1===r?(t=e[n-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),a.push(i),a.join("")}t.byteLength=r,t.toByteArray=i,t.fromByteArray=o;for(var u=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=d.length;f<h;++f)u[f]=d[f],l[d.charCodeAt(f)]=f;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},5382:function(e,t,n){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return o(this,e,t,n)}function o(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?d(e,t,n):g(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function c(e,t){if(u(t),e=a(e,t<0?0:0|p(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=a(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=f(e,t),e}function g(e,t){if(s.isBuffer(t)){var n=0|p(t.length);return e=a(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&Z(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),s.alloc(+e)}function y(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return F(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){function a(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,o=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<o;l++)if(a(e,l)===a(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*s}else c!==-1&&(l-=l-c),c=-1}else for(n+u>o&&(n=o-u),l=n;l>=0;l--){for(var d=!0,f=0;f<u;f++)if(a(e,l+f)!==a(t,f)){d=!1;break}if(d)return l}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function A(e,t,n,r){return Y(G(t,e.length-n),e,n,r)}function w(e,t,n,r){return Y(W(t),e,n,r)}function x(e,t,n,r){return w(e,t,n,r)}function P(e,t,n,r){return Y(J(t),e,n,r)}function T(e,t,n,r){return Y(z(t,e.length-n),e,n,r)}function F(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],s=null,o=a>239?4:a>223?3:a>191?2:1;if(i+o<=n){var u,l,c,d;switch(o){case 1:a<128&&(s=a);break;case 2:u=e[i+1],128===(192&u)&&(d=(31&a)<<6|63&u,d>127&&(s=d));break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(d=(15&a)<<12|(63&u)<<6|63&l,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(d=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c,d>65535&&d<1114112&&(s=d))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return R(r)}function R(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=K(e[a]);return i}function k(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function q(e){if(e=U(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function U(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function z(e,t){for(var n,r,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function J(e){return $.toByteArray(q(e))}function Y(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e){return e!==e}var $=n(5381),Q=n(5507),Z=n(5558);t.Buffer=s,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return o(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return l(null,e,t,n)},s.allocUnsafe=function(e){return c(null,e)},s.allocUnsafeSlow=function(e){return c(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,u=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),d=0;d<u;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},s.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return P(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=s.prototype;else{var i=t-e;r=new s(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),Q.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),Q.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),Q.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),Q.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var a=1,s=0;for(this[t]=255&e;++s<n&&(a*=256);)this[t+s]=e/a&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;H(this,e,t,n,i,0)}var a=n-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);H(this,e,t,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||H(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:G(new s(e,r).toString()),u=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},5507:function(e,t){t.read=function(e,t,n,r,i){var a,s,o=8*i-r-1,u=(1<<o)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=o;c>0;a=256*a+e[t+d],d+=f,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=r;c>0;s=256*s+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:(h?-1:1)*(1/0);s+=Math.pow(2,r),a-=l}return(h?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var s,o,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,g=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+d>=1?f/u:f*Math.pow(2,1-d),t*u>=2&&(s++,u/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*u-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&o,h+=g,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[n+h]=255&s,h+=g,s/=256,l-=8);e[n+h-g]|=128*p}},5558:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}});